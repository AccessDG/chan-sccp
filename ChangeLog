2013-06-28  ddegroot

	* [r4746] .[CPY], .version, Makefile.in, NEWS, aclocal.m4,
	  configure, contrib/gen_sccpconf/Makefile.in, debian/changelog,
	  doc/Makefile.in, src/Makefile.in: V4.1 Stable Release

	* [r4745] Added SPA504G to devicetypes (Issues Reported By: Kumar
	  Shantanu)

2013-06-26  ddegroot

	* [r4744] Fix connectedline for transfer (ast_channel_connected()
	  -> ast->connected....)

	* [r4743] Fix connectedline for transfer (ast_channel_connected()
	  -> ast->connected....)

	* [r4742] Update connectedline for transfer, to set the correct
	  callInfo

	* [r4741] Update connectedline for transfer, to set the correct
	  callInfo

2013-06-23  ddegroot

	* [r4740] Fix doxygen header

	* [r4739] Include *.hh file in doxygen generation

	* [r4738] Reindented source files

	* [r4737] Reindented sccp_conference / sccp_config

	* [r4736] Reindent sccp_channel

	* [r4735] Reindent sccp_appfunctions.c

	* [r4734] Reindent sccp_actions.c

	* [r4733] Reindent chan_sccp.c

	* [r4732] Reindent chan_sccp.h

	* [r4731] Update/Fix doxygen file header, Update doxygen structure
	  comments

2013-06-22  ddegroot

	* [r4730] Added sccp_channel_transfer_release and
	  sccp_channel_transfer_cancel functions

2013-06-21  ddegroot

	* [r4729] Added global config parameter: 'transfer_on_hangup'
	  (default=off), which will complete transfer, when the transferer
	  hangups up, after the destination has been reached. Making a
	  second press of the transfer button unnecessary. However this
	  does make cancelling a transfer a little harder, either press
	  resume on the transfered channel or have the receiving party
	  hangup first (might be considered a negative side effect, there
	  for 'transfer_on_hangup' is switched 'off' by default).

	* [r4728] Fix Transfer Issue Part 2: When the receiver of a
	  transfered channel hangs up, without accepting the transfered
	  channel, older SCCP phones would not display the callplane of the
	  transfered call upon hangup (Reported by Sander Smeenk: 'Transfer
	  Bug?'). Updated previous fix, to simulate sccp_channel_hold more
	  closely and take care of the device refcount being of by +1

	* [r4727] Fix Transfer Issue: When the receiver of a transfered
	  channel hangsup, without accepting the transfered channel, older
	  SCCP phones would not display the callplane of the transfered
	  call upon hangup. There was/is a previous work around in
	  sccp_channel_endcall, but this would only be run when the
	  transferer hungup before transfering the call (Reported by Sander
	  Smeenk: 'Transfer Bug?')

2013-06-20  ddegroot

	* [r4726] renamed button_type_t to sccp_config_buttontype_t
	  (chan_sccp_enums.hh). removed sccp_diff_t and light_t enums.

	* [r4725] Fix cli:sccp config generate, to accept arbitrairy file
	  name

	* [r4724] Removed button_modes struct, because it is never used
	  anywhere

2013-06-19  ddegroot

	* [r4723] revert handling of sccp_pbx_softswitch in case \!c->owner
	  (keep the added ast_channel_refcount)

	* [r4722] Remedy loss of pbx_channel during sccp_pbx_softswitch, by
	  taking an extra reference for the time of this function

	* [r4721] Update/fix doxygen warnings

	* [r4720] Update conf/sccp.conf.annotated to use the information
	  produced by gen_sccpconf sccp.conf.annotated ALL instead

	* [r4719] Add description information for buttons

	* [r4718] Fix description generation for gen_sccpconf

	* [r4717] Fix/update gen_sccp

2013-06-18  marcelloceschia

	* [r4716] remove comment

	* [r4715] use boolean indicator in sccp_dev_speed_find_byindex

2013-06-18  ddegroot

	* [r4714] finish: revert the revert of void
	  sccp_dev_speed_find_byindex

	* [r4713] Check existance of pbx_channel before running
	  pbx_check_hangup (reported by Leonid)

	* [r4712] Fix videoformat2str compile warning

2013-06-18  marcelloceschia

	* [r4711] revert the revert

2013-06-18  ddegroot

	* [r4710] Fix warning about non-initalized iconstate, when
	  d->allowRinginNotification is false, by moving the break, inside
	  the check

	* [r4709] fix configure --enable-gcov

	* [r4708] Replaced inline with gcc_inline when using non-gcc
	  compiler

	* [r4707] Fix warning about enum-conversion for dtmfmode

	* [r4706] Fix implicit-function-declaration for
	  sccp_videoformat2str

	* [r4705] reverting sccp_dev_speed_find_byindex changes back to
	  unspefic uint8_t type, passing either SCCP_BUTTONTYPE or
	  SKINNY_BUTTONTYPE to this function

2013-06-18  marcelloceschia

	* [r4704] fixes compile warnings in hint, do not use default state
	  for switch

2013-06-18  ddegroot

	* [r4703] Commented out ButtonTemplateMessageSingle (which was a
	  special single instance of ButtonTemplateMessage, not used
	  anywhere and conflicting MsgId)

	* [r4702] Add sccp_enum_macro.h to EXTRA_DIST so that it will
	  included during make release

	* [r4701] Fix sccp_hint.c compile (after last commit)

2013-06-18  marcelloceschia

	* [r4700] set hint->previousState in asterisk callback

2013-06-17  ddegroot

	* [r4699] Pervious Permit/Deny config parser return value change,
	  causes sccp reload to restart all devices every time. Because it
	  is difficult evaluate if ha changed between reloads. Instead of
	  setting alreadySetEntries on SCCP_CONFIG_CHANGE_CHANGED it is now
	  set on \!SCCP_CONFIG_CHANGE_INVALIDVALUE, which yields the
	  correct behaviour (though less precise)

	* [r4698] Permit/Deny config parser did not include
	  SCCP_CONFIG_CHANGE_CHANGED upon successfully setting the new
	  value

2013-06-16  ddegroot

	* [r4697] Split sccp_enum_entries.hh based on their namespaces /
	  allegiance to
	  chan_sccp_enums.hh/sccp_event_enums.hh/sccp_protocol_enums.hh.
	  Created sccp_enum_macro.h to cope with this split.

	* [r4696] Updated enum sample to follow the current macro code

	* [r4695] Added simple verification method comment to
	  sccp_enum_entries.hh (+Reindent)

	* [r4694] Reverted: Rename of SKINNY_DEVICE_RS_* enum entries to
	  SCCP_DEVICE_RS_* (Back to SKINNY_DEVICE_RS_*)

	* [r4693] Removed sccp_channelstate2AstDeviceState from sccp_utils

	* [r4692] Fix compilation when compiles without CS_AST_HAS_EVENT

	* [r4691] Fix compilation when compiles without CS_AST_HAS_EVENT

	* [r4690] Fix lampmode index

	* [r4689] Update ChangeLog

	* [r4688] Replaced SKINNY_STATION_* with SKINNY_RINGTYPE_*

	* [r4687] Replaced SCCP_BLF_STATUS_* with SKINNY_BLF_STATUS_*

	* [r4686] Replaced skinny_callPriority_t with skinny_callpriority_t

	* [r4685] Renamed SKINNY_DEVICE_RS_* enum entries with
	  SCCP_DEVICE_RS_*

	* [r4684] Cleanup old enum names / function definitions
	  
	  Replaced:
	  skinny_busylampfield_state_t -> skinny_busylampfield_state_t
	  registrationstate2str -> registrationstate2str
	  sccp_autoanswer_t -> sccp_autoanswer_t
	  accessorystate2str -> accessorystate2str
	  keymode2str -> keymode2str

	* [r4683] Cleanup old enum names / function definitions
	  
	  Replace:
	  channelstate2str -> channelstate2str
	  devicestate2str -> devicestate2str
	  skinny_lampmode_t -> skinny_lampMode_t
	  lampmode2str -> lampMode2str

	* [r4682] Moved most of the enum declarations to
	  sccp_enum_entries.hh.
	  SCCP(event_type,channelState,miscCommandType,devicestate,callforward,registrationstate,dtmfmode,autoanswer,dndmode,accessory,accessorystate)
	  and
	  SKINNY(devfeature,calltype,callstate,tone,callPriority,callinfo_visibility,callsecuritystate,lampMode,busylampfield_state,alarm,devicetype,stimulus,buttontype,videoformat,ringtype,receivetransmit,keymode).
	  This replaces a loarge number of looping map-traversals with
	  finite switch cases (reducing CPU usage and gaining compiler
	  warnings on faulty assignments).

2013-06-14  ddegroot

	* [r4681] event2str is the first of several enums which will move
	  to sccp_enum_entries.hh. Replacing the ARR2STR macro so that the
	  looping lookup cost is not be incured, instead it will make use
	  of a finite flat switch/case.

	* [r4680] Inline sccp_strlen, sccp_strlen_zero, sccp_strequals,
	  sccp_strcaseequals, because they get called a lot

	* [r4679] rename sccp_config_entries.h sccp_enum_entries.hh,
	  because it is not a real headerfile

	* [r4678] rename sccp_config_entries.h sccp_enum_entries.hh,
	  because it is not a real headerfile

	* [r4677] Added comment to sccp_config, to explain how SetEntries /
	  alreadySetEntries work together, to skip setting default values
	  multiple times for the same struct variable

	* [r4676] Reduce the number of calls to sccp_addons_taps

	* [r4675] Fix setting default for deprecated config parameters
	  pointing to the same struct variable as another config paramater
	  (reported by Steve Walker in regards to directed_pickup and
	  deprecated pickupexten)

2013-06-13  ddegroot

	* [r4674] Make 'sccp reload force' work

	* [r4673] Added 'force' option to 'sccp reload'

2013-06-10  ddegroot

	* [r4672] Switching (back) from SCCP_CHANNELSTATE_ZOMBIE to using
	  SCCP_CHANNELSTATE_CONGESTION when a line does not have device
	  attached to it (unavailable/unregistered/not registered yet)

	* [r4671] Added profile / gcov / lcov support to configure/make
	  system

2013-06-10  marcelloceschia

	* [r4670] use the same dnd code for shared and simple line

	* [r4669] cleanup hint code

	* [r4668] set calltype on notifyPBX

	* [r4667] cleanup hint code

2013-06-09  ddegroot

	* [r4666] update fix cid on hint for devices with
	  inuseprotocolversion < 15 and unset calltype / handle
	  unregistered devices cleanly

2013-06-08  ddegroot

	* [r4665] Added priority to CleanPriNotify Message (Verified).
	  Added sccp test message StatusBar, to verify some assumptions
	  (will be removed again)

2013-06-08  marcelloceschia

	* [r4664] fixes cid on hint for devices with inuseprotocolversion <
	  15 and unset calltype

2013-06-06  ddegroot

	* [r4663] Set minimum device/global keepalive value to 30

2013-06-05  ddegroot

	* [r4662] Remove REQUIRED FLAG from the device_type/device config
	  paramater

2013-05-29  ddegroot

	* [r4661] Detect difference between asterisk-11-branch /
	  asterisk-trunk by checking for uuid.h. Added dedicated
	  ast111.c/ast111.h version for asterisk-11-branch because of
	  functional divergence since the introduction of the new asterisk
	  bridging code, requiring a seperate astTrunk.c version

	* [r4660] Added configure warning when asterisk revision goes
	  beyond 389378 (currently not supported, we are working on it)

	* [r4659] Add bridged_channel check to selectchannel option
	  (sccp_features)

	* [r4658] Added configure warning when asterisk revision goes
	  beyond 389899 (currently not supported, we are working on it)

	* [r4657] Added configure warning when asterisk revision goes
	  beyond 389899 (currently not supported, we are working on it)

2013-05-29  marcelloceschia

	* [r4656] fixes nullpointer issue in set_connected_line

2013-05-28  ddegroot

	* [r4655] Make compatible with latest asterisk-trunk (new channel
	  bridging code) (FYI: there is an issue with retrieving
	  channel_bridge_peer at this moment, which may/will cause issues
	  during transfer/conference/pickup, this needs some more
	  investigation)

2013-05-27  ddegroot

	* [r4654] Fixing default context for mailbox. Added mailboxes to
	  sccp show line. Generalized mwi event handling. Update some of
	  the debug message in sccp_mwi.c

	* [r4653] Fixing default context for mailbox. Added mailboxes to
	  sccp show line. Generalized mwi event handling. Update some of
	  the debug message in sccp_mwi.c

	* [r4652] Removed multithreaded remote indication handling
	  (experimental-mode), again. Reduced the number of cases where
	  indicate_remote_device is called

2013-05-26  ddegroot

	* [r4651] Small fix for non-experimental-mode

	* [r4650] Added remote device indication using a seperate thread
	  (via threadpool) (in CS_EXPERIMENTAL block)

	* [r4649] only invoke remote device indication if any

	* [r4648] Simplify and reduce calls to remote indication

2013-05-22  marcelloceschia

	* [r4647] add allowRinginNotification

2013-05-21  ddegroot

	* [r4646] Fix error handling when poll returns 0 in sccp_socket.c

	* [r4645] Use d instead of device in sccp_indicate. Cleanup some of
	  the older comments. Continue instead of break where
	  linedevice->device is not found in sccp_indicate_remote_device

2013-05-18  ddegroot

	* [r4644] Use sockaddr_storage instead of sockaddr_in in
	  sccp_protocol parse functions. Warn when receiving ipv6 addresses
	  in skinny media/rtp message handling in sccp_actions.c (for now)

2013-05-18  marcelloceschia

	* [r4643] add 2 helper functions

2013-05-17  ddegroot

	* [r4642] Removal of CPU_COUNT as it is not used in the source
	  code, and might give of false signals for example during cross
	  compilation

2013-05-16  marcelloceschia

	* [r4641] revert 4640

2013-05-16  ddegroot

	* [r4640] Fix warning about uninitialized variables in
	  sccp_handle_XMLAlarmMessage (Reported by Jacob Miles)

2013-05-15  marcelloceschia

	* [r4639] add example for default line selection

2013-05-14  ddegroot

	* [r4636] Removal of do_monitor/restart_monitor funktions for
	  asterisk version 10 and up (Lock issue reported by Niklas
	  Larsson)

	* [r4635] Fix compilation against asterisk-1.6.2 (removed
	  ast_sched_context_destroy which does not exist in this version)

	* [r4634] Fix compilation against asterisk-1.6.2

	* [r4633] Fix asterisk/manager.h detection

2013-05-11  ddegroot

	* [r4631] Added ULONG check option when cross compilation (Openwrt)

	* [r4630] Added ULONG check option when cross compilation

2013-05-10  ddegroot

	* [r4629] Fix PBX_MODDIR setting when compiling directly against
	  the asterisk source directory (where lib/asterisk/modules
	  directory will not exist) (Reported by Nikola Ciprich)

2013-05-09  ddegroot

	* [r4628] Reverting device!=NULL check before calling sccp_indicate

	* [r4627] Search for 'd' or retain of 'd' could result in 'd' still
	  being NULL

2013-05-09  marcelloceschia

	* [r4626] remove sccp_kill_tech

2013-05-09  ddegroot

	* [r4625] Re-bootstrap for manager_custom_hook

2013-05-09  marcelloceschia

	* [r4624] fixes, #77, fixes some other issues, cleanup indication,
	  cleanup sccp_dev_set_cplane

	* [r4623] use feature_monitor from pbx interface, references #77

	* [r4622] add feature_monitor in pbx interface, references #77

	* [r4621] fixes log, references #77

	* [r4620] indent

	* [r4619] fixes monitorFeature reset, change automon feature using
	  ast_find_call_feature (needs to be moved to ast*), references #77

	* [r4618] fixes findBestCodec

	* [r4617] check for struct manager_custom_hook, references #77

	* [r4616] fixes wrong string comparison, references #77

	* [r4615] send digits when on monitor feature

	* [r4614] implement getFeatureExtension for asterisk >= 12

	* [r4613] apply redirection update patch provided by pavel

2013-05-08  marcelloceschia

	* [r4612] fixes padding for dynamic message lenght

2013-05-06  marcelloceschia

	* [r4611] fixes #117, compile with LOW_MEMORY

	* [r4610] remove patch

	* [r4609] wrong rtp usage in sccp_rtp_set_phone

2013-05-06  ddegroot

	* [r4608] ILBC key/name/description mapping

	* [r4607] ILBC key/name/description mapping

2013-05-06  marcelloceschia

	* [r4606] do not use directRTP if nat is set

	* [r4605] change g729b/low codec key to ilbc

2013-05-03  ddegroot

	* [r4604] Added man page for gen_sccpconf to satisfy rpmbuild

	* [r4603] Fix ast_enable_distributed_devstate compile warning

	* [r4602] Fix compile warning

2013-05-02  ddegroot

	* [r4601] Fix compile warning about device being used uninitalized
	  (Reported by Holger Hornung)

	* [r4600] Fix transfer with local_channel->state = PROGRESS
	  (Provided by Niklas Larsson)

	* [r4599] Fix debug statement in sccp_socket.c: sccp_process_data

	* [r4598] Fix --with-astmoddir configure option (By request:
	  Marcello)

	* [r4597] Update --with-astmoddir configure option (By request:
	  Marcello)

	* [r4596] Adapt sccp_socket_: sccp_process_data to handle
	  DynamicUpdateCapabilitiesMessage correctly (Holger Hornung)

	* [r4595] Removed --with-callweaver option from configure. Added
	  ppc64 to astmoddir setting using /usr/lib64 if it exists.

	* [r4594] Added --with-astmoddir configure option (By request:
	  Marcello)

	* [r4593] Extended DynamicUpdateCapabilitiesMessage to fix length
	  (Holger Hornung)

	* [r4592] Extended DynamicUpdateCapabilitiesMessage to fix length
	  (Holger Hornung)

	* [r4591] Extended DynamicUpdateCapabilitiesMessage to fix length

	* [r4590] Replaced Unknown_0x0044_Message by
	  DynamicUpdateCapabilitiesMessage (Follows previous
	  UpdateCapabilitiesMessage exactly)

2013-05-01  ddegroot

	* [r4589] Update What is SCCP doc

2013-04-28  ddegroot

	* [r4588] Added hold, transfer, conference and redial buttons for
	  8941 phones

	* [r4587] Extended capture of 0x0044 SPCP message (Thanks to
	  Holger)

	* [r4586] Added first capture of 0x0044 SPCP message (Thanks to
	  Holger)

2013-04-26  ddegroot

	* [r4585] Renamed d -> device / added single exit point for
	  tokenAck / register functions. No change in handling.

	* [r4584] Fix number of buttons on 8941
	  (https://sourceforge.net/p/chan-sccp-b/bugs/181)

	* [r4583] Fix newPacketSize when it equals SCCP_MAX_PACKET
	  (https://sourceforge.net/p/chan-sccp-b/bugs/181)

2013-04-25  ddegroot

	* [r4582] Fix pbx_channel_unref in conference und pickup

	* [r4581] Added dummy message 0x0044 as unknown
	  (https://sourceforge.net/p/chan-sccp-b/bugs/181)

	* [r4580] Module unload / SCCP_TIME_TO_KEEP_REFCOUNTEDOBJECT (fixes
	  #106)

2013-04-23  ddegroot

	* [r4579] Updated sendUserToDeviceDataVersion1Message

	* [r4578] Reduced the ConfList Message size, to cram in as much
	  information as possible

	* [r4577] Prevent UserToDevice messages larger than 2048 being to
	  old protocol devices (which would cause a buffer overflow and a
	  subsequent full reset of the device (Reported by Alena Juk))

2013-04-22  ddegroot

	* [r4576] Added sched_yield during refcount object removal, to
	  allow other threads to finish their work before cleaning out the
	  object

2013-04-20  ddegroot

	* [r4575] Changing scheduled (SCCP_TIME_TO_KEEP_REFCOUNTEDOBJECT *
	  10) to (SCCP_TIME_TO_KEEP_REFCOUNTEDOBJECT * 3) for astTrunk only
	  (for now).

	* [r4574] Latest asterisk-trunk version removed the
	  'ast_enable_distributed_devstate' command, added a test for it to
	  configure and escaped this code in sccp_config.c. From reading
	  the asterisk sources, i am assuming that distributed devstate is
	  now always enabled (possibly when res_jabber or res_ais is
	  loaded).

2013-04-18  marcelloceschia

	* [r4573] fix segmentation fault after global ip reject, cloese
	  #105

2013-04-16  ddegroot

	* [r4572] commented out REF_DEBUG

	* [r4571] Fix for realtime devices (as per request by Marcello).

2013-04-16  marcelloceschia

	* [r4570] add a default line example

2013-04-15  ddegroot

	* [r4569] Extended logging on 'poll returned 0, errno Success' to
	  include device->id and ip-address

2013-04-14  ddegroot

	* [r4568] Moved the sccp_...._find functions from sccp_utils to the
	  appropriate locations

	* [r4567] Fix sccp_line_find_byname change

	* [r4566] Removed sccp_line_find_realtime_byname. Renamed
	  sccp_line_find_realtime_byname_wo to
	  sccp_line_find_realtime_byname. Updated all function calls to
	  sccp_line_find_realtime_byname to include realtime (TRUE/FALSE).
	  Updated all function calls to sccp_line_find_realtime_byname_wo
	  to use sccp_line_find_realtime_byname instead.

	* [r4565] Fix conference compilation against asterisk-1.6.2
	  (connected line update).

	* [r4564] Sync cli macro's for all version (removed alloca in
	  astTrunk 3 weeks ago, without negative side effects)

2013-04-11  ddegroot

	* [r4563] Using GETSIZE to generate a unique l->id instead of
	  copying l->name if it was not provided in sccp.conf

	* [r4562] Force update when switching config files using sccp
	  reload [...]

	* [r4561] Update/Cleanup sccp_line_addToGlobals

2013-04-11  marcelloceschia

	* [r4560] fixes device refcount issue, cloese #100

2013-04-10  marcelloceschia

	* [r4559] fixes conference issue

2013-04-10  ddegroot

	* [r4558] Revert changes to sccp_line_addToGlobals

2013-04-09  marcelloceschia

	* [r4557] fixes session unlock

2013-04-09  ddegroot

	* [r4556] Update flow to use sccp_line_addToGlobals

	* [r4555] Revised sccp_line_addToGlobals to have a single exit
	  point and auto release new line that was going to be added, if it
	  was already found in the globals list

	* [r4554] cleanup return from sccp_indicate.c

	* [r4553] Fix module line destroy

	* [r4552] Fixing refcount when sccp reload for changes in line
	  cid_name / label

	* [r4551] Wenn release retained device in a safe_loop, no need to
	  retain a reference around it (we are releasing one remember)
	  (saving multiple useless retain/releases)

	* [r4550] We reloading using a different file, no need to check
	  file changed status

	* [r4549] Fixing sccp reload for changes in line cid_name / label
	  (one down, one to go)

2013-04-08  ddegroot

	* [r4548] Fix transfer cleanup mistake (reported by Alena/Leonid)

2013-04-07  ddegroot

	* [r4547] Fix refcount issue in sccp_indicate (returning without
	  release) (Thanks Pavel).

	* [r4546] Cleanup / Refactor of sccp_line.c

	* [r4545] Cleanup / Refactor of sccp_device.c

2013-04-06  ddegroot

	* [r4544] Cleanup / Refactor of sccp_channel.c

	* [r4543] Enabled WITHREF for experimental mode only (Mute/Unmute
	  Conference Partitipant to test)

	* [r4542] Added some debug output to WITHREF macro's for testing
	  purposes

	* [r4541] Added some debug output to WITHREF macro's for testing
	  purposes

	* [r4540] Show WITHREF/GETWITHREF solution

	* [r4539] Show WITHREF/GETWITHREF solution

	* [r4538] Sorted header by type of function. Removed local
	  implementation of sccp_channel_retain/sccp_channel_release

	* [r4537] Remove unused function array2str

2013-04-05  marcelloceschia

	* [r4536] fixes warnings

	* [r4535] fixes posible refcount issue in
	  sccp_wrapper_recvdigit_end

	* [r4534] fixes posible refcount issue in
	  sccp_wrapper_asterisk111_rtpBridge

	* [r4533] fixes refcount issue in sccp_asterisk_pbx_fktChannelWrite

	* [r4532] fixes refcount issue in sccp_asterisk_pbx_fktChannelWrite

2013-04-05  ddegroot

	* [r4531] Copied loading order from astTrunk to other versions, so
	  that chan-sccp-b is loaded later, and dialplan warnings should be
	  reduced

	* [r4530] Remove unnecessary call to strdupa. Pointer to
	  astman_get_header should suffice (Needs to be copied to previous
	  implementation when no side effects are noted)

	* [r4529] Use provided argv[2] instead of calling astman_get_header
	  again

	* [r4528] Use gnu strdupa if available

	* [r4527] Fixing possible null-pointer dereferences / Removed
	  unnecessary retain/release

	* [r4526] Fixing free issue on return from re-alloc

	* [r4525] Fixing possible null-pointer dereferences

	* [r4524] Fixing possible null-pointer dereferences

2013-04-04  marcelloceschia

	* [r4523] rename sccp_set_hold, add backgroundImage

	* [r4522] cleanup SCCP_CONFIG_NOUPDATENEEDED

	* [r4521] tests with set functions

	* [r4520] apply default configuration for realtime devices

	* [r4519] splitt applyDeviceConfiguration and applyDeviceDefaults

2013-04-04  ddegroot

	* [r4518] Renamed some of the completer properties

	* [r4517] Update sccp_config_entries for softkeyset (not really
	  used yet)

	* [r4516] Renamed some of the completer properties

2013-04-04  marcelloceschia

	* [r4515] fixes xml messages

	* [r4514] some test with set function

	* [r4513] some test with set function

2013-04-03  ddegroot

	* [r4512] Quick/Ugly fix for missing ast_do_pickup (Reported by
	  Dmity)

2013-04-02  ddegroot

	* [r4511] Fixing park issue for asterisk-10-branch (Reported and
	  tested by Mark Lemmo)

2013-03-30  marcelloceschia

	* [r4510] move videomode and join default set to action

2013-03-29  ddegroot

	* [r4509] Added deprecation to unused functions in ast.c

	* [r4508] Suppress warning about empty context (deprecated:
	  pickupexten). Add logging output for subscriptionId.

2013-03-28  ddegroot

	* [r4507] Fix compilation on asterisk-10

2013-03-28  marcelloceschia

	* [r4506] kill tech for asterisk, used after hangup

	* [r4505] fixes compile issue with asterisk < 11

2013-03-27  ddegroot

	* [r4504] Remove device dependency completely by using
	  c->currentDeviceId (Related to destroying rtp server fix)

2013-03-27  marcelloceschia

	* [r4503] do not check for device whe destroying rtp server

	* [r4502] workaround to update other channel as well

	* [r4501] workaround to update other channel as well

2013-03-27  ddegroot

	* [r4500] Fix setting confstr

	* [r4499] Using the right way to set the conference callerid
	  (Thanks Marcello)

2013-03-27  marcelloceschia

	* [r4498] references #97;

	* [r4497] fixes continuous cores on register, when device uses
	  button=feature,x,cfwdall; fixes #97;

2013-03-26  ddegroot

	* [r4496] Fix sccp_appfunctions.c (Ticket: #177)

	* [r4495] Added interesting last alarm messages

	* [r4494] Set phone_ip during register

	* [r4493] Updated sccp_appfunctions to include the same
	  information. To save reported ip address of the phone, phone_sin
	  was added to the session.

	* [r4492] Reverted accidental update of sccp_actions.c.

	* [r4491] Updated sccp_appfunctions to include the same
	  information. To save reported ip address of the phone, phone_sin
	  was added to the session.

	* [r4490] Updated acf_channel_read/ CHANNEL documentation. Updated
	  SCCPDEVICE / SCCPCHANNEL documentation.

	* [r4489] Update acf_channel_read function to include
	  recvip/peerip/agentname/from (moved the implementation to ast.c
	  (same for all asterisk versions). Updated sccp_appfunctions to
	  include the same information. To save reported ip address of the
	  phone, phone_sin was added to the session.

2013-03-25  ddegroot

	* [r4488] Update blind transfer patch (CS_EXPERIMENTAL)

	* [r4487] Referencing the wrong event data / Added checks for
	  linedevice, which does not always have to provided

	* [r4486] Correcting asterisk-10 version mistake while setting
	  originalCalledparty

2013-03-25  marcelloceschia

	* [r4485] asterisk 1.8 does not have a orig field in
	  ast_party_redirecting, use from instead

	* [r4484] fixes wrong redirecting check

2013-03-25  ddegroot

	* [r4483] Show useRedialMenu (Advanced Option) in the
	  sccp.conf.annotated file

2013-03-25  marcelloceschia

	* [r4482] fixes wrong redirecting check

2013-03-25  ddegroot

	* [r4481] SetSCCPCodec Deprecated. Instead use
	  'Set(CHANNEL(codec)=alaw)'.

	* [r4480] SetSCCPCodec Deprecated. Instead use
	  'Set(CHANNEL(codec)=alaw)'.

	* [r4479] Added d->retrieveDeviceCapabilities as a replacement for
	  the sccp_protocol.h table extension

2013-03-25  marcelloceschia

	* [r4478] indent

	* [r4477] fix compile issue

	* [r4476] fix compile issue

	* [r4475] update database tables for backgroundImage and ringtone

2013-03-24  marcelloceschia

	* [r4474] add device config option backgroundimage and ringtonne

	* [r4473] define StartAnnouncementMessage, StopAnnouncementMessage,
	  AnnouncementFinishMessage

	* [r4472] add some device function callbacks

	* [r4471] add some device function callbacks

2013-03-24  ddegroot

	* [r4470] Added CallData URL Reference

	* [r4469] Completed CISCO7985

2013-03-23  marcelloceschia

	* [r4468] fixes #95, missing description for 7985; needs to be
	  reviewed by diederik

2013-03-23  ddegroot

	* [r4467] Started adding conference invite function

	* [r4466] Update 30_Setup_Guide.doc so that it automatically
	  include the latest conf/sccp.conf sample file

	* [r4465] Deprecated sccp.conf entries pickupexten,
	  pickupmodeanswer and pickupcontext. They have been replaced by
	  directed_pickup, directed_pickup_context and
	  directed_pickup_modeanswer. Previous config parameters will
	  remain operation for the time being, but will be obsolete in the
	  next version

	* [r4464] Fix for directpickup (directed pickup)

	* [r4463] Added CS_SCCP_PICKUP aroung PICKUP/GPICKUP in
	  skSet_InUseHint

	* [r4462] Fix cli entry for conference. Add debug output to
	  gpickup. Added buttonCount variable to
	  sccp_handle_button_template_req

	* [r4461] Added log output when dialing to a number failed because
	  it does not exist in the dialplan (Always shown)

	* [r4460] Change modele load order so we get loaded later on in the
	  pbx boot process

2013-03-23  marcelloceschia

	* [r4459] fixes button template configuration for 7931

2013-03-22  ddegroot

	* [r4458] Added PBX(setPBXChannelLinkedId) to pbx_impl. Replaced
	  linkedid setting in sccp_conference by calling this new function

	* [r4457] Move pbx version specific calls to define.h and remove
	  from sccp_conference

	* [r4456] Added manager events to conference actions

	* [r4455] Removed explode and implode functions because of
	  side-effects

	* [r4454] Replaced explode function in sccp_actions.c handle_dtu by
	  sscanf. explode function still had reentrency issues, which
	  caused sccp_log (debug) to be necessary for handle_dtu to work

	* [r4453] Replaced sccp_conference_end cli/ami function by
	  sccp_conference_action, providing 'sccp conference [EndConf |
	  Kick | Mute | Moderator | Invite] ConferenceId [ParticipantId]'
	  functionality for CLI and AMI

	* [r4452] Add Promote/Demote to conference (under CS_EXPERIMENTAL).
	  This makes it possible to promote someone else to moderator and
	  then demote yourself, this way multiple moderators can manage a
	  large conference or you can leave a conference without tearing it
	  down.

	* [r4451] Make sure default value for STRINGPTR is "" wenn parsing
	  defaults (non-issue)

	* [r4450] Check channel and channel->owner before sending digits

2013-03-21  ddegroot

	* [r4449] Add conference device settings to sccp_cli / appfunctions
	  output. Add conference_id/conference_participant_id to
	  appfunctions output

	* [r4448] Fix confllist (mute/kick) when last channel has been
	  added using join-feature (reported by Leonid)

	* [r4447] Added EndConf Button to conflist menu

	* [r4446] Start numbering participant starting at 1 in every new
	  conference

	* [r4445] Update conflist on mute

2013-03-21  marcelloceschia

	* [r4444] disable warning for linedevice, fixes #83

2013-03-21  ddegroot

	* [r4443] Add sample for complete transger on endcall

	* [r4442] Fix conference mute for non-sccp phones (fixes #88)

2013-03-21  marcelloceschia

	* [r4441] backport sccp_util_matchSubscriptionId using v3.1 version

2013-03-21  ddegroot

	* [r4440] Add debug logging to sccp_conference, to find mute issue.
	  Elaborate on error description when open_receive_channel returns
	  status error

	* [r4439] Replace conf-enteringno by conf-placeintoconf (fixes #87)

2013-03-21  marcelloceschia

	* [r4438] fixes wrong subscriptionId-matching when
	  channel->line->defaultSubscriptionId.number = ''; fixes #85

2013-03-20  marcelloceschia

	* [r4437] fixes openreceive channel after call timeout and asterisk
	  prod

2013-03-20  ddegroot

	* [r4436] Added new version of
	  sccp_channel_find_on_device_bypassthrupartyid

	* [r4435] Updated dnd_state for SCCPDEVICE appfunctions

	* [r4434] Added dnd_state, dnd_feature to SCCPDEVICE appfunctions

	* [r4433] Replace assert in sccp_socket_addDevice /
	  sccp_socket_removeDevice with if check

	* [r4432] Fix line release during
	  sccp_channel_find_on_device_bypassthrupartyid

	* [r4431] Retest d->session before calling
	  sccp_session_removeDevice.

	* [r4430] Retest d->session before calling
	  sccp_session_removeDevice.

	* [r4429] Replace assert in sccp_socket_addDevice /
	  sccp_socket_removeDevice with if check

2013-03-20  marcelloceschia

	* [r4428] fixes sccp video issue !!!!

2013-03-20  ddegroot

	* [r4427] Fix mwi showing correct number of voicemail messages

2013-03-19  ddegroot

	* [r4426] Move line->name to line->id copy. Added comment.

	* [r4425] Copy line->name to line->id when empty

	* [r4424] Replace use of l->id by l->name

	* [r4423] Fix unset line->id (Leonid Korokh)

	* [r4422] Setting line->id to required for now, pending group
	  decision

	* [r4421] Fix hangup during channel allocate (reported by bob).

	* [r4420] Fix hangup during channel allocate (reported by bob).

	* [r4419] Fixing sccp_pbx_call with DND (Mail: Crash 4.1 RC1
	  b4415))

2013-03-18  ddegroot

	* [r4418] ConfList on older phones does not support AppID in the
	  XML Tag

	* [r4417] Lowering the protocol bar for conflist

	* [r4416] Fix conflist xml

	* [r4415] Fix unlocking messageStack, do set oldvalue back to NULL

	* [r4414] Replace assertion with if(s) in
	  sccp_session_removeFromGlobals and sccp_session_addToGlobals

	* [r4413] Not using value when config parameter has been set to
	  obsolete

	* [r4412] Removing non SCCP devices from sccp_protocol.h :-)

	* [r4411] Not using value when config parameter has been set to
	  obsolete

2013-03-17  ddegroot

	* [r4410] Handle keypad button correctly during connectedconference
	  (fixes #75)

	* [r4409] re-ran bootstrap

	* [r4408] Updated conflist for high-res displays

	* [r4407] Re-aligned sccp_protocol.h manually

	* [r4406] Updated configure

	* [r4405] Added struct sccp_display_capability. Re-aligned
	  sccp_protocol.h manually

	* [r4404] _FORTIFY_SOURCE only enabled when optimizing (openSuSE
	  12.3) (fixes #72)

	* [r4403] Remove unused function calls from sccp_conference.h

	* [r4402] Re-enable conference debug log out put for Hide Conf List

	* [r4401] Conference can only be joined using an active call

	* [r4400] Fix when building --without-conference

	* [r4399] Conference Updates (fixes #67, fixes #66, fixes #65,
	  fixes #63)

	* [r4398] Put channel on hold before joining (references #66)

2013-03-17  marcelloceschia

	* [r4397] default disable join button

	* [r4396] move sccp_softkey_setSoftkeyState(d, KEYMODE_CONNCONF,
	  SKINNY_LBL_JOIN, FALSE), do not set things in indicate.c

	* [r4395] fixes #72

2013-03-17  ddegroot

	* [r4394] Small Fixes part 2

	* [r4393] Small Misc Fixes

2013-03-16  ddegroot

	* [r4392] Complete SKINNY_BUTTONTYPE and SKINNY_STIMULUS (fixes
	  #76)

	* [r4391] _FORTIFY_SOURCE on openSuSE12.3 (fixes #72)

	* [r4390] _FORTIFY_SOURCE on openSuSE12.3 (fixes #72)

	* [r4389] _FORTIFY_SOURCE on openSuSE12.3 (fixes #72)

	* [r4388] Unused function. fixes #68

2013-03-16  marcelloceschia

	* [r4387] use enum for soft switch action; remove default from
	  switch, to get a warnig when some action is not implemented

	* [r4386] use enum for soft switch action; remove default from
	  switch, to get a warnig when some action is not implemented

	* [r4385] fixes 'undefined symbol: sccp_conference_create',
	  references #73, sf:
	  'https://sourceforge.net/p/chan-sccp-b/bugs/176/'

2013-03-16  ddegroot

	* [r4384] Fix compiling without-conference (references #74)

	* [r4383] Fix compiling against asterisk-1.10 (references #74)

2013-03-16  marcelloceschia

	* [r4382] fixes compile issue with conference enabled on
	  astTrunk++, closes #74

	* [r4381] fixes compile issue with conference enabled on
	  astTrunk++, closes #74

	* [r4380] fixes compile issue when --disable-conference, closes #73

2013-03-15  ddegroot

	* [r4379] Removed unused junk

	* [r4378] Start new conference via ss-switch methodology

	* [r4377] Handle ConnectedConference during openreceiveack

	* [r4376] Handle ConnectedConference Correctly while processing
	  sccp_channel_hold

	* [r4375] Update indicattion handling for ConnectedConference

	* [r4374] Reindented ast_jb_conf in chan_sccp.c. Adding ss-switch
	  option for SCCP_SS_GETCONFERENCEROOM

	* [r4373] Adapted conference Audio Patch (by Marcello) for all
	  asterisk versions

2013-03-15  marcelloceschia

	* [r4372] workaround for asterisk 11+ conference issue

	* [r4371] workaround for asterisk 11+ conference issue

	* [r4370] workaround for asterisk 11+ conference issue

2013-03-14  ddegroot

	* [r4369] Update debian packaging (removed lib64)

	* [r4368] Update debian packaging

2013-03-14  marcelloceschia

	* [r4367] fixes unused variable ‘transmitReceiveStr’ when compile
	  without debug

2013-03-13  ddegroot

	* [r4366] Suppress faulty information

	* [r4365] Fix debug output for Tell PBX/Phone. Reentrancy issue
	  with pbx_inet_ntoa

2013-03-13  marcelloceschia

	* [r4364] fixes #70

2013-03-13  ddegroot

	* [r4363] Lookup the ip-address of the server incase of INADDR_ANY

	* [r4362] Partial Fix s->ourip. Fix debug statement in sccp_rtp.c

	* [r4361] Fix refcount issue in sccp_handle_dialtone. Added
	  linedevice to event->featureChanged. Added linedevice to
	  sccp_feat_changed. Updated callforward functions to call
	  sccp_feat_changed with linedevice.

	* [r4360] Add DND AMI Command to sccp_managent.c / Update
	  CallForward AMI Command in sccp_management.c

2013-03-13  marcelloceschia

	* [r4359] readd 01527db2c4d554356a2c6f64bc445d7fc5eb4edc

	* [r4358] fixes refcount issue; references #47

	* [r4357] fixes refcount issue; references #47

2013-03-13  ddegroot

	* [r4356] Replace arbitrary values

	* [r4355] Fix make release

	* [r4354] Update debian package files

	* [r4353] Fix Fortify_Source Compile Warnings when already provided
	  by the operating system

2013-03-13  marcelloceschia

	* [r4352] fixes dnd feature buttons

2013-03-12  ddegroot

	* [r4351] Updated 'Low Memory' Check

	* [r4350] Changed 'Low Memory' Check

	* [r4349] Added escape for SCCP_FILE_VERSION when using on low
	  memory systems

	* [r4348] Added Asterisk compiled with 'Low Memory' Check

2013-03-11  marcelloceschia

	* [r4347] correct 0x015E

2013-03-11  ddegroot

	* [r4346] Reindented cnf.xml files

	* [r4345] Added annotated cnf.xml file

2013-03-09  marcelloceschia

	* [r4344] indent

2013-03-08  ddegroot

	* [r4343] Remove extranous accent

2013-03-08  marcelloceschia

	* [r4342] do not set number for name

	* [r4341] reset name/mumber of string is empty

2013-03-08  ddegroot

	* [r4340] Fix xhtml doxygen issues

	* [r4339] Remove deprecated status from
	  sccp_handle_KeepAliveMessage

	* [r4338] Switch doxygen to producing svg images

	* [r4337] Fix doxygen warnings

	* [r4336] Removed unused code fragments / remarked out code

	* [r4335] Removed unused code fragments / remarked out code

	* [r4334] Removed unused code fragments from the config parser

	* [r4333] Remove unused lock macro's

	* [r4332] Removed deprecated and unused functions

	* [r4331] Removed the --disable-dynamic-config from configure.
	  Removed use of CS_DYNAMIC_CONFIG from sources. Making dynamic
	  config standard

	* [r4330] Replaced DEBUGCAT_NEWCODE uses.

	* [r4329] Cleanup trunk directory. Update ChangeLog oldest revision

	* [r4328] Clarify debug logging on DND status change

	* [r4327] Quiet down doxygen generation

	* [r4326] Cleanup subsections

	* [r4325] Re-indented all sources

	* [r4324] Update doxygen.cfg

	* [r4323] Revert doxygen move to doc/Makefile.am

	* [r4322] Update configure / Update makefile.am

	* [r4321] Remove conference subdir

	* [r4320] Update problem reporting / Add backtrace script

2013-03-07  ddegroot

	* [r4319] Update New Features for V4.1

	* [r4318] Update clang cflags section

	* [r4317] Exclude part from doxygen

	* [r4316] Update doxygen source documentation

	* [r4315] Updating doxygen directory

	* [r4314] Updating doxygen directory

	* [r4313] Updateing doxygen directory

	* [r4312] Fix paths

	* [r4311] Rename sccp_hint2 to sccp_hint. Move
	  conference/sccp_conference to sccp_conference. Update Makefile.am

	* [r4310] Removed sccp_hint.c sccp_conference.c (old files)

	* [r4309] Removed sccp_hint.c sccp_conference.c (old files)

	* [r4308] Removed sccp_hint.c sccp_conference.c (old files)

	* [r4307] Equalize sccp_cli output columns

	* [r4306] Fix extensionStatus helper coredump, when
	  channel->owner=NULL (Added check to sccp_handle_keypad_button)

	* [r4305] Fixes conference when using asterisk-trunk (fixes #44)

	* [r4304] Update codec setting for ast110 and astTrunk (references
	  #44)

	* [r4303] Add function description/documentation to conference

	* [r4302] Fix conference refcount

2013-03-06  ddegroot

	* [r4301] Fixing conference for asterisk-10. Conference for
	  asterisk-11 still broken (codec issue). Refcount needs fixing
	  (masquerade/zombie). (references #44)

	* [r4300] Fix array subscript out of bounds error ing
	  sccp_dump_packet

2013-03-06  marcelloceschia

	* [r4299] add message dummy for 0x015E

2013-03-03  ddegroot

	* [r4298] Reverted accidental commit of sccp_sockaddr.c

	* [r4297] Removed requestor dependency in ast106.c -> ALERT_INFO
	  support dropped for this version

2013-03-02  marcelloceschia

	* [r4296] remove ALERT_INFO parsing, remove complexity for dnd and
	  ringermod

	* [r4295] parse _ALERT_INFO/__ALERT_INFO during call request

	* [r4294] some more comment

	* [r4293] parse _ALERT_INFO/__ALERT_INFO during call request

	* [r4292] parse _ALERT_INFO/__ALERT_INFO during call request

2013-03-02  ddegroot

	* [r4291] Update/Sent urgent call message even when DND is enabled

	* [r4290] Re-implemented DND override for using ringer=urgent
	  (Request: Andreas Anderon)

	* [r4289] Re-implemented DND override for using ringer=urgent
	  (Request: Andreas Anderon)

2013-02-28  ddegroot

	* [r4288] fixes #58 sccp_socket.c

	* [r4287] fixes #58 sccp_threadpool.c

	* [r4286] fixes #58 sccp_config.c

	* [r4285] fixes #58 sccp_actions.c (suppresses d null deref by
	  checking d first, should never occur though)

	* [r4284] fixes #58 sccp_line.c

2013-02-27  ddegroot

	* [r4283] Moved over parsing of StartMultiMediaTransmissionAck to
	  sccp_protocol.c as well.

	* [r4282] Reformatted sources (indent).

	* [r4281] Using unions in messages which have different
	  implementations per protocol version. Added messages parsers to
	  sccp_protocol.c for these messages.

2013-02-26  ddegroot

	* [r4280] Fix 'Tell ... to send RTP/UDP media' debug output. Use
	  SCCP_PACKET_HEADER in sccp_build_packet instead of magic value 12

	* [r4279] Fix 'Tell ... to send RTP/UDP media' debug output. Use
	  SCCP_PACKET_HEADER in sccp_build_packet instead of magic value 12

2013-02-25  ddegroot

	* [r4278] Finalizarion/Update/Cleanup for bus-error / unaligned
	  access issue on sparc64 cpu's (Reported by Philippe Teissier)

2013-02-24  ddegroot

	* [r4277] Added patches supplied by Kevin Vandenberg for CLI/AMI
	  Commands

	* [r4276] Committed patch supplied by Nicola Ciprich

	* [r4275] Added device_connected / line_connected completers for
	  sccp_cli.c

	* [r4274] Temporariry fix for sccp_handle_open_receive_channel_ack
	  message size, until we have d->protocol->allocMessage(messageId)

	* [r4273] Use SCCP_PACKET_HEADER instead of '8', fix printf
	  parameter in sccp_process_data

	* [r4272] Fix sccp reload, when in previous sccp.conf device was
	  connected to hotline. linedevice needs to be removed for hotline
	  connection and d->isAnonymous needs to be false before running
	  reload.

2013-02-24  marcelloceschia

	* [r4271] fixes some whitespaces and error messages

2013-02-24  ddegroot

	* [r4270] Fix compile warnings

	* [r4269] Fix compile warnings

	* [r4268] Fix compile issue for SpeedDialStatDynamicMessage

	* [r4267] Researching if OpenReceiveChannelAck_v22 is necessary

	* [r4266] Revised sccp_process_data, revised sccp_dump_packet,
	  added struct size to sccp_messagetypes lookup table

2013-02-23  ddegroot

	* [r4265] Guard against negative s->buffer_size (valgrind)

	* [r4264] Fix memory leak (valgrind)

	* [r4263] cleanup order of sccp_process_data

	* [r4262] valgrind fix sccp_process_data

	* [r4261] Fix valgrind 'conditional jump or move depends on
	  uninitialised value'

	* [r4260] Revised sccp_dump_packet

2013-02-22  marcelloceschia

	* [r4259] add sccp_asterisk_getSkinnyFormatMultiple

	* [r4258] use return value for during release, print type

	* [r4257] use if with {

	* [r4256] fixes skinny <==> asterisk codec conversion, fixes
	  inbound codec negotiation, closes #48

	* [r4255] remove whitespaces

	* [r4254] fixes #55, fixes cfwd issue when outgoing channel uses
	  sip peer (cause 58 - Bearer capability not available)

2013-02-21  marcelloceschia

	* [r4253] fixes issue during cfwd (double channel release),
	  references #51

2013-02-20  ddegroot

	* [r4252] Added HAVE_UNALIGNED_BUSERROR to sparc temporary fix

	* [r4251] Fixed HAVE_UNALIGNED_BUSERROR detection to configure.ac
	  (Sparc64 / Alpha)

	* [r4250] Added HAVE_UNALIGNED_BUSERROR detection to configure.ac
	  (Sparc64 / Alpha)

	* [r4249] Added HAVE_ALIGNED_ACCESS_REQUIRED to configure.ac

	* [r4248] Fix for Sparc run-time issue with memory alignment
	  (replaced unsigned long long with unsigned long for sccp_group_t)

2013-02-19  ddegroot

	* [r4247] Remarked out Fix for Sparc run-time issue with memory
	  alignment (need more time to test/think)

	* [r4246] Fix sparc configure issue calculating number of CPU

	* [r4245] Fix sparc run-time issue with memory alignment

2013-02-18  ddegroot

	* [r4244] Updated configure report at the end

	* [r4242] Warn more clearly when rejecting connection from device
	  based on global deny/permit settings during socket connection

	* [r4241] Fix doxygen warning in sccp_channel.c. Update doxygen.cfg
	  for current version. Update ChangeLog

2013-02-17  ddegroot

	* [r4239] Disable automatic installation of chan-sccp-b_backtrace
	  script (bootstrap)

	* [r4238] Disable automatic installation of chan-sccp-b_backtrace
	  script

2013-02-17  marcelloceschia

	* [r4237] use strdupa for lineName and fixing refcount issue, fixes
	  #49

2013-02-16  ddegroot

	* [r4235] Temporarily removed callwaiting interval until we find a
	  correct solution

2013-02-15  ddegroot

	* [r4234] Fixing callwaiting interval handling (possible null
	  dereference)

	* [r4233] Show callwaiting interval in sccp show globals

	* [r4232] Reduce debug logging when using sendDynamicDisplayNotify

	* [r4231] Fix Channel setDevice needed to make callwaiting work

2013-02-15  marcelloceschia

	* [r4230] fixes refcount issuen when no linedevice found

2013-02-14  ddegroot

	* [r4229] Fix reload for adhocNumber (sccp reload, reported by Sean
	  Curran)

2013-02-14  marcelloceschia

	* [r4228] fixes refcount issuen when no linedevice found

2013-02-12  ddegroot

	* [r4225] Updated debug comment for 'answered elsewhere'

2013-02-11  marcelloceschia

	* [r4224] fixes missing ast_cel_linkedid_ref in asterisk 1.8.13.1,
	  fixes #45

2013-02-11  ddegroot

	* [r4223] Fix: duplicate case value in ast108.c for
	  AST_CONTROL_REDIRECTING

	* [r4222] fixes #43

2013-02-10  marcelloceschia

	* [r4221] add patch by diederik

	* [r4220] fixes #37, button feature not updated when cfwd disabled

2013-02-09  ddegroot

	* [r4219] Found little bug in display of permit/deny values for
	  device

2013-02-08  marcelloceschia

	* [r4218] use requestor->linkedid, references #6

	* [r4217] do not release line when already created by an other
	  thread

2013-02-08  ddegroot

	* [r4216] revert previous sccp_refcount.c compile warning fix

	* [r4215] renamed function sccp_wrapper_sendRedirectedUpdate to
	  sccp_asterisk_sendRedirectedUpdate, as requested

	* [r4214] Fix compile issue with pbx_channel_redirecting_effective_
	  in sccp_asterisk_redirectedUpdate (after define.h was replaced in
	  other fix by marcello (conflicting commit))

	* [r4213] Fix compile warnings

2013-02-07  marcelloceschia

	* [r4212] references #33, clang issue

	* [r4211] do not register asterisk glue, references #14

	* [r4210] fixes #33, clang issue

2013-02-07  ddegroot

	* [r4209] Back port of sendRedirectedUpdate. references #18.

	* [r4208] Make compile with asterisk-1.8 / asterisk10 (references
	  #18)

	* [r4207] Make compile against asterisk-1.6 (references #18)

	* [r4206] Backport of astobj2 ref/unref from astTrunk.c (references
	  #2, references #22, references #15, references #6)

2013-02-07  marcelloceschia

	* [r4205] add remark

	* [r4204] fixes #18, with room for improvement (transferer callLog)

	* [r4203] use unknown reason for call request

	* [r4202] fixes #32

2013-02-06  ddegroot

	* [r4201] Updated sccp_wrapper_asterisk18_set_rtp_peer to new
	  version (marcello). Commented out ast_rtp_glue_register /
	  ast_rtp_glue_unregister (Fixes #31)

	* [r4200] Fixed sql file generator for Postgresql.

	* [r4199] Fixed sql file generator for SqlLite.

	* [r4198] Extended gen_sccpconf.c to include complete sql file
	  generator for Mysql, Postgres and SqlLite.

	* [r4197] Cleanup debugging for sccp_config.c

2013-02-05  ddegroot

	* [r4196] Fix memory leak. fixes #29

	* [r4195] Update value for removed parameters in sccp.conf when
	  parsing defaults. fixes #29

2013-02-05  marcelloceschia

	* [r4194] this is references issue #31, untested

2013-02-05  ddegroot

	* [r4193] Fix #28 : returning information when gpickup failed.

2013-02-05  marcelloceschia

	* [r4192] fixes uninitialized warning

	* [r4191] cleanup transferChannels.transfer* during the hangup
	  process, add some remarks

2013-02-05  ddegroot

	* [r4190] Removed ugly hold/resume from gpickup (Issue: #10)

	* [r4189] Fix two small spelling mistakes

2013-02-05  marcelloceschia

	* [r4188] cleanup transferChannels.transfer* during the hangup
	  process

	* [r4187] allow to complete transfer on fist channel (transferee),
	  references #25

2013-02-04  marcelloceschia

	* [r4186] some more checks test with asterisk channel ref; related
	  to #2 #22

2013-02-04  ddegroot

	* [r4185] Replace ast_mod_start -> PBX(moh_start). Beautify sccp
	  extension match helper output.

2013-02-04  marcelloceschia

	* [r4184] re-enable refcount for asterisk channels, this is related
	  to #22

2013-02-04  ddegroot

	* [r4183] Added music_on_hold paramater for conference. Handle
	  hold/resume in conference correctly. When moderator is onhold,
	  music is player. Set conf_music_on_hold_class to empty string, if
	  music on hold is not wanted.

	* [r4182] Followed revision 4179

	* [r4181] Fixed spelling mistake in function name

	* [r4180] Cleanup conference join. (Issue #12)

2013-02-04  marcelloceschia

	* [r4179] fixes #27

	* [r4178] du not use ast_channel_ref in asterisk 11, closes #22

	* [r4177] fixes channel refcount issue reported by Pavel Troller,
	  closes #23

2013-02-04  ddegroot

	* [r4176] Fixed ')' issue reported by Bob (chan-sccp-b r4175 - no
	  compile on 2 diff systems)

2013-02-03  ddegroot

	* [r4175] Put conference join into production. Solved Issue #12

	* [r4174] Fixed conference channel refcount (moderators side of the
	  channels, where not being released after masqueration (Issue
	  #1/#15)

	* [r4173] Cleanup conference / Added comments / Fixed Issue #1

	* [r4172] Removed the AST_BRIDGE_FLAG_SMART flag, resulting in
	  working conference destroy, even with larger participant numbers
	  and foreign channel types (like SIP). More testing is necessary,
	  but it looks hopefull.

	* [r4171] Fixed participant refcount for conference, so that it is
	  cleaned up correctly after conference is over. Added linkedid to
	  conference struct. Update linkedid's to the moderator channel
	  whichs starts the conference

	* [r4170] Implemented sccp_wrapper_asterisk_set_channel_linkedid
	  (replaced linkedid/updated cel_ref)

	* [r4169] Replaced ast_rtp_glue_register with
	  ast_rtp_proto_register for asterisk 1.6

	* [r4168] Fix queue answer issue wenn invalid url has been added,
	  checking URL content in sendHTML to prevent invalid url being
	  resent over and over again (1).

	* [r4167] Fix queue answer issue wenn invalid url has been added,
	  checking URL content in sendHTML to prevent invalid url being
	  resent over and over again.

	* [r4166] Tiny fix some debug messages.

	* [r4165] Added comment to replace pbx_pickup_call with
	  PBX(feature_pickup)

2013-02-03  marcelloceschia

	* [r4164] do not send dialing state back to asterisk, this will
	  prevent signalling connected state when pickup a parked call,
	  fixes #17

2013-02-03  ddegroot

	* [r4163] Singular implementation for grouppickup

	* [r4162] Fix compile / fix comment / fix order

2013-02-03  marcelloceschia

	* [r4161] backport to asterisk 1.6 - 10

	* [r4160] major logic error, this fixes #6 and review for #15 may
	  be a solution for #4

2013-02-02  ddegroot

	* [r4159] Extent experimental define block to enclose all cli test
	  messages (1)

	* [r4158] Extent experimental define block to enclose all cli test
	  messages

	* [r4157] Update setvar listing in sccp show line

2013-02-01  ddegroot

	* [r4156] Removed default value sccpregistration for regcontext.
	  When regcontext is not available in sccp.conf the entries are not
	  created. BTW regcontext is only used for dundi lookup purposes

	* [r4155] Reactivate ast_rtp_glue_register. Partially solving
	  bridging issue when using queues. Channel is still not connected
	  correctly.

	* [r4154] Fix debug log messages on channel find

2013-01-31  ddegroot

	* [r4153] Added conference parameters to database samples

2013-01-30  ddegroot

	* [r4152] Fix DND status display after reloading chan-sccp-b

	* [r4151] Debug Log Correction (sccp_actions.c)

2013-01-29  marcelloceschia

	* [r4150] fix

2013-01-29  ddegroot

	* [r4149] Doxygen/Documentation corrections

	* [r4148] Doxygen/Documentation corrections

	* [r4147] Removed configure option --enable-refcount-liveobjects
	  (not in use any more). Added new configure option:
	  --enable-refcount-debug to activate /tmp/sccp_ref /tmp/refs
	  logging for refcount debug purposes, disabled by default (Issue
	  reported by Bob)

2013-01-29  marcelloceschia

	* [r4146] syntax

	* [r4145] syntax

	* [r4144] disable notice log when no preferences list for recalc
	  codec is set, check for enabled codec do preferences codec move

2013-01-28  marcelloceschia

	* [r4143] experimental distributed device state section

2013-01-27  marcelloceschia

	* [r4142] disable callplane when channel was not found

	* [r4141] add configure option

2013-01-26  marcelloceschia

	* [r4140] add res_xmpp.patch

2013-01-25  marcelloceschia

	* [r4139] fixes compile issues with asterisk < 11 do linkid changes

	* [r4138] use linkedId for channel alloc

	* [r4137] use linkedId for inbound, transfered and forwared calls

2013-01-23  marcelloceschia

	* [r4136] do not use ulaw as fallback

2013-01-20  marcelloceschia

	* [r4135] display park position, closes #5

	* [r4134] display park position

2013-01-20  ddegroot

	* [r4133] Added readme file to phone_screenshot

	* [r4132] Check participant returned from
	  sccp_conference_participant_findByPBXChannel before using it

	* [r4131] Set initial value for extension_exists

2013-01-20  marcelloceschia

	* [r4130] this can resolve #5

2013-01-19  ddegroot

	* [r4129] Added screenshot get utility to contrib directory

	* [r4128] Fixed tiny debug log output spelling mistake

	* [r4127] Redefined pbx_channel_ref/pbx_channel_unref for older
	  asterisk version -> Fixing multiple warnings during compilation

	* [r4126] Updated News/ChangeLog files to reflect current status of
	  V4.1

	* [r4125] Update xml.cnf sample file with
	  <callLogBlfEnabled>3</callLogBlfEnabled>

2013-01-18  marcelloceschia

	* [r4122] some test with hint2

2013-01-16  ddegroot

	* [r4118] Removed FIONREAD before read, not being used anymore

2013-01-16  marcelloceschia

	* [r4117] remove bytesAvailable

	* [r4116] fixes logic issue in read function

2013-01-16  ddegroot

	* [r4115] Fixed sccp_refcount, when compiling with atomic functions

2013-01-14  ddegroot

	* [r4112] Added config parsing debug log line to
	  sccp_config_object_setValue

2013-01-13  marcelloceschia

	* [r4111] revert last changes

	* [r4110] fixes double socket cleanup

	* [r4109] use sccp_socket_stop_sessionthread in
	  sccp_socket_device_thread_exit

	* [r4108] remove double release device

2013-01-12  marcelloceschia

	* [r4107] reduce complexity of call parking in asterisk 11

	* [r4106] fix for RedialMenu, other way to handle speeddial button
	  press

	* [r4105] resort output

2013-01-12  ddegroot

	* [r4104] Fix warning when compiling against asterisk-1.8

	* [r4103] pbx_devstate_changed mapping to pbx call

	* [r4102] pbx_devstate_changed mapping to pbx call

	* [r4101] Fix rtp audio during grouppickup for asterisk-trunk (2)

	* [r4100] Fix rtp audio during grouppickup for asterisk-trunk

	* [r4099] Added notifySubscribers shortcut to notifyPBX if
	  devicestate is not changing and we do not need to notify asterisk

2013-01-11  ddegroot

	* [r4098] Added more models to sccp_hint_isCIDavailabe.
	  Added/updated debug logging

	* [r4097] Comment out Remote RINGING + gpickup

2013-01-11  marcelloceschia

	* [r4096] check for CS_SCCP_PICKUP

	* [r4095] check for CS_SCCP_PICKUP

2013-01-11  ddegroot

	* [r4094] Forgot the check the version number for
	  ast_channel_callgroup_set

	* [r4093] Temporary fix gpickup for asterisk-11

2013-01-11  marcelloceschia

	* [r4092] apply ringinuse2busy.diff from pavel

2013-01-10  ddegroot

	* [r4091] Revert to old functionality

	* [r4090] Pass along the linkedid. Fix grouppickup forceHangup.

	* [r4089] Added test message function for setting hint to specific
	  value (testing SCCP/111#11)

	* [r4088] Revised sccp_refcount: replaced CAS32 with
	  ATOMIC_INCR/ATOMIC_DECR. Added debug function which creates
	  output in /tmp/sccp_refs when compiled with --enable-debug

2013-01-10  marcelloceschia

	* [r4087] use (line->channels.size > 1) to detemine shared line
	  hint

2013-01-09  ddegroot

	* [r4086] Fix warning unused variable

	* [r4085] Set the linkedid on a newly allocated channel if we can
	  find it in the channel->owner we are allocating for.

	* [r4084] Update sccp_channel_set_calledparty (Proposal)

	* [r4083] Ran a couple of checks with (asterisks_astobj2)
	  REF_DEBUG, and found the reason why ast_channel_unref during
	  hangup would not work before. Added a remark to sccp_pbx.c to
	  indicate this. Added a workaround for now.

2013-01-08  ddegroot

	* [r4082] Reducing logging for sccp_handle_token_request

	* [r4081] update postgres.sql sccpdeviceconfig view. We need to
	  sort by instance before handing the table over to the aggregate
	  textcat_column

	* [r4080] Reduced default logging for
	  sccp_handle_dialedphonebook_message to sccp_log((DEBUGCAT_HINT |
	  DEBUGCAT_ACTION))

	* [r4079] Reduce double wait time in case a number does not exist
	  using PBX(extension_status(c)) instead of pbx_exists_extension
	  which only match exact matches.

2013-01-07  ddegroot

	* [r4078] Check session null pointer at the start of sccp_read_data

	* [r4077] Fix module unload gracefully (Reported by Derek Ivey.
	  Cause by taking ast_channel_ref, while not releasing it during
	  hangup and being dependent on res_rtp_asterisk making us unload
	  very late.

	* [r4076] Added IP_Communicator to checkCIDAvailable

	* [r4075] Reduce double wait time in case a number does not exist.
	  sccp_log line was checking again.

	* [r4074] Fix compile when using --disable-pickup (Added check for
	  CS_SCCP_PICKUP)

	* [r4073] Fix compile when using --disable-pickup (Added check for
	  CS_SCCP_PICKUP)

	* [r4072] Fix compile warnings when using --disable-pickup

	* [r4071] Fix compile when using --disable-pickup

2013-01-06  ddegroot

	* [r4070] Make sccp_hint2.c compatible to all pbx versions.
	  Suppress warnings.

2013-01-06  marcelloceschia

	* [r4069] sorry pavel, it was my fault

2013-01-06  ddegroot

	* [r4068] Added DEBUGCAT_FILELINEFUNC, when you activate 'sccp
	  debug filelinefunc' all debug lines start with the
	  file/line/function information before the actual debug info.

2013-01-06  marcelloceschia

	* [r4067] make hint2 compatible with ast 1.8

	* [r4066] remove sccp_hint_lineStatusChanged

	* [r4065] switch to hint2

	* [r4064] use strict enum value

	* [r4063] cleanup

2013-01-06  ddegroot

	* [r4062] Update sccp_hint_devstate_cb, to fix extension_state for
	  Ring&InUse and OnHold&InUse. Added correct handling for InUse
	  when starting a new call (Dialing instead of Connected)

	* [r4061] Updated some of the debug lines, to know the origin

	* [r4060] Updated some of the debug lines, to know the origin

2013-01-05  ddegroot

	* [r4059] Extended debugging to include function name and if
	  possible either device->id or line->name

	* [r4058] Revert accidental checkin of Makefile.am/common.h

	* [r4057] Add segmentation to the sccp_hint2.c file / Reorder
	  Functions / Move FeatureEventHandling to Dispatcher Segment /
	  No/little code changes

	* [r4056] Added context output to debug output when pull phonebook
	  information (sccp_handle_dialedphonebook_message)

	* [r4055] Reverted sccp_hint2 from common.h / Makefile.am

	* [r4054] Reverted sccp_hint2 from common.h / Makefile.am

	* [r4053] Indent commented code

	* [r4052] Replicated PBX(getExtensionState) to other ast_impl files

	* [r4051] Ringing & Inuse should return Alerting

	* [r4050] Forgot the two aggregated states

2013-01-05  marcelloceschia

	* [r4049] temp working version

2013-01-05  ddegroot

	* [r4048] Added pbx_log LOG_NOTICES for every extensionstate

	* [r4047] Update getExtensionState

	* [r4046] Update CS_DEVSTATE_CACHEABLE to sccp_hint2.c. Updated
	  Comment in sccp_protocol.h

2013-01-05  marcelloceschia

	* [r4045] add CallListStateUpdate

	* [r4044] add CallListStateUpdate

	* [r4043] fixes spelling

2013-01-05  ddegroot

	* [r4042] Implementation of PBX(getExtensionState)

2013-01-05  marcelloceschia

	* [r4041] update 0x0153 message

	* [r4040] cleanup

	* [r4039] cleanup

2013-01-05  ddegroot

	* [r4038] Temporary update for sccp_hint2.c

2013-01-05  marcelloceschia

	* [r4037] fixes issue with onhook

2013-01-04  ddegroot

	* [r4036] Added CS_EXPERIMENTAL around sccp_hint2.c, and included
	  it into Makefile.am and common.h (for now)

2013-01-04  marcelloceschia

	* [r4035] quck fix to solve issue with hinted speeddial on devices
	  without dynamic speeddial

	* [r4034] fixes issue with --disable-dynamic-speeddial

	* [r4033] logic error fix

	* [r4032] just some tests

2013-01-03  ddegroot

	* [r4031] Fix CDR CallerID Name set instead of Number. Copy/Paste
	  Error (Pavel Troller)

	* [r4030] Moved SCCP_CHANNELSTATE_RINGOUT to return DIALING state.
	  (Thanks Pavel)

	* [r4029] Fix compile issue because of missing '{'

	* [r4028] Trying to fix hints with asterisk-11

	* [r4027] Switched to using sccp_hint_getLinestate to retrieve
	  sccp_wrapper_asterisk_devicestate. Removed old chan_sccp.c:
	  sccp_devicestate implementation

	* [r4026] Add force update rtp_peer todo comment to fixup in
	  astTrunk.c

	* [r4025] Fix fixup for astTrunk.c which causes hangup issues
	  during transfer (Reported by Pavel Troller)

2013-01-02  ddegroot

	* [r4024] Add pbx_channel_varshead. Fix getting at presence in
	  astTrunk.c

	* [r4023] Fix hint to handle presentation/privacy correctly

	* [r4022] Fix privacy presentaion / presence parsing

	* [r4021] Update definition for pbx_devicestate_change to handle
	  CS_CACHEABLE_DEVICESTATE besides CS_DEVICESTATE. Adapt other
	  files to use this new mapping correctly. (Reported by Bob Brown)

	* [r4020] Renamed CS_NEW_DEVICESTATE to CS_DEVICESTATE. Added
	  CS_CACHEABLE_DEVICESTATE (has new cacheable option in
	  asterisk-10-branch and asterisk-11-branche).

	* [r4019] dtu_softkey.action should be freed after use

	* [r4018] Fixed possible null-pointer dereferences. Fixed
	  un-initialized pointers

2013-01-02  marcelloceschia

	* [r4017] check for allowRinginNotification

	* [r4016] nur kleine Änderungen

	* [r4015] change video support to yes/no

	* [r4014] workaround for asterisk 11 log flooding

2013-01-01  ddegroot

	* [r4013] Ident hint debug line for NONE SCCP Hint

	* [r4012] Correct refcount on sccp_pbx_softswitch. Replaced return
	  by goto EXIT_FUNC to make sure that correct release are made.

	* [r4011] Fixed privacy/presentation for sccp_hint.c

2013-01-01  marcelloceschia

	* [r4010] fixes nullpointer for asterisk 11

	* [r4009] fixes video codec issue

2013-01-01  ddegroot

	* [r4008] Fix pbx_channel_name issue in sccp_pbx_sendtext for
	  asterisk-trunk (Reported by Nikola)

	* [r4007] Update ChangeLog

	* [r4006] Documentation/SQL corrections (Reported by Nikola)

	* [r4005] Documentation corrections (Reported by Nikola)

	* [r4004] Reduce hint logging when debug level = core to 'no
	  output'

	* [r4003] Added hint->callInfo.presentation. Renamed
	  hint->callInfo.callingParty to hint->callInfo.callingPartyNumber
	  and int->callInfo.calledParty to int->callInfo.calledPartyNumber

	* [r4002] Revised sccp_devicestate to correct refcount issue during
	  hint state check

	* [r4001] Fixed callinitiator speeddial hint display when calling a
	  singleLine

	* [r4000] Fix hint display on callreceiving speeddial. Still need
	  to check the callinitiating speeddial update.

	* [r3999] channel release in sccp_hint.c

	* [r3998] Added sccp_line_getDNDChannelState to sccp_line.
	  sccp_devicestate now takes DND into account. Cleanup of
	  sccp_hint.c. Updated doxygen comments for sccp_hint

	* [r3997] Added conference options to sccp.conf.annotated

	* [r3996] Added doxygen commandaliases

	* [r3995] Reindented files

	* [r3994] Updated indent definitions. Added type defintioins to
	  .indent.pro for common types that should be nicely aligned in
	  structures

2012-12-31  ddegroot

	* [r3993] Removed non-functional code from sccp_hint.c

	* [r3992] Added force option to notifySubscriber to force update on
	  first registration

	* [r3991] notifySubscribers when subscribing to a a hint

	* [r3990] Fix Possible null pointer dereference / redundant null
	  pointer dereference check

	* [r3989] Null Pointer Deref before starting channel_clean

	* [r3988] Close file before returning

	* [r3987] Null Pointer Deref checks in sendHTML

	* [r3986] Fix 2 fur crossover session (Reported by MC)

	* [r3985] Fix fur crossover session (Reported by MC)

	* [r3984] Demoted some of the pbx_log message to sccp_log during
	  conference creation.

	* [r3983] Use return value from SCCP_LIST_REMOVE in
	  sccp_threadpool_thread_end

	* [r3982] Skipping notifySubscribers if nothing changed. Added V4.1
	  callInfo setting for dynamic speeddial.

	* [r3981] Removed previousState from sccp_hint_lineStatusChanged

2012-12-31  marcelloceschia

	* [r3980] OpenMultiMediaChannelMessage_v17 needs more bytes
	  (Invalid SCCP message! : ID :131: readByte(16) underrun, length =
	  4)

2012-12-31  ddegroot

	* [r3979] Fixed sccp_hint_handleFeatureChangeEvent, it was using
	  the wrong paramater type for sccp_hint_lineStatusChanged

2012-12-30  ddegroot

	* [r3978] Comments removed

	* [r3977] refcount correction when using the pbx hint system

	* [r3976] Make sccp_hint.c compile against asterisk-10 and
	  asterisk-trunk again

	* [r3975] Preliminary Sync pbx_impl in regards to sccp_devicestate

	* [r3974] backport of sccp_hint.c from V4.0

2012-12-24  ddegroot

	* [r3973] Binding device into the channel, which is on hold, before
	  moving it into the conference

2012-12-24  marcelloceschia

	* [r3972] fixes core with asterisk 11/trunk

	* [r3971] fixes issue when s->device->session is null

	* [r3970] fixes asterisk 11/trunk compile issue when using
	  --enable-video

2012-12-23  ddegroot

	* [r3969] Switching sccp_feat_join to experimental mode until fully
	  working and tested

	* [r3968] Fix compile issue when running without
	  --enable-conference

	* [r3967] Only show conf/conflist/join button if enabled in the
	  device configuration

2012-12-23  marcelloceschia

	* [r3966] deactivate conference button

2012-12-23  ddegroot

	* [r3965] Fix conference compilation under asterisk-11
	  (pbx_channel_name)

2012-12-23  marcelloceschia

	* [r3964] deactivate conference button

2012-12-23  ddegroot

	* [r3963] Only show conf/conflist button if enabled in the device
	  configuration

	* [r3962] Remove conf/conflist button, if not enabled using
	  --enable-conference

	* [r3961] conference: added sccp.conf options and cli/ami commands

	* [r3960] Needed a way to check if a string is nummeric -> added
	  sccp_strIsNumeric

2012-12-23  marcelloceschia

	* [r3959] extend maxBitRate from calling channel (port from ast108)

2012-12-23  ddegroot

	* [r3958] Fix/Cleanups for issues found by clang

2012-12-23  marcelloceschia

	* [r3957] extend maxBitRate from calling channel (port from ast108)

	* [r3956] fixes asterisk 1.8 issue with ast_channel_varshead

	* [r3955] extend maxBitRate from calling channel

2012-12-22  marcelloceschia

	* [r3954] fixes issue with clang >= 3.2

2012-12-21  marcelloceschia

	* [r3953] fixes clang depricated cflag -fcatch-undefined-behavior

	* [r3952] fixes clang warning

	* [r3951] fixes clang warning

	* [r3950] fixes clang warning

2012-12-21  ddegroot

	* [r3949] Large Rewrite/Revision of Socket Handling Code (See
	  mailinglist: chan-sccp-b socket handling / network
	  handlingchan-sccp-b socket handling / network handling)

	* [r3948] Fix clang warning about using unsigned size_t for
	  refcount. replace CAS32_TYPE with int instead

	* [r3947] Fix clang warning about indentifier in conference

	* [r3946] Fix compile with CC=clang

2012-12-21  marcelloceschia

	* [r3945] move instance to function argument

	* [r3944] fixes issue with asterisk >= 11

2012-12-20  ddegroot

	* [r3943] Small correction to PBX(setLanguage) for older asterisk
	  versions

	* [r3942] Small correction to PBX(setLanguage) for older asterisk
	  versions

2012-12-20  marcelloceschia

	* [r3941] set language for playback_channel using pbx impl

	* [r3940] set language for playback_channel using pbx impl

	* [r3939] setLanguage impl

	* [r3938] set language for playback_channel in asterisk > 10

2012-12-20  ddegroot

	* [r3937] Explained Refcount Forced Destroy a little better.

	* [r3936] Explained Refcount Forced Destroy a little better.

	* [r3935] Removed bad transfer foreignchannel code. Added a
	  possible solution by issuing a connected line update (like
	  call_forward)

	* [r3934] Check for channel->tech wenn using
	  get_sccp_channel_from_pbx_channel

	* [r3933] Added a little fix to compile against asterisk-1.6.2.x
	  without having DEBUG_THREADS. Issue is cause by the include order
	  in which pbx_impl includes asterisk header files. (Bug Reported
	  by: Leonid & Philippe)

2012-12-19  ddegroot

	* [r3932] Reverted back to previous behaviour for sccp_pbx_answer.
	  I think i was trying to hangup the wrong channel, when the bridge
	  could not be setup.

	* [r3931] Fixed participant->conferenceBridgePeer playback.
	  Activated ConfList Menu Option. Added Refresh to the ConfList
	  Menu. Activated Kick and Mute Buttons.

	* [r3930] Fixes to compile against asterisk-1.6.2 and
	  asterisk-trunk

	* [r3929] Fixed device refcount in conference after using the
	  conflist.

	* [r3928] Fixed device refcount in conference after using the
	  conflist.

	* [r3927] Added copy of the moderators language to
	  conference->playback_channel, so that announcements are played
	  back in the moderators language

	* [r3926] Added copy of the moderators language to
	  conference->playback_channel, so that announcements are played
	  back in the moderators language

	* [r3925] Added copy of the moderators language to
	  conference->playback_channel, so that announcements are played
	  back in the moderators language

	* [r3924] Trying to fix the stream_and_wait issue when playing back
	  to a single channel in a bridge, suspend seems to work, but
	  unsuspend doesn't, needs a little more research i guess. Does not
	  impact functionality for now.

2012-12-18  ddegroot

	* [r3923] Update playback to stream. Stuttering sound issue still
	  there during playback_to_channel.

	* [r3922] Added comment about AST_CONTROL_REDIRECTING to be
	  implemented sometime in pbx_impl, following same principal as
	  update_connectedline

	* [r3921] Update redirecting information by using
	  pbx_channel_call_forward_set in sccp_channel.c. Force
	  update_connected_line during masqueration for forwarded line ->
	  Resulting in redirection information on the caller display

	* [r3920] Function sccp_pbx_update_connectedline not implemented in
	  sccp_pbx.c anymore

	* [r3919] Clarify the channel->parentChannel release sequence.

	* [r3918] Fixed sccp_channel_endcall

	* [r3917] During callforward when brigepeer cannot be found, we
	  should end the call on the parentChannel instead of the current
	  channel

	* [r3916] Fix refcount on callforward. Matchup rtp capabilities
	  during callforward.

2012-12-17  ddegroot

	* [r3915] Speedup conference end by only playing announcements
	  once. Suppress nasty CDR message by forcing the answertime to be
	  set on Playback Bridge Channel

	* [r3914] Cleaned up, Synchronised and Reformatted the Debug/Log
	  Message for conference.

	* [r3913] Fixed the conference refcount issues

	* [r3912] Generalized/Refactored masqueradeHelper and moved to
	  pbx_impl. Renamed alloc_conferenceTempPBXChannel ->
	  allocTempPBXChannel and request_foreign_channel ->
	  requestForeignChannel in pbx_impl. Specialized masqueradeHelper
	  in pbx_impl to be specific for the version used.

	* [r3911] Refined the masquerade helper by moving part of temp
	  channel cloning to pbx_impl

	* [r3910] Integrated both sendUserToDeviceVersion1Message
	  implemetations into one function in sccp_protocol.c by added
	  extra parameters for AppID, lineInstance, callReference and
	  TransactionID

	* [r3909] Reverted sccp_dev_buildpacket back to previous behaviour
	  (mallocing only the exact space needed for an sccp message,
	  instead of SCCP_MAX_PACKET)

	* [r3908] Refactored masqueration part of conference completely.
	  The new version works under asterisk-1.8, asterisk-10 and
	  asterisk-11. asterisk-1.6.2 has not been checked/tested (but does
	  compile and should follow asterisk-1.8)

2012-12-16  marcelloceschia

	* [r3907] remove debug lines

	* [r3906] fixes UserToDeviceDataVersion1Message

2012-12-16  ddegroot

	* [r3905] Moved asterisk version specific function for conference
	  to pbx_impl. Fixed connected_line_update segfault for id.tag for
	  asterisk-trunk in astTrunk.c

	* [r3904] Fix error when using sccp tokenAck on device without a
	  session

2012-12-15  ddegroot

	* [r3903] Make conference compile against asterisk-10.6.*

	* [r3902] Make conference compile against asterisk-10

	* [r3901] Reduce log level when handling empty d->softkeyDefinition

	* [r3900] Switching to std=gnu99 (with support for gnu89 inlining)

	* [r3899] Added optional parameters to the llvm-scan-build script

	* [r3898] Check part->channel to make sure we are dealing with an
	  sccp phone when creating the conflist

	* [r3897] Reduce debug log level on device create

	* [r3896] Removed some of the dump_packet debug where not necessary
	  anymore

	* [r3895] Change debug log level for realtime when creating new
	  line (1)

	* [r3894] Change debug log level for realtime when creating new
	  line

	* [r3893] Fixed sccp_features.c compile error when using asterisk
	  11.1

	* [r3892] Added handling for conflist actions (Experimental).

	* [r3891] Fixed missing newline in sccp_refcount.h

	* [r3890] Moved part of the conference cleanup to
	  __sccp_conference_destroy

	* [r3889] Added comment to special asterisk-trunk addition
	  'alloc_playback_chan'

	* [r3888] Make new conference implementation compile against
	  asterisk-11.1 as well

	* [r3887] Made conference compatible to asterisk 1.6.2 again. Added
	  corrected releases when returning error during addParticipant

	* [r3886] Updated alloc_conferenceTempPBXChannel, added definitions
	  to define. Replaced function calls in conference to use pbx_impl
	  instead

2012-12-14  ddegroot

	* [r3885] Added ConfList to conference implementation

	* [r3884] Temporary Revert sccp_build_packet to old behaviour to
	  fix UserToDeviceDataVersion1Message.

	* [r3883] Added entering/leaving announcements to conference

	* [r3882] Added entering/leaving announcements to conference

	* [r3881] Retain conference in d->conference and release nicely
	  upon pbx_hangup. Issue error message for now when a conference is
	  started twice on one device.

	* [r3880] Fixed zombie/hangup issue when using conference. Channels
	  should not be left over after finishing the conference anymore.

2012-12-09  ddegroot

	* [r3879] Allow empty number with AMI SCCPStartCall (jacob)

	* [r3878] Add swap channels option (yes/no) when resuming to the
	  AMI function SCCPHoldCall (jacob)

2012-12-08  ddegroot

	* [r3877] Prevent null pointer dereference in
	  __sccp_conference_addParticipant because retain could return null

	* [r3876] Prevent null pointer dereference in
	  check_session_message_device when r==NULL

	* [r3875] Prevent null pointer dereference in sccp_config.c during
	  GLOB(lines) traversal, when line refcount would be 0 during
	  release

	* [r3874] Prevent null pointer dereference in sccp_conference10.c

	* [r3873] Prevent dereferencing null-pointer, during event
	  retension failure

	* [r3872] Removed uninitialized value from refcount debug log

	* [r3871] Replaced custom SCCP::? linkedid for asterisk 1.8 and up
	  by the asterisk generated one

	* [r3870] Prevent possible null pointer dereference when
	  sccp_device_retain returns NULL in sccp_channel_set_active

2012-12-05  ddegroot

	* [r3869] Ugly solution to sccp reload problem when sccp.conf has
	  not changed. config_load mixes ast_config struct with errors on
	  its return, should have been byref, bu that is not the case. On
	  FILEUNCHANGED we need to load the config files anyway but keep
	  returning FILE_NOT_CHANGED, so that for other function GLOB(cfg)
	  will atleast have valid data.

	* [r3868] Fix missing type entries for devices and lines

2012-12-02  ddegroot

	* [r3867] Reverted sccp_socket_stop_sessionthread to using
	  pthread_join for now

2012-12-02  marcelloceschia

	* [r3866] add FOREIGN KEY check for mysql5

2012-12-02  ddegroot

	* [r3865] Updated sccp_socket_stop_sessionthread, to include
	  pthread_join after pthread_cancel (solves sporadic issue in
	  ioctl. Also added comment about using shutdown(s->fds[0].fd,
	  SHUTDOWN_RDWR) instead of pthread_cancel.

2012-12-01  ddegroot

	* [r3864] Revised sccp_socket_stop_sessionthread

2012-11-27  ddegroot

	* [r3859] Added automatic x = NULL after sccp_free(x) in define.h.

	* [r3856] Added manager events to conference

	* [r3855] Trying to get rid of the unused moderator channel which
	  was put on hold.

2012-11-26  ddegroot

	* [r3853] Corrected module registration string

	* [r3852] Added fileexists / file.h to pbx_impl

	* [r3851] Started implementation of sccp_conference_playback_helper

	* [r3850] Fix conference refcount issue. Removed num_participants.
	  Added conferece->finishing, conference->locked. Fix Module unload
	  after creating a conference

2012-11-25  ddegroot

	* [r3849] Cleaned up conference/sccp_conference10.c for further
	  development. Multiple conference moderators are now possible.
	  This is necessary to hand over a conference to another
	  participant (this functionality has to be added later), it also
	  simplifies the other functions, because all participants are
	  dealt with in the same manner.

	* [r3848] Patched conference/sccp_conference10.c so that confernce
	  works, and does not segfault on hangup. Moderator refcount is not
	  released correctly yet and async_goto after conference end has
	  been disabled. Module unload does not work after conference has
	  been used. More work is necessary. Simple conferences do work.
	  Visual feedback about confererence status has not been
	  implemented yet.

	* [r3847] Default registration state of a device is none instead of
	  failed

	* [r3846] Fixed second incoming call. Indication for callwaiting
	  was being sent to the wrong channel.

2012-11-24  ddegroot

	* [r3845] Fix grouppickup softkey to cancel dial scheduler

	* [r3844] Fix grouppickup softkey retain instead of release. Added
	  cancellation of scheduler.digittimeout (ticket #166). Removed
	  indicate RINGING from grouppickup.

	* [r3842] Fix grouppickup to only pickup RINGING channels

	* [r3840] Correct comment / debug statement about channel_locking
	  during findChannelWithCallback (ast106)

2012-11-24  marcelloceschia

	* [r3838] set allowRinginNotification default to no

2012-11-23  marcelloceschia

	* [r3837] AST_STATE_UP with full checks in
	  sccp_handle_OpenMultiMediaReceiveAck

2012-11-21  marcelloceschia

	* [r3836] does this fix Crossover sessions?

2012-11-18  marcelloceschia

	* [r3834] removed sccp_device_release(d), because it was not
	  retained in this function

2012-11-17  ddegroot

	* [r3831] Fixed hint->callInfo.calltype setting for hinthandling
	  (protocolversion <15)

	* [r3830] Update attachLine/detachLine event handling for hints

2012-11-15  marcelloceschia

	* [r3827] fix hint when allowRinginNotification=no

2012-11-14  ddegroot

	* [r3826] Renamed #if CS_EXPERIMENTAL_ to #if 1 for now

2012-11-14  marcelloceschia

	* [r3825] fix

	* [r3824] reduce the #ifndef CS_EXPERIMENTAL_ block

2012-11-14  ddegroot

	* [r3823] Skip updating hint information if hint->previousState and
	  hint->currentState are the same

	* [r3822] Remove error status from preferredCodec debug line

2012-11-13  marcelloceschia

	* [r3820] do not use AST_EVENT_DEVICE_STATE for hint subscribtion.
	  Using AST_EVENT_DEVICE_STATE let us miss the cid info

2012-11-11  ddegroot

	* [r3819] Cleaned up comment in sccp_hint.c

2012-11-11  marcelloceschia

	* [r3818] subscribe SCCP_EVENT_DEVICE_ATTACHED

2012-11-11  ddegroot

	* [r3817] Added debuglogging to trace why hint processing does not
	  work correctly in asterisk 11. Apparently we have to change
	  sccp_hint to use ast_extension_state_add /
	  ast_extension_state_del and ast_state_cb_info instead. We should
	  move hint event handling to pbx_impl for be able to create a
	  generic wrapper

2012-11-10  ddegroot

	* [r3816] Prevent endless loop during threadpool_destroy while
	  waiting for threads to end

	* [r3815] (Fix Ast11) Replaced remote call to PBX(get_pbx_module)
	  to retrieve static ast_module_info->self by implementing
	  pbx_manager_register inside astTrunk.c instead

	* [r3814] (Ast11) Replaced remote call to PBX(get_pbx_module) to
	  retrieve static ast_module_info->self by implementing
	  pbx_manager_register inside astTrunk.c instead

	* [r3813] Reenable pbx_manager_register/pbx_manager_unregister
	  calls for asterisk 11

	* [r3812] Removed non-existent static function definitions from
	  sccp_threadpool.h

	* [r3811] Fixed manager_register functions by including a PBX
	  callback function to retrieve the ast_module_info->self pointer
	  which is only available astTrunk.c.

2012-11-09  ddegroot

	* [r3810] Update num_cpu retrieval in extra.m4

	* [r3809] Fix debug message. Fix last_resize update after first
	  threadpool decrease to prevent multiple decreases in one loop

2012-11-09  marcelloceschia

	* [r3808] fixes asterisk > 10 codec issue

	* [r3807] fixes asterisk > 10 codec issue

2012-11-09  ddegroot

	* [r3806] Replaced threadpool thread_array with double linked list.
	  Added timedwait condition for thread_exit, to wait for threadpool
	  winddown during threadpool shutdown. If threads do not stop in a
	  timely fashion we kill the threadpool threads without waiting any
	  further.

	* [r3805] Fix sccp_threadpool when reducing number of threads by
	  skipping self

2012-11-09  marcelloceschia

	* [r3804] device option to prevent ringin notification for hints

2012-11-09  ddegroot

	* [r3803] Refine debuglogging for sccp_threadpool

	* [r3802] Major revision of sccp_threadpool. Using
	  pthread_conditional signaling instead of semaphores, using
	  sccp_dllist instead of locally implemented queue, not resizing
	  pthread_array but using fixed sized array. Continue work without
	  waiting for signal if more work is available.

2012-11-08  ddegroot

	* [r3801] Switched of threadpool resizing for now (While finding
	  the solution for new thread creation)

	* [r3800] Added jobqueue debuglog entries

2012-11-07  ddegroot

	* [r3799] Fix hangup issue when using asterisk 11

	* [r3798] Add remarks before creating backtrace

	* [r3797] Fix channel allocate for asterisk 11 and up

2012-11-05  ddegroot

	* [r3796] Fixed 1 second delay on pickup (Fixed by Marcello /
	  Reported by Robert)

2012-11-03  ddegroot

	* [r3795] Reindented code according to newly defined rules

	* [r3794] Fix retain/release of hotline during module unload/load

2012-11-02  ddegroot

	* [r3793] Updated .indent.pro to also indent case statement within
	  switch block. Reindented sources

	* [r3792] Update Sources from original repository

2012-10-31  ddegroot

	* [r3791] Removed temporary sccp_channel_get_active_nolock,
	  sccp_channel_get_active_lock function, because they could lead to
	  confusion and memory leaks in the refcount system

	* [r3790] Found cause for channel refcount-release issue, whereby
	  channels were never fully release upon hangup (->memory leak)

2012-10-29  ddegroot

	* [r3789] Update comment on threadpool / jobqueue handling

	* [r3788] While trying to find why DND Feature was not working
	  correctly i found an issue in threadpool JobQueue Add function.
	  All event handling was being denied because on first use of the
	  threadpool there was no tp_p->jobqueue->head and this caused a
	  return. Issue has been fixed

2012-10-24  ddegroot

	* [r3787] Reverted sccp_actions.c XMLAlarmMessage Handler, Sorted
	  Device by MacAddress

	* [r3786] Add devices/lines to Globals in a sorted fashion, makes
	  sccp show devices / lines look a lot cleaner.

	* [r3785] Update annotated sccp.conf sample regarding incominglimit
	  (Bug: 3578314 / Alex Miby)

2012-10-14  ddegroot

	* [r3784] Fix letohl in handle_tokenrequest (Philipp Teissier)

2012-10-10  ddegroot

	* [r3783] Checking threadpool, before adding a new job

2012-10-08  ddegroot

	* [r3781] Update realtime documentation (Fabian Foerster)

	* [r3780] Add both methods for conference line selection. Including
	  a check if it is the active_line or has a status on hold

	* [r3779] Update mysql/pgsql section in 04_Setup_Guide.doc
	  (Reported by Fabian Foerster)

2012-10-07  ddegroot

	* [r3778] Starting conference on all connected channels for this
	  line (we need to add extra rules in case of shared line,
	  otherwise we might be stealing channels)

	* [r3777] Updates to conference/sccp_conference10.c

	* [r3776] Merge sccp_conference10.c

	* [r3775] Updates for sccp_conference10.c

2012-10-07  marcelloceschia

	* [r3774] add #if SCCP_CONFERENCE_USE_IMPART == 0 for join_thread

	* [r3773]

2012-10-07  ddegroot

	* [r3772] Revert change in sccp_lock.h

	* [r3771] Fixed rwlock/include issue on bigendian/sparc64/asterisk
	  issue (Reported by Philippe Teissier)

2012-10-07  marcelloceschia

	* [r3769]

	* [r3768]

	* [r3767] asterisk 10 conference

2012-10-06  marcelloceschia

	* [r3765] use SKINNY_CODEC_NONE

	* [r3764] use SKINNY_CODEC_NONE

	* [r3763] go on with conference on ast 10

	* [r3762] cleanup

	* [r3761] use requested codec for inbound calls

	* [r3760] use requested codec for inbound calls

2012-10-02  ddegroot

	* [r3759] Make sccp_conference10.c compile correctly when sources
	  are being build in a seperate folder

	* [r3758] Fix temporary double release of GLOB(hotline)->line

	* [r3757] Removed unneccessary retain/release in sccp_line_clean

	* [r3756] Move closing descriptor back up to beginning of preUnload

	* [r3755] Re-ran bootstrap.sh

	* [r3754] Updated ChangeLog

	* [r3753] Moved sizeof(long long) check from chan-sccp.h to
	  autoconf/extra.m4

	* [r3752] Fix refcount warnings during module unload

2012-10-01  ddegroot

	* [r3751] pthread_join socket session, before sending pthread_kill
	  and don't use s->session_thread = AST_PTHREADT_NULL anymore.

	* [r3750] Added missing device release in sccp_handle_SPCPTokenReq
	  on Cross Device Token Request

	* [r3749] Fix forward on invalid number by checking
	  sccp_channel_forward before changing phone state

	* [r3748] Fix answerkey crash

	* [r3747] Remove extraneous logging during backtrace creation

2012-09-29  marcelloceschia

	* [r3746] start conference implementation for asterisk 10

2012-09-29  ddegroot

	* [r3745] Added null/zerolength check for strcasecmp in sccp_hint.c

2012-09-29  marcelloceschia

	* [r3744] start with conference for asterisk 10

2012-09-29  ddegroot

	* [r3743] Fix refcount for sccp_remote_answer having possible UNREF
	  as device

	* [r3742] Extend width of sccp show lines

2012-09-16  marcelloceschia

	* [r3741] fixes compile warning

2012-09-15  ddegroot

	* [r3740] Show line Label when device only has one line assigned to
	  it

	* [r3739] Reduce sccp.conf parse logging on device registration
	  (with debug=core)

2012-09-13  marcelloceschia

	* [r3738] fixes refcount issue within sccp_pbx_hangup

	* [r3737] fixes refcount issue within sccp_pbx_hangup

2012-08-28  marcelloceschia

	* [r3735] fixes #include <byteswap.h> issue

	* [r3734] fixes #include <byteswap.h> issue

2012-08-24  marcelloceschia

	* [r3733] fixes #include <byteswap.h> issue

2012-08-12  marcelloceschia

	* [r3732] fixes some issues with refcount

	* [r3731] add Diederiks hashtable version

2012-08-05  marcelloceschia

	* [r3729] resize buffer and use snprintf

2012-07-31  ddegroot

	* [r3728] Added smaller locking to refcounted objects when atomic
	  functions are not available

	* [r3725] Fix segv_init issue during sccp_postPBX_load

2012-07-30  ddegroot

	* [r3724] Added automatic installation of chan-sccp-b_backtrace
	  script

	* [r3723] Added automatic installation of chan-sccp-b_backtrace
	  script

	* [r3722] Add error message to tools/gen_backtrace when gdb is not
	  installed

	* [r3721] Printout location of the backtrace file after generation

	* [r3720] Printout location of the backtrace file after generation

	* [r3719] Remove segvfault test case from sccp reload

	* [r3718] Added automatic backtrace generation to chan_sccp.c, uses
	  tools/gen_backtrace script(need to be installed in execution PATH
	  location) and gdb to generate a complete backtrace when we
	  experience a segfault withing chan-sccp-b.

	* [r3717] Fixed line return in debug message

2012-07-29  ddegroot

	* [r3716] Correct the way sccp_lines are destroyed, to prevent
	  double sccp_release on removal from globals list

	* [r3715] Corrected debugcat

	* [r3714] Debugcat finally working the way i want it to.

	* [r3713] Rectified refcount identifier for linedevices

	* [r3712] Fixed double line retain without correctly releasing
	  before retaking in sccp_handle_keypad_button

	* [r3711] Fixed device refcount release in sccp_mwi_check when on
	  active call

	* [r3710] Fixed linereturn in debug message

2012-07-27  ddegroot

	* [r3709] Printout HASH value during refcount object alloc

	* [r3708] Increased deadobject time to 2000 ms. Revised
	  obj->dead(boolean) to obj->alive(magic number)

	* [r3707] Logical cleanup of sccp_hint_updateLineStateForSingleLine

	* [r3706] Added obj->dead to refcount system, checked while
	  returning pointer.

	* [r3705] Added hash pointer verification before returning
	  refcounted object

2012-07-23  marcelloceschia

	* [r3704] sccp_addons_clear clear head

	* [r3703] fixes leak in sccp_addons_clear

2012-07-22  ddegroot

	* [r3700] Addding chan-sccp-b_pdf.sty to EXTRA_DIST

2012-07-20  ddegroot

	* [r3698] Fix sccp_refcount CAS32 while loop

	* [r3697] Cleaned up sccp_refcount.c by using generalized CAS
	  macro's (defined in sccp_lock.h)

2012-07-19  ddegroot

	* [r3696] Fixed retaining with invalid line in sccp_config.c.
	  Cleanup after marcello's hint fix.

2012-07-19  marcelloceschia

	* [r3695] use AST_EVENT_DEVICE_STATE, to solve the hint issue for
	  the moment

	* [r3694] fixes mwi issue

2012-07-18  ddegroot

	* [r3693] Removed configure.ac --enable-experimental-refcount
	  because it has become the basis for V4.1. To extend the debugging
	  for refcount there is a new option --enable-refcount-liveobjects,
	  which can be used by developers to trace back faults in
	  retain/release sequences, it should not be necessary to use this
	  option in normal use (keeping a list of liveobjects does cost
	  more memory and processing power).

2012-07-17  ddegroot

	* [r3692] Fixed spurious ´\m' in ast108.c

	* [r3691] Flush configure changes

	* [r3690] Fix PACKAGE_ redefined error. Shorten asterisk header
	  file detection section.

	* [r3689] Reverted removal of PACKAGE_??? redefined 'fix'

	* [r3688] Refactored sccp_refcount so that we do not include a
	  pointer to the datatype and destructor in every stored object,
	  but only once. Resulting in smaller memory footprint of the
	  refcount system

	* [r3687] Fixed --enable-debug to negate <optimized out> when using
	  gdb (removed the leading -O2 before the -O0 entry). Also added
	  -ggdb3 and -g3 to extend the amount of symbol information
	  generated for use by gdb.

	* [r3686] Added gnu generic version to count available cpu's on
	  system.

	* [r3685] Cleanup of configure.ac

2012-07-16  ddegroot

	* [r3684] Fix gen_sccpconf to generate correct sccp.conf / sccp.xml
	  / sccp.sql on demand

	* [r3683] Suppress error (poll returned 4) when shutting down
	  module

	* [r3682] Update AST_MODULE_INFO

	* [r3681] Using external tools/versioncheck to calculate repository
	  version instead of acincluce.m4 system

	* [r3680] Corrected configure repository revision number check

	* [r3679] Synced ast106.c, astTrunk.c and ast110.c with ast108.c
	  for module unload

	* [r3678] Corrected subscribtion to subscription

	* [r3677] Reordered module loading / unloading, to prevent memory
	  leaks

	* [r3676] Update comment

	* [r3675] Using retain/release of device during sccp_hint_subscribe
	  and sccp_hint_unsubscribe

	* [r3674] Revised sccp_event_module_stop / sccp_event_unsubscribe

	* [r3673] Revised sccp_event_module_stop / sccp_event_unsubscribe

	* [r3672] Removed objcopy from make install temporarily (negative
	  side effects on second compilation)

	* [r3671] Replaced messagesCbMap Array Lookup by an array indexed
	  by messageId, saving countless array lookups per call.

	* [r3670] Replaced isPrintableChar by isprint (from ctype.h)

2012-07-15  ddegroot

	* [r3669] Use autoconf ability to compile in a builddir. #include
	  "config.h" has been replaced by #include <config.h> so that it
	  will be searched. Added -I. to CFLAGS, to search for <config.h>.
	  Adapted autocon/acinclude.m4 CS_CHECK_VERSION to search in ac_dir
	  instead of builddir for svn/git/hg revision

	* [r3668] If /usr/lib/debug exists we add our debug symbols there,
	  before stripping

	* [r3667] Added debian chan-sccp-b-dbg package, to contain debug
	  symbols

	* [r3666] Prevent null pointer dereference, in converyor

	* [r3665] Prevent null pointer dereference

	* [r3664] reinstated sccp_event_unsubscribe. Fixed major bug in
	  subscribtions[i].sync traversal during event_fire handling, only
	  the first event callback would be fired. i needed to substituted
	  for n (maybe using these kinds of counter variables can be
	  counter productive at times).

	* [r3663] Removed list locks during line_kill and line_clean, keep
	  giving error and cannot find the reason why, then again they are
	  not very important when using safe list traversal at this stage.

2012-07-14  ddegroot

	* [r3662] Simplify sccp_config_parse_variables (including skip for
	  templated config entries)

	* [r3661] Revert sccp_event_unsubscribe, using free on an array
	  might not be so smart

	* [r3660] Update define.h

	* [r3659] Making progress with asterisk-trunk. Trying to create
	  correct ast_channel alloc

	* [r3658] Add pbx_channel_blocker and pbx_channel_blockproc to be
	  able to compile against asterisk-trunk again

	* [r3657] Reducing pbx_log to sccp_log when socket connection
	  closed

	* [r3656] Move d->variable / l->variable destory to device / line
	  destuctors

	* [r3655] Fixed memoryleak in sccp_utils.c by replacing methode in
	  sccp_config_parse_variables and removing sccp_create_variable
	  function

	* [r3654] Fix memory leak in sccp_event.h because of missing
	  sccp_event_unsubscribe (alloc in sccp_event_subscribe)

	* [r3653] Fix memory leak during device unregister in sccp_hint.c

	* [r3652] Cleanup d->variables / l->variables during cleanup

	* [r3651] Fixed list/refcount mutex_destroy issue when asterisk has
	  been compiled with DEBUG_THREADS, by using
	  ast_mutex_init_notracking for sccp_dllists.h

2012-07-13  ddegroot

	* [r3650] Update RTP/UDP Logging showing correct ip-address / port
	  information (clean up after several trials)

	* [r3649] Changed session addDevice / removeDevice, inversion of
	  release and session=NULL

	* [r3648] Update RTP/UDP Logging showing correct ip-address / port
	  information (found issue with pbx_inet_ntoa). Suppress memory
	  usage notification of thread

2012-07-13  marcelloceschia

	* [r3647] remove warning

2012-07-13  ddegroot

	* [r3646] Update RTP/UDP Logging showing correct ip-address / port
	  information (found issue with pbx_inet_ntoa)

	* [r3645] Update sccp_channel test logging with another example4

	* [r3644] Update sccp_channel test logging with another example3

2012-07-13  marcelloceschia

	* [r3643] need isntall

2012-07-13  ddegroot

	* [r3642] Update sccp_channel test logging with another example

	* [r3641] Update sccp_channel test logging with another example

	* [r3640] Updated RTP/UDP ip-addtess Logging for
	  sccp_channel_startmediatransmission,
	  sccp_handle_open_receive_channel_ack and sccp_rtp_set_phone.

	* [r3639] Implemented PBX(getPeer) functions. Updated logging in
	  PBX(set_peer) function

	* [r3638] Added ast_channel->blocked but no blocker during
	  requestHangup (wait for blocker to be present before commencing
	  softhangup)

2012-07-12  ddegroot

	* [r3636] Fix release system for V4.1. Update svnignore

	* [r3635] Fix gen_sccpconf to compile against changed V4.1
	  src/sccp_config_entries.h

	* [r3634] Fix make release procedures for V4.0 and trunk

2012-07-11  ddegroot

	* [r3633] Possible solution for current audio issues

	* [r3632] Possible solution to multihomes audio issue

	* [r3631] Fix warning during compile against asterisk-trunk

2012-07-10  ddegroot

	* [r3630] fix sccp_pbx.c compilation against asterisk-trunk by
	  using indirect pbx_impl channel functions

	* [r3629] Fix git version check -> bootstrap

	* [r3628] Updated git versioncheck to not include line-returns.
	  Update ChangeLog

	* [r3627] Fix git version check -> bootstrap

	* [r3626] Fix git version check

	* [r3625] Fixed version check for newer svn version that do not
	  have a .svn in every subdir anymore

	* [r3624] Revised svn/git/hg revision acinclude.m4

	* [r3623] Replaced CS_AST_HAS_TECH_PVT with
	  CS_AST_CHANNEL_PVT_CMP_TYPE and removed warning when pbx_channel
	  type != SCCP

	* [r3622] Fixed coredump caused by faulty
	  sccp_wrapper_asterisk_allocPBXChannel

	* [r3621] Reverted changes in sccp_pbx_channel_allocate because of
	  issues when used by asterisk 1.8 (resolving). Updated
	  sccp_pbx_call to be called using sccp_channel_t, moved the
	  ast_channel side of things to pbx_impl

2012-07-09  ddegroot

	* [r3620] Silence CPU_COUNT warning

	* [r3619] Silence pedantic gcc

2012-07-09  marcelloceschia

	* [r3618] Merge failure

	* [r3617] Made all the changes necessary to astTrunk.c to be able
	  to compile against asterisk-trunk again

	* [r3616] Added set_call_forward to ast108.c

2012-07-09  ddegroot

	* [r3615] Fix bad substitution error (2)

	* [r3614] Fix bad substitution error

2012-07-08  marcelloceschia

	* [r3612] merge

	* [r3611] remove localbuild

	* [r3610] Fixed pbx_string_field_set

	* [r3608] Update -with-asterisk find method. Added default include
	  file for AC_CHECK_HEADER calls

	* [r3607] Check if setChannelLinkedId is not NULL

	* [r3606] Changes for asterisk-trunk. Moved most ast_channel
	  get/set functions to pbx_impl.

2012-07-07  ddegroot

	* [r3605] Fixed missing ' in asterisk.m4

	* [r3604] Started working on compilation against asterisk-trunk.
	  Not finished.

2012-07-07  marcelloceschia

	* [r3603] trunk check

	* [r3602] trunk check

	* [r3601] I need isntall ;)

2012-07-06  ddegroot

	* [r3600] First introduction of 'with_ref' operator

	* [r3599] Fixed skinny_codecs2pbx_codec_pref compile warnings when
	  using asterisk 1.10. Fixed ast_channel_ref / ast_channel_unref
	  warnings during compilation against asterisk 1.10

	* [r3598] Corrected hint notification during
	  registering/unregistering devices

2012-07-04  ddegroot

	* [r3597] Added FORTIFY_SOURCE and stack-protector to compile
	  options to find bufferoverflows and stack-smashing

	* [r3596] Cleanup of sccp_dev_forward_status

	* [r3595] Moved configurationStatistic.numberOfLines++ to
	  sccp_line_addDevice

	* [r3594] Added check in sccp_line_addDevice

	* [r3593] Renamed sccp_utils_getDeviceConfiguration to
	  sccp_linedevice_find. Extended logging in sccp_linedevice_find to
	  ease tracing

	* [r3592] data needs to be the last entry in the refcount_object
	  struct to make the encapsulation by the refcount_objects as small
	  as possible

	* [r3591] Fix autoanswer issue (retain / release of linedevice and
	  device in sccp_pbx_call_autoanswer_thread was wrong

2012-07-02  ddegroot

	* [r3590] Tracing down autoanswer bug when dialed from
	  dialplan_app. Small fixes / cleanups and updates

2012-07-01  ddegroot

	* [r3589] Prevent warning about unintialized variable during
	  compilation of sccp_threadpool.c

	* [r3588] Prevent crash when linedevice->device = NULL during
	  sccp_pbx_hangup

	* [r3587] Reinstated event handled hint, except if
	  AST_DEVICE_UNKNOWN

	* [r3586] Replaced hint pbx_event_new by pbx_devstate_changed
	  function, which uses the event system in the background but also
	  forces the update correctly using the ast_cond_signal. This
	  expedites the hint update a lot quicker, and solves the issue
	  where hints are not always processed on first sccp device
	  registration. Extended a number of hint logging lines to explain
	  what is happening more precisely.

2012-06-30  ddegroot

	* [r3585] Updated button samples in documentation

	* [r3582] Fix button samples in documentation and sample config
	  files

	* [r3581] Revert refcountval back so that compilation on openwrt
	  works

	* [r3580] Use strncpy instead of sccp_copy_string to set char array
	  to default value.

	* [r3579] Allow for large refcountval on system that implement
	  CAS64

	* [r3578] Use strncpy instead of sccp_copy_string to set char array
	  to default value.

	* [r3577] Fix refcount_isRunning check

	* [r3576] Make compile on openwrt using new check_atomic.m4 rules

	* [r3575] Fix request for speeddials during registration in
	  sccp_handle_line_number

2012-06-29  ddegroot

	* [r3574] Reindented sccp_threadpool comments

	* [r3573] Revised semaphore issue by mapping sem_init /
	  sem_desttroy to equivalent mac osx commands

	* [r3572] Revised semaphore issue by mapping sem_init /
	  sem_desttroy to equivalent mac osx commands

	* [r3571] Add removal the named semaphore after module unload for
	  Darwin / MacOSX.

	* [r3570] Added MacOSX specific fix. MacOSX does not seem to
	  support unnamed semaphore, therefor added named-semaphore for
	  this platform. (Jucky thing is that all the functions for unnamed
	  semaphores are implemented but just return -1 when called....
	  NICE).

	* [r3569] Added error information when sem_wait fails in
	  sccp_threadpool_do

	* [r3568] Fix module unload chan_sccp by not using pthread_cancel
	  in sccp_socket.c, just waiting until session_stop does it's work.

	* [r3567] retain refcounted objects before calling sccp_event_fire
	  so that the object is retained over the live time of the event.
	  Out of order execution could release the object before the event
	  has been fired, this needs to be prevented.

	* [r3566] Use sccp_socket_stop_sessionthread from withing
	  sccp_socket.c

	* [r3565] Add checks against null-pointer dereference. Skip
	  processing hint subscriptions when module is unloading.

	* [r3564] Malloc moo_t by message pkt_len instead of maximum moo_t
	  size

	* [r3563] Use sccp_socket_stop_sessionthread to replace
	  pthread_cancel

	* [r3562] Externalized sccp_socket_stop_sessionthread so that
	  chan_sccp.c preUnload can use it to tear down the socket session
	  correctly

	* [r3561] Externalized sccp_socket_stop_sessionthread so that
	  chan_sccp.c preUnload can use it to tear down the socket session
	  correctly

	* [r3560] Replaced exit(0) in sccp_threadpool_do by a return during
	  sem_wait

	* [r3559] Added sccp_refcount_isRunning function, so that
	  sccp_event can check before trying to malloc new refcounted
	  object

	* [r3558] Fix cleanup loop on refcount teardown

	* [r3557] Check if memory returned from REQ() is malloced
	  correctly, before using r.

	* [r3556] Fix sem_wait looking at previously free-ed memory during
	  threadpool_destroy

2012-06-28  marcelloceschia

	* [r3552] change the way we handle speeddials

	* [r3551] change the way we handle speeddials

	* [r3550] change the way we handle speeddials

	* [r3549] change the way we handle speeddials

	* [r3548] do not alloc a new speeddial, just use the given
	  structure

	* [r3547] add valid flag to speeddial

	* [r3546] add valid flag to speeddial

	* [r3545] make dial const

	* [r3544] make digit const

2012-06-27  ddegroot

	* [r3543] Fix possible double free in sccp_dev_send

	* [r3542] Fix loading/unloading module after changes for skipping
	  sccp reload when sccp.conf has not changed

	* [r3541] Only perform 'sccp reload' if sccp.conf has changed

	* [r3540] Suppress 'Value stored to ??? is never read' when using
	  contrib/llvm-scan-build

	* [r3539] Reduce chance of memory leak during creation of detached
	  threads

2012-06-27  marcelloceschia

	* [r3538] fixes mem leak

2012-06-26  ddegroot

	* [r3537] Fix configure (line8133 unexpected fi)

	* [r3536] Corrected AO_compare_and_swap compilation issue.

	* [r3535] Fixed configure issue for check_atomic

	* [r3534] Added boemc implementation of compare and swap for
	  messageStack. In the boemc implementation only a boolean version
	  of CAS is available.

	* [r3533] Added general SCCP_ATOMIC definition.

	* [r3532] Added messageStackLock to use when buildin atomic
	  functions are not available.

	* [r3531] fix sccp_device when using AO_compare_and_swap casting
	  from int back to char pointer, using uintptr_t type instead of
	  size_t.

	* [r3530] fix sccp_device when using AO_compare_and_swap casting
	  from int back to char pointer.

	* [r3529] Partial fix sccp_device when using AO_compare_and_swap.

	* [r3528] Added atomic operations fallback to libatomic_ops package
	  available on most platforms. When compiling with a compiler / cpu
	  that does not support atomic functions (for example GCC < 4.1).
	  libatomic_ops can be found here:
	  http://www.hpl.hp.com/research/linux/atomic_ops

2012-06-25  ddegroot

	* [r3527] Prevent dereferencing null pointer in
	  sccp_dev_cleardisplay

	* [r3526] Prevent dereferencing null pointer during transfer when
	  sccp_source_local_channel is not set.

	* [r3525] Prevent dereferencing null pointer after calling
	  REQ->(sccp_build_packet).

	* [r3524] Prevent dereferencing null pointer during transfer when
	  sccp_source_local_channel is not set.

	* [r3523] Make manager_event parameters conditional, to prevent
	  null pointer dereference

	* [r3522] Check for null before dereferencing

	* [r3521] Check result of malloc / calloc before use.

	* [r3520] Prevent dereferencing null pointer in sccp_softkeys.c

	* [r3519] Prevent dereferencing null pointer in sccp_utils.c

	* [r3518] Prevent dereferencing null pointer during
	  sccp_mwi_deviceAttachedEvent

	* [r3517] Prevent dereferencing null pointer

	* [r3516] Prevent dereferencing null pointer

	* [r3515] Prevent memory leak in sccp_channel_forward

	* [r3514] Prevent memory leak in addMessageToStack (sccp_device.c)

	* [r3513] Prevent memory leaks in sccp_config.c

	* [r3512] Release memory after failed init / malloc in
	  sccp_threadpool.c. Check tp_p before use in sccp_threadpool.c

2012-06-25  marcelloceschia

	* [r3511] move sccp_free(dual) for errors

2012-06-25  ddegroot

	* [r3510] Free ds after usage in sccp_utils.c:explode function

	* [r3509] Free dual after usage. Prevent memory leak during
	  transfer

2012-06-25  marcelloceschia

	* [r3507] does this fix the hangup core dumps?

2012-06-24  marcelloceschia

	* [r3506] allow cfwd for channel state offhook

	* [r3505] check ss_action for Dial softkey

	* [r3504] check ss_action for Dial softkey

	* [r3503] fixes issue with 'Device sent a Keypress, but there is no
	  line specified! Exiting'

	* [r3502] fixes issue with 'Device sent a Keypress, but there is no
	  line specified! Exiting'

	* [r3501] workaround to fix the audio issue while calling a pared
	  extension

	* [r3500] workaround to fix the audio issue while calling a pared
	  extension

2012-06-21  marcelloceschia

	* [r3498] workaround for gcc < 4.2

	* [r3497] workaround to fix warning: channel.c:4934 ast_write:
	  Codec mismatch on channel SCCP/abc-00000001 setting write format
	  to slin16 from ulaw native formats 0x0 (nothing)

2012-06-19  marcelloceschia

	* [r3496] fixes MeetMe number display issue reported by Jacob Miles

2012-06-16  marcelloceschia

	* [r3495] change mwilamp config setting

2012-06-15  marcelloceschia

	* [r3494] add app_sms.patch

	* [r3493] update monitor feature

	* [r3492] fixes warnings

	* [r3491] fix warning

	* [r3490] fixes indent

	* [r3489] fixes 'warning: nested extern declaration of
	  'pthread_kill'' on FreeBSD

	* [r3488] warning fix

	* [r3487] fixes issue with asterisk 1.6

	* [r3486] fixes asterisk 1.8 issue on FreeBSD

	* [r3485] workaround for 'undefined symbol:
	  __sync_val_compare_and_swap_4'

2012-06-10  marcelloceschia

	* [r3482] fixes configure issue using FreeBSD

2012-06-09  marcelloceschia

	* [r3479] fixes resume call using AMI functions - reported by Jacob
	  Miles

2012-06-08  marcelloceschia

	* [r3478] fixes dtmf issue reported by Steven Haigh and Jacob Miles

	* [r3477] fixes debug level value set by sccp.conf

	* [r3476] fixes dtmf issue reported by Steven Haigh and Jacob Miles

	* [r3475] fixes issue with 'Rejecting device: Device Unknown'
	  reported by Alexandre Rodrigues and Jacob Miles

2012-05-29  marcelloceschia

	* [r3473] add missing files

	* [r3471] resize buffer for incomming call prompt and use safe
	  version of sprintf

	* [r3470] update to Diederiks refcount version to work strait
	  forward to stable v4

2012-05-04  ddegroot

	* [r3468] Update Hints documentation, clarifying the point that we
	  are refering to a dialplan context, and that it needs to be
	  present, and contain hinted extensions. Renamed the speeddial
	  hint-context from hint to hints, overall.

	* [r3467] Updated definition of ast_channel_unref in ast106.h

	* [r3466] Removed forward of prodding during rtp_write

2012-05-03  ddegroot

	* [r3465] Renamed sccp_asterisk_getForwardingForChannel to
	  sccp_asterisk_getForwardOriginator. Renamed
	  pbx_find_channel_by_forwarding_for to
	  pbx_find_forward_originator_channel_by_linkedid. Revised both
	  pbx_find_ functions

	* [r3464] Revised c->parentChannel indication.

	* [r3463] Make FORWARDING_FOR work using new LINKEDID

	* [r3462] Added setChannelLinkedId, renamed LINKID to LINKEDID.
	  Using new LINKEDID to during ast1.6 indication of remotePeer to
	  originator.

	* [r3461] Added CS_EXPERIMENTAL 'FORWARDER_FOR' helper flag, to
	  handle sending indication back to original caller. This way
	  hangup/busy/congestion while ringing can be notified to remote
	  end.

	* [r3460] debug logging changes

2012-05-02  ddegroot

	* [r3459] Corrected handle_keypad_button issue when using 7912
	  phones

	* [r3458] revised sccp_wrapper_asterisk_forceHangup

	* [r3457] Fix callforward when using asterisk 1.6. Missing channel
	  unlock in sccp_wrapper_asterisk16_getChannelByName.

	* [r3456] update sccp_wrapper_asterisk_requestHangup

	* [r3455] Compile against asterisk 1.6 with lock debugging options

2012-05-01  ddegroot

	* [r3454] Removed sccp_rtp.isStarted (-MC-). Revised call to
	  sccp_rtp_createAudioServer in
	  sccp_channel_openreceivechannel_locked.

	* [r3453] Revised openreceivechannel sligthly

	* [r3452] Update logging text in
	  sccp_wrapper_asterisk??_create_audio_rtp

	* [r3451] Fix segfault during cfwdall (Issue reported by Diego
	  Vargus)

2012-04-30  ddegroot

	* [r3450] Ported setCallerid? fixes by MC (To follow the example of
	  setRedirectPartyId)

	* [r3448] Ported setRedirectedParty fix by MC (CallForward Issue
	  Segfault reported by Diego Vargus during)

	* [r3444] Corrected debug message in sccp_handle_soft_key_event

	* [r3443] Added sccp_channel_closereceivechannel_locked to
	  startmediatransmission if something went wrong if getting the
	  correct channel

	* [r3442] Updated sccp_handle_keypad_button function, to use
	  sccp_find_channel_on_line_byid_locked instead of
	  sccp_channel_find_byid_locked (reduces number searched channels).
	  Removed replacement of l / d when not necessary. Added debug
	  logging if channel was not found.

	* [r3441] Prevent segfault during sccp_pbx_softswitch_locked when
	  checking c->owner->pbx

	* [r3440] Add propper locking to sccp_line_addChannel and
	  sccp_line_removeChannel

	* [r3439] Removed trustphoneip from documentation.

	* [r3438] Denoted config option trustphoneip as deprecated. This
	  config option is no longer in use.

2012-04-29  ddegroot

	* [r3434] Correct use of in32_t instead of uint32_t for
	  debugcategories

2012-04-26  ddegroot

	* [r3418] Update ChangeLogs

	* [r3417] Added WARNING_USE_BRANCHES_V4.0 because of pending
	  V4.1(refcount) release to trunk.

2012-04-23  ddegroot

	* [r3414] Fix sccp message timeout

2012-04-21  marcelloceschia

	* [r3413] fixes conference compile issue

2012-04-20  marcelloceschia

	* [r3412] does this fix the hint issue?

2012-04-17  ddegroot

	* [r3410] Moved status check during handle_openreceive_channel_ack
	  before looking for channel

	* [r3409] Verify existence of d during sccp_pbx_hangup

	* [r3408] Verify existence of d during sccp_pbx_hangup

2012-04-17  marcelloceschia

	* [r3406] fixes hangup issue

2012-04-15  ddegroot

	* [r3405] Updated ChangeLog

	* [r3404] Set lastkeepalive at beginning and end of handle_message.
	  Use keepaliveextratime as a percentage. Re-check lastKeepalive
	  before disconnecting session

	* [r3402] Switching of non-blocking more in sccp_socket when using
	  experimental-mode. There is no need to use non-blocking mode when
	  running one thread per session.

	* [r3401] Gaining a little more information when we can't find the
	  line connected to an incoming call

2012-04-15  marcelloceschia

	* [r3398] do not enable tzoffset in sample configs

2012-04-14  ddegroot

	* [r3396] Backoff a little longer when 'resource temp unavailable'
	  occurs during send

	* [r3395] Fix sccp_session_send continue

	* [r3393] Extended logging during transfer completion to find out
	  when we get 'Failed to complete transfer. The channel is not
	  ringing or connected'

	* [r3392] Extended logging in
	  sccp_channel_find_on_device_bypassthrupartyid_locked.

	* [r3391] Reduced ERROR level to standard sccp_log for 'can't put
	  on hold inactive channel'

	* [r3390] Simplyfied sccp_socket_device_thread. No need to reduce
	  the pollTimeout window, preventing the window to become to small.
	  Rewrite sccp_session_send2 method to take into account
	  EINTR/EAGAIN, but folding when a real write error occurs.

	* [r3388] Removed recalculation of pollTimeout based on previous
	  message handling. We do not need reduce the pollTimeout window
	  based on a previously handled message.

	* [r3387] Removed extras {

	* [r3386] Fixes re-registration issue when phone still has an open
	  channel, but misses timeout. A context switch on a heavily loaded
	  machine and a very low keep-alive time, leads to missing
	  keepalive windows whilst handling a message when a context switch
	  happens.

	* [r3385] Handle transfer savely when new_channel does not return a
	  new channel as expected

	* [r3382] Fix bad magic number on hangup (Reported by
	  Diego/Philippe)

2012-04-13  ddegroot

	* [r3381] Set devicetype during sccp_handle_tokenReq, so that they
	  are displayed nicely in sccp show sessions

2012-04-12  ddegroot

	* [r3377] Reinstated marcello's transfer patch, to negate the issue
	  with shifting focus during transfer

2012-04-11  marcelloceschia

	* [r3365] revert changes in 3364

