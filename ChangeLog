2013-01-29  ddegroot

	* [r4147] ChangeLog, INSTALL, Makefile.in, aclocal.m4,
	  autoconf/config.guess, autoconf/config.sub, autoconf/depcomp,
	  autoconf/extra.m4, autoconf/install-sh, autoconf/missing,
	  configure, contrib/gen_sccpconf/Makefile.in, doc/Makefile.in,
	  src/Makefile.in, src/config.h.in, src/pbx_impl/ast/ast.h,
	  src/sccp_channel.c, src/sccp_refcount.c: Removed configure option
	  --enable-refcount-liveobjects (not in use any more). Added new
	  configure option: --enable-refcount-debug to activate
	  /tmp/sccp_ref /tmp/refs logging for refcount debug purposes,
	  disabled by default (Issue reported by Bob)

2013-01-29  marcelloceschia

	* [r4146] src/sccp_channel.c: syntax

	* [r4145] src/sccp_channel.c: syntax

	* [r4144] src/sccp_channel.c: disable notice log when no
	  preferences list for recalc codec is set, check for enabled codec
	  do preferences codec move

2013-01-28  marcelloceschia

	* [r4143] src/sccp_hint2.c: experimental distributed device state
	  section

2013-01-27  marcelloceschia

	* [r4142] src/sccp_actions.c: disable callplane when channel was
	  not found

	* [r4141] INSTALL, autoconf/config.guess, autoconf/config.sub,
	  autoconf/depcomp, autoconf/extra.m4, autoconf/install-sh,
	  autoconf/missing, configure, src/config.h.in: add configure
	  option

2013-01-26  marcelloceschia

	* [r4140] contrib/res_xmpp.patch[ADD]: add res_xmpp.patch

2013-01-25  marcelloceschia

	* [r4139] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c: fixes compile issues with asterisk <
	  11 do linkid changes

	* [r4138] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c: use linkedId for channel alloc

	* [r4137] Makefile.in, aclocal.m4, autoconf/asterisk.m4, configure,
	  contrib/gen_sccpconf/Makefile.in, doc/Makefile.in,
	  src/Makefile.in, src/chan_sccp.h, src/pbx_impl/ast/ast.h,
	  src/pbx_impl/ast/astTrunk.c, src/pbx_impl/pbx_impl.h,
	  src/sccp_actions.c, src/sccp_channel.c, src/sccp_channel.h,
	  src/sccp_cli.c, src/sccp_config_entries.h, src/sccp_device.c,
	  src/sccp_features.c, src/sccp_hint.c, src/sccp_management.c,
	  src/sccp_pbx.c, src/sccp_pbx.h, src/sccp_protocol.c,
	  src/sccp_softkeys.c: use linkedId for inbound, transfered and
	  forwared calls

2013-01-23  marcelloceschia

	* [r4136] src/sccp_channel.c: do not use ulaw as fallback

2013-01-20  marcelloceschia

	* [r4135] src/pbx_impl/ast/astTrunk.c: display park position,
	  closes #5

	* [r4134] src/pbx_impl/ast/astTrunk.c: display park position

2013-01-20  ddegroot

	* [r4133] contrib/phone_screenshot/README[ADD]: Added readme file
	  to phone_screenshot

	* [r4132] src/conference/sccp_conference10.c: Check participant
	  returned from sccp_conference_participant_findByPBXChannel before
	  using it

	* [r4131] src/sccp_pbx.c: Set initial value for extension_exists

2013-01-20  marcelloceschia

	* [r4130] src/pbx_impl/ast/astTrunk.c: this can resolve #5

2013-01-19  ddegroot

	* [r4129] contrib/phone_screenshot[ADD],
	  contrib/phone_screenshot/phone_screenshot[ADD],
	  contrib/phone_screenshot/scr2img[ADD]: Added screenshot get
	  utility to contrib directory

	* [r4128] src/conference/sccp_conference10.c: Fixed tiny debug log
	  output spelling mistake

	* [r4127] src/pbx_impl/ast/ast106.h, src/pbx_impl/ast/ast108.h,
	  src/pbx_impl/ast/define.h: Redefined
	  pbx_channel_ref/pbx_channel_unref for older asterisk version ->
	  Fixing multiple warnings during compilation

	* [r4126] ChangeLog, NEWS: Updated News/ChangeLog files to reflect
	  current status of V4.1

	* [r4125] conf/tftp/SEP0000000000.cnf.xml_797x_template: Update
	  xml.cnf sample file with <callLogBlfEnabled>3</callLogBlfEnabled>

2013-01-18  marcelloceschia

	* [r4122] src/sccp_hint2.c: some test with hint2

2013-01-16  ddegroot

	* [r4118] src/sccp_socket.c: Removed FIONREAD before read, not
	  being used anymore

2013-01-16  marcelloceschia

	* [r4117] src/sccp_socket.c: remove bytesAvailable

	* [r4116] src/sccp_socket.c: fixes logic issue in read function

2013-01-16  ddegroot

	* [r4115] src/sccp_lock.h, src/sccp_refcount.c: Fixed
	  sccp_refcount, when compiling with atomic functions

2013-01-14  ddegroot

	* [r4112] src/sccp_config.c: Added config parsing debug log line to
	  sccp_config_object_setValue

2013-01-13  marcelloceschia

	* [r4111] src/sccp_socket.c: revert last changes

	* [r4110] src/sccp_socket.c: fixes double socket cleanup

	* [r4109] src/sccp_socket.c: use sccp_socket_stop_sessionthread in
	  sccp_socket_device_thread_exit

	* [r4108] src/pbx_impl/ast/astTrunk.c: remove double release device

2013-01-12  marcelloceschia

	* [r4107] src/pbx_impl/ast/astTrunk.c: reduce complexity of call
	  parking in asterisk 11

	* [r4106] src/sccp_softkeys.c: fix for RedialMenu, other way to
	  handle speeddial button press

	* [r4105] src/sccp_cli.c: resort output

2013-01-12  ddegroot

	* [r4104] src/pbx_impl/ast/ast108.h: Fix warning when compiling
	  against asterisk-1.8

	* [r4103] src/pbx_impl/ast/define.h: pbx_devstate_changed mapping
	  to pbx call

	* [r4102] src/pbx_impl/ast/define.h: pbx_devstate_changed mapping
	  to pbx call

	* [r4101] src/sccp_features.c: Fix rtp audio during grouppickup for
	  asterisk-trunk (2)

	* [r4100] src/sccp_channel.c, src/sccp_features.c: Fix rtp audio
	  during grouppickup for asterisk-trunk

	* [r4099] src/pbx_impl/ast/define.h, src/sccp_hint2.c: Added
	  notifySubscribers shortcut to notifyPBX if devicestate is not
	  changing and we do not need to notify asterisk

2013-01-11  ddegroot

	* [r4098] src/sccp_hint2.c: Added more models to
	  sccp_hint_isCIDavailabe. Added/updated debug logging

	* [r4097] src/sccp_actions.c: Comment out Remote RINGING + gpickup

2013-01-11  marcelloceschia

	* [r4096] src/pbx_impl/ast/astTrunk.c, src/sccp_channel.c: check
	  for CS_SCCP_PICKUP

	* [r4095] src/pbx_impl/ast/astTrunk.c: check for CS_SCCP_PICKUP

2013-01-11  ddegroot

	* [r4094] src/sccp_channel.c: Forgot the check the version number
	  for ast_channel_callgroup_set

	* [r4093] src/pbx_impl/ast/ast110.h, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/ast/astTrunk.h, src/pbx_impl/ast/define.h,
	  src/sccp_channel.c, src/sccp_features.c: Temporary fix gpickup
	  for asterisk-11

2013-01-11  marcelloceschia

	* [r4092] src/pbx_impl/ast/astTrunk.c: apply ringinuse2busy.diff
	  from pavel

2013-01-10  ddegroot

	* [r4091] src/pbx_impl/ast/astTrunk.c, src/sccp_features.c: Revert
	  to old functionality

	* [r4090] src/chan_sccp.h, src/pbx_impl/ast/astTrunk.c,
	  src/sccp_channel.c, src/sccp_features.c: Pass along the linkedid.
	  Fix grouppickup forceHangup.

	* [r4089] src/sccp_cli.c: Added test message function for setting
	  hint to specific value (testing SCCP/111#11)

	* [r4088] src/sccp_lock.h, src/sccp_refcount.c: Revised
	  sccp_refcount: replaced CAS32 with ATOMIC_INCR/ATOMIC_DECR. Added
	  debug function which creates output in /tmp/sccp_refs when
	  compiled with --enable-debug

2013-01-10  marcelloceschia

	* [r4087] src/sccp_hint2.c: use (line->channels.size > 1) to
	  detemine shared line hint

2013-01-09  ddegroot

	* [r4086] src/sccp_pbx.c: Fix warning unused variable

	* [r4085] src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c: Set the linkedid on a newly
	  allocated channel if we can find it in the channel->owner we are
	  allocating for.

	* [r4084] src/sccp_channel.c: Update sccp_channel_set_calledparty
	  (Proposal)

	* [r4083] src/sccp_pbx.c: Ran a couple of checks with
	  (asterisks_astobj2) REF_DEBUG, and found the reason why
	  ast_channel_unref during hangup would not work before. Added a
	  remark to sccp_pbx.c to indicate this. Added a workaround for
	  now.

2013-01-08  ddegroot

	* [r4082] src/sccp_actions.c: Reducing logging for
	  sccp_handle_token_request

	* [r4081] conf/postgres.sql: update postgres.sql sccpdeviceconfig
	  view. We need to sort by instance before handing the table over
	  to the aggregate textcat_column

	* [r4080] src/sccp_actions.c: Reduced default logging for
	  sccp_handle_dialedphonebook_message to sccp_log((DEBUGCAT_HINT |
	  DEBUGCAT_ACTION))

	* [r4079] src/sccp_pbx.c: Reduce double wait time in case a number
	  does not exist using PBX(extension_status(c)) instead of
	  pbx_exists_extension which only match exact matches.

2013-01-07  ddegroot

	* [r4078] src/sccp_socket.c: Check session null pointer at the
	  start of sccp_read_data

	* [r4077] src/pbx_impl/ast/ast.h, src/pbx_impl/ast/astTrunk.c: Fix
	  module unload gracefully (Reported by Derek Ivey. Cause by taking
	  ast_channel_ref, while not releasing it during hangup and being
	  dependent on res_rtp_asterisk making us unload very late.

	* [r4076] src/sccp_hint2.c: Added IP_Communicator to
	  checkCIDAvailable

	* [r4075] src/sccp_pbx.c: Reduce double wait time in case a number
	  does not exist. sccp_log line was checking again.

	* [r4074] src/pbx_impl/ast/ast.h, src/sccp_cli.c: Fix compile when
	  using --disable-pickup (Added check for CS_SCCP_PICKUP)

	* [r4073] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c: Fix
	  compile when using --disable-pickup (Added check for
	  CS_SCCP_PICKUP)

	* [r4072] src/sccp_actions.c, src/sccp_softkeys.c: Fix compile
	  warnings when using --disable-pickup

	* [r4071] src/sccp_config_entries.h: Fix compile when using
	  --disable-pickup

2013-01-06  ddegroot

	* [r4070] src/Makefile.in, src/sccp_hint2.c: Make sccp_hint2.c
	  compatible to all pbx versions. Suppress warnings.

2013-01-06  marcelloceschia

	* [r4069] src/sccp_hint2.c: sorry pavel, it was my fault

2013-01-06  ddegroot

	* [r4068] src/chan_sccp.h: Added DEBUGCAT_FILELINEFUNC, when you
	  activate 'sccp debug filelinefunc' all debug lines start with the
	  file/line/function information before the actual debug info.

2013-01-06  marcelloceschia

	* [r4067] src/sccp_hint2.c: make hint2 compatible with ast 1.8

	* [r4066] src/sccp_channel.c: remove sccp_hint_lineStatusChanged

	* [r4065] src/Makefile.am, src/Makefile.in, src/common.h: switch to
	  hint2

	* [r4064] src/sccp_hint2.c: use strict enum value

	* [r4063] src/sccp_socket.c: cleanup

2013-01-06  ddegroot

	* [r4062] src/sccp_hint2.c: Update sccp_hint_devstate_cb, to fix
	  extension_state for Ring&InUse and OnHold&InUse. Added correct
	  handling for InUse when starting a new call (Dialing instead of
	  Connected)

	* [r4061] src/sccp_channel.c: Updated some of the debug lines, to
	  know the origin

	* [r4060] src/sccp_pbx.c: Updated some of the debug lines, to know
	  the origin

2013-01-05  ddegroot

	* [r4059] src/sccp_hint2.c: Extended debugging to include function
	  name and if possible either device->id or line->name

	* [r4058] src/Makefile.am, src/Makefile.in, src/common.h: Revert
	  accidental checkin of Makefile.am/common.h

	* [r4057] src/Makefile.am, src/Makefile.in, src/common.h,
	  src/sccp_hint2.c: Add segmentation to the sccp_hint2.c file /
	  Reorder Functions / Move FeatureEventHandling to Dispatcher
	  Segment / No/little code changes

	* [r4056] src/sccp_actions.c: Added context output to debug output
	  when pull phonebook information
	  (sccp_handle_dialedphonebook_message)

	* [r4055] src/Makefile.in, src/sccp_hint.c, src/sccp_hint.h:
	  Reverted sccp_hint2 from common.h / Makefile.am

	* [r4054] src/Makefile.am, src/common.h: Reverted sccp_hint2 from
	  common.h / Makefile.am

	* [r4053] src/sccp_indicate.c: Indent commented code

	* [r4052] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c:
	  Replicated PBX(getExtensionState) to other ast_impl files

	* [r4051] src/pbx_impl/ast/astTrunk.c: Ringing & Inuse should
	  return Alerting

	* [r4050] src/pbx_impl/ast/astTrunk.c, src/sccp_hint2.c: Forgot the
	  two aggregated states

2013-01-05  marcelloceschia

	* [r4049] src/pbx_impl/ast/astTrunk.c: temp working version

2013-01-05  ddegroot

	* [r4048] src/pbx_impl/ast/astTrunk.c: Added pbx_log LOG_NOTICES
	  for every extensionstate

	* [r4047] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c: Update
	  getExtensionState

	* [r4046] src/sccp_channel.c, src/sccp_hint2.c,
	  src/sccp_protocol.h: Update CS_DEVSTATE_CACHEABLE to
	  sccp_hint2.c. Updated Comment in sccp_protocol.h

2013-01-05  marcelloceschia

	* [r4045] src/sccp_actions.c: add CallListStateUpdate

	* [r4044] src/sccp_actions.c: add CallListStateUpdate

	* [r4043] src/sccp_protocol.h: fixes spelling

2013-01-05  ddegroot

	* [r4042] src/pbx_impl/ast/astTrunk.c, src/pbx_impl/pbx_impl.h:
	  Implementation of PBX(getExtensionState)

2013-01-05  marcelloceschia

	* [r4041] src/sccp_protocol.h: update 0x0153 message

	* [r4040] src/sccp_hint2.c: cleanup

	* [r4039] src/sccp_hint2.c, src/sccp_hint2.h: cleanup

2013-01-05  ddegroot

	* [r4038] src/Makefile.in: Temporary update for sccp_hint2.c

2013-01-05  marcelloceschia

	* [r4037] src/sccp_hint2.c: fixes issue with onhook

2013-01-04  ddegroot

	* [r4036] src/Makefile.am, src/Makefile.in, src/common.h,
	  src/sccp_hint.c, src/sccp_hint.h, src/sccp_hint2.c,
	  src/sccp_hint2.h: Added CS_EXPERIMENTAL around sccp_hint2.c, and
	  included it into Makefile.am and common.h (for now)

2013-01-04  marcelloceschia

	* [r4035] src/sccp_actions.c: quck fix to solve issue with hinted
	  speeddial on devices without dynamic speeddial

	* [r4034] src/sccp_hint2.c: fixes issue with
	  --disable-dynamic-speeddial

	* [r4033] src/sccp_event.c: logic error fix

	* [r4032] src/sccp_hint2.c[ADD], src/sccp_hint2.h[ADD]: just some
	  tests

2013-01-03  ddegroot

	* [r4031] src/pbx_impl/ast/astTrunk.c: Fix CDR CallerID Name set
	  instead of Number. Copy/Paste Error (Pavel Troller)

	* [r4030] src/sccp_hint.c: Moved SCCP_CHANNELSTATE_RINGOUT to
	  return DIALING state. (Thanks Pavel)

	* [r4029] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c: Fix
	  compile issue because of missing '{'

	* [r4028] src/pbx_impl/ast/astTrunk.c, src/sccp_hint.c: Trying to
	  fix hints with asterisk-11

	* [r4027] src/chan_sccp.c, src/chan_sccp.h,
	  src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/sccp_hint.c: Switched to using sccp_hint_getLinestate to
	  retrieve sccp_wrapper_asterisk_devicestate. Removed old
	  chan_sccp.c: sccp_devicestate implementation

	* [r4026] src/pbx_impl/ast/astTrunk.c: Add force update rtp_peer
	  todo comment to fixup in astTrunk.c

	* [r4025] src/pbx_impl/ast/astTrunk.c: Fix fixup for astTrunk.c
	  which causes hangup issues during transfer (Reported by Pavel
	  Troller)

2013-01-02  ddegroot

	* [r4024] src/pbx_impl/ast/astTrunk.c, src/pbx_impl/ast/astTrunk.h,
	  src/pbx_impl/ast/define.h, src/sccp_pbx.c: Add
	  pbx_channel_varshead. Fix getting at presence in astTrunk.c

	* [r4023] src/chan_sccp.c, src/sccp_hint.c: Fix hint to handle
	  presentation/privacy correctly

	* [r4022] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/sccp_channel.c, src/sccp_pbx.c: Fix privacy presentaion /
	  presence parsing

	* [r4021] src/pbx_impl/ast/define.h, src/sccp_actions.c,
	  src/sccp_config.c, src/sccp_hint.c, src/sccp_hint.h: Update
	  definition for pbx_devicestate_change to handle
	  CS_CACHEABLE_DEVICESTATE besides CS_DEVICESTATE. Adapt other
	  files to use this new mapping correctly. (Reported by Bob Brown)

	* [r4020] INSTALL, Makefile.in, aclocal.m4, autoconf/asterisk.m4,
	  autoconf/config.guess, autoconf/config.sub, autoconf/depcomp,
	  autoconf/extra.m4, autoconf/install-sh, autoconf/missing,
	  configure, contrib/gen_sccpconf/Makefile.in, doc/Makefile.in,
	  src/Makefile.in, src/config.h.in: Renamed CS_NEW_DEVICESTATE to
	  CS_DEVICESTATE. Added CS_CACHEABLE_DEVICESTATE (has new cacheable
	  option in asterisk-10-branch and asterisk-11-branche).

	* [r4019] src/conference/sccp_conference10.c: dtu_softkey.action
	  should be freed after use

	* [r4018] src/conference/sccp_conference10.c, src/sccp_hint.c,
	  src/sccp_pbx.c, src/sccp_protocol.c: Fixed possible null-pointer
	  dereferences. Fixed un-initialized pointers

2013-01-02  marcelloceschia

	* [r4017] src/sccp_hint.c: check for allowRinginNotification

	* [r4016] src/sccp_hint.c: nur kleine Änderungen

	* [r4015] src/sccp_cli.c: change video support to yes/no

	* [r4014] src/pbx_impl/ast/astTrunk.c: workaround for asterisk 11
	  log flooding

2013-01-01  ddegroot

	* [r4013] src/sccp_hint.c: Ident hint debug line for NONE SCCP Hint

	* [r4012] src/pbx_impl/ast/ast108.c, src/sccp_actions.c,
	  src/sccp_pbx.c: Correct refcount on sccp_pbx_softswitch. Replaced
	  return by goto EXIT_FUNC to make sure that correct release are
	  made.

	* [r4011] src/sccp_hint.c, src/sccp_softkeys.c: Fixed
	  privacy/presentation for sccp_hint.c

2013-01-01  marcelloceschia

	* [r4010] src/sccp_hint.c: fixes nullpointer for asterisk 11

	* [r4009] src/pbx_impl/ast/astTrunk.c: fixes video codec issue

2013-01-01  ddegroot

	* [r4008] src/pbx_impl/ast/astTrunk.c: Fix pbx_channel_name issue
	  in sccp_pbx_sendtext for asterisk-trunk (Reported by Nikola)

	* [r4007] ChangeLog: Update ChangeLog

	* [r4006] conf/postgres.sql: Documentation/SQL corrections
	  (Reported by Nikola)

	* [r4005] doc/04_Setup_Guide.doc: Documentation corrections
	  (Reported by Nikola)

	* [r4004] src/sccp_actions.c, src/sccp_hint.c: Reduce hint logging
	  when debug level = core to 'no output'

	* [r4003] src/sccp_hint.c, src/sccp_hint.h: Added
	  hint->callInfo.presentation. Renamed hint->callInfo.callingParty
	  to hint->callInfo.callingPartyNumber and
	  int->callInfo.calledParty to int->callInfo.calledPartyNumber

	* [r4002] src/chan_sccp.c, src/sccp_hint.c: Revised
	  sccp_devicestate to correct refcount issue during hint state
	  check

	* [r4001] src/sccp_hint.c: Fixed callinitiator speeddial hint
	  display when calling a singleLine

	* [r4000] src/sccp_hint.c: Fix hint display on callreceiving
	  speeddial. Still need to check the callinitiating speeddial
	  update.

	* [r3999] src/sccp_hint.c: channel release in sccp_hint.c

	* [r3998] src/chan_sccp.c, src/sccp_actions.c, src/sccp_channel.c,
	  src/sccp_device.c, src/sccp_hint.c, src/sccp_hint.h,
	  src/sccp_indicate.c, src/sccp_line.c, src/sccp_line.h: Added
	  sccp_line_getDNDChannelState to sccp_line. sccp_devicestate now
	  takes DND into account. Cleanup of sccp_hint.c. Updated doxygen
	  comments for sccp_hint

	* [r3997] conf/sccp.conf.annotated: Added conference options to
	  sccp.conf.annotated

	* [r3996] doc/doxygen.cfg: Added doxygen commandaliases

	* [r3995] src/chan_sccp.c, src/chan_sccp.h,
	  src/conference/sccp_conference10.c, src/sccp_refcount.c:
	  Reindented files

	* [r3994] src/.indent.pro, src/conference/.indent.pro,
	  src/pbx_impl/.indent.pro, src/pbx_impl/ast/.indent.pro: Updated
	  indent definitions. Added type defintioins to .indent.pro for
	  common types that should be nicely aligned in structures

2012-12-31  ddegroot

	* [r3993] src/sccp_hint.c: Removed non-functional code from
	  sccp_hint.c

	* [r3992] src/sccp_hint.c: Added force option to notifySubscriber
	  to force update on first registration

	* [r3991] src/sccp_hint.c: notifySubscribers when subscribing to a
	  a hint

	* [r3990] src/sccp_device.c, src/sccp_pbx.c, src/sccp_utils.c: Fix
	  Possible null pointer dereference / redundant null pointer
	  dereference check

	* [r3989] src/sccp_channel.c: Null Pointer Deref before starting
	  channel_clean

	* [r3988] src/sccp_config.c: Close file before returning

	* [r3987] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c: Null
	  Pointer Deref checks in sendHTML

	* [r3986] src/sccp_socket.c: Fix 2 fur crossover session (Reported
	  by MC)

	* [r3985] src/sccp_actions.c, src/sccp_socket.c: Fix fur crossover
	  session (Reported by MC)

	* [r3984] src/sccp_features.c: Demoted some of the pbx_log message
	  to sccp_log during conference creation.

	* [r3983] src/sccp_threadpool.c: Use return value from
	  SCCP_LIST_REMOVE in sccp_threadpool_thread_end

	* [r3982] src/sccp_hint.c: Skipping notifySubscribers if nothing
	  changed. Added V4.1 callInfo setting for dynamic speeddial.

	* [r3981] src/sccp_channel.c, src/sccp_hint.c, src/sccp_hint.h:
	  Removed previousState from sccp_hint_lineStatusChanged

2012-12-31  marcelloceschia

	* [r3980] src/sccp_protocol.h: OpenMultiMediaChannelMessage_v17
	  needs more bytes (Invalid SCCP message! : ID :131: readByte(16)
	  underrun, length = 4)

2012-12-31  ddegroot

	* [r3979] src/sccp_hint.c: Fixed
	  sccp_hint_handleFeatureChangeEvent, it was using the wrong
	  paramater type for sccp_hint_lineStatusChanged

2012-12-30  ddegroot

	* [r3978] src/sccp_socket.c: Comments removed

	* [r3977] src/sccp_hint.c: refcount correction when using the pbx
	  hint system

	* [r3976] src/pbx_impl/ast/ast110.c, src/sccp_hint.c,
	  src/sccp_hint.h: Make sccp_hint.c compile against asterisk-10 and
	  asterisk-trunk again

	* [r3975] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c:
	  Preliminary Sync pbx_impl in regards to sccp_devicestate

	* [r3974] src/sccp_channel.c, src/sccp_hint.c, src/sccp_hint.h,
	  src/sccp_indicate.c, src/sccp_line.c: backport of sccp_hint.c
	  from V4.0

2012-12-24  ddegroot

	* [r3973] src/conference/sccp_conference10.c, src/sccp_features.c:
	  Binding device into the channel, which is on hold, before moving
	  it into the conference

2012-12-24  marcelloceschia

	* [r3972] src/pbx_impl/ast/astTrunk.c: fixes core with asterisk
	  11/trunk

	* [r3971] src/sccp_socket.c: fixes issue when s->device->session is
	  null

	* [r3970] src/pbx_impl/ast/astTrunk.c: fixes asterisk 11/trunk
	  compile issue when using --enable-video

2012-12-23  ddegroot

	* [r3969] src/sccp_features.c: Switching sccp_feat_join to
	  experimental mode until fully working and tested

	* [r3968] src/chan_sccp.h, src/conference/sccp_conference10.c,
	  src/sccp_channel.c, src/sccp_cli.c, src/sccp_device.c: Fix
	  compile issue when running without --enable-conference

	* [r3967] src/sccp_actions.c, src/sccp_device.c,
	  src/sccp_softkeys.c: Only show conf/conflist/join button if
	  enabled in the device configuration

2012-12-23  marcelloceschia

	* [r3966] src/sccp_device.c: deactivate conference button

2012-12-23  ddegroot

	* [r3965] src/conference/sccp_conference10.c: Fix conference
	  compilation under asterisk-11 (pbx_channel_name)

2012-12-23  marcelloceschia

	* [r3964] src/sccp_device.c: deactivate conference button

2012-12-23  ddegroot

	* [r3963] src/sccp_actions.c, src/sccp_softkeys.c: Only show
	  conf/conflist button if enabled in the device configuration

	* [r3962] src/sccp_softkeys.c: Remove conf/conflist button, if not
	  enabled using --enable-conference

	* [r3961] src/chan_sccp.h, src/conference/sccp_conference10.c,
	  src/sccp_appfunctions.c, src/sccp_channel.c, src/sccp_cli.c,
	  src/sccp_cli.h, src/sccp_conference.h, src/sccp_config_entries.h,
	  src/sccp_device.c, src/sccp_features.c, src/sccp_pbx.c,
	  src/sccp_protocol.h: conference: added sccp.conf options and
	  cli/ami commands

	* [r3960] src/sccp_utils.c, src/sccp_utils.h: Needed a way to check
	  if a string is nummeric -> added sccp_strIsNumeric

2012-12-23  marcelloceschia

	* [r3959] src/pbx_impl/ast/ast106.c: extend maxBitRate from calling
	  channel (port from ast108)

2012-12-23  ddegroot

	* [r3958] src/sccp_refcount.c, src/sccp_threadpool.c: Fix/Cleanups
	  for issues found by clang

2012-12-23  marcelloceschia

	* [r3957] src/pbx_impl/ast/ast110.c: extend maxBitRate from calling
	  channel (port from ast108)

	* [r3956] src/pbx_impl/ast/ast108.c: fixes asterisk 1.8 issue with
	  ast_channel_varshead

	* [r3955] src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/astTrunk.c:
	  extend maxBitRate from calling channel

2012-12-22  marcelloceschia

	* [r3954] autoconf/extra.m4: fixes issue with clang >= 3.2

2012-12-21  marcelloceschia

	* [r3953] autoconf/extra.m4: fixes clang depricated cflag
	  -fcatch-undefined-behavior

	* [r3952] src/sccp_refcount.c: fixes clang warning

	* [r3951] src/sccp_utils.c: fixes clang warning

	* [r3950] src/sccp_utils.c: fixes clang warning

2012-12-21  ddegroot

	* [r3949] src/chan_sccp.c, src/chan_sccp.h, src/sccp_actions.c,
	  src/sccp_socket.c, src/sccp_socket.h: Large Rewrite/Revision of
	  Socket Handling Code (See mailinglist: chan-sccp-b socket
	  handling / network handlingchan-sccp-b socket handling / network
	  handling)

	* [r3948] src/sccp_lock.h: Fix clang warning about using unsigned
	  size_t for refcount. replace CAS32_TYPE with int instead

	* [r3947] src/conference/sccp_conference10.c: Fix clang warning
	  about indentifier in conference

	* [r3946] autoconf/extra.m4, configure: Fix compile with CC=clang

2012-12-21  marcelloceschia

	* [r3945] Makefile.in, aclocal.m4, conf/mysql-v5.sql, configure,
	  doc/Makefile.in, src/Makefile.in, src/pbx_impl/ast/astTrunk.c,
	  src/sccp_channel.c, src/sccp_protocol.c, src/sccp_protocol.h:
	  move instance to function argument

	* [r3944] src/pbx_impl/ast/astTrunk.c: fixes issue with asterisk >=
	  11

2012-12-20  ddegroot

	* [r3943] src/pbx_impl/ast/ast110.c: Small correction to
	  PBX(setLanguage) for older asterisk versions

	* [r3942] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c:
	  Small correction to PBX(setLanguage) for older asterisk versions

2012-12-20  marcelloceschia

	* [r3941] src/conference/sccp_conference10.c: set language for
	  playback_channel using pbx impl

	* [r3940] src/conference/sccp_conference10.c: set language for
	  playback_channel using pbx impl

	* [r3939] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/pbx_impl.h: setLanguage impl

	* [r3938] src/conference/sccp_conference10.c: set language for
	  playback_channel in asterisk > 10

2012-12-20  ddegroot

	* [r3937] src/sccp_refcount.c: Explained Refcount Forced Destroy a
	  little better.

	* [r3936] src/sccp_refcount.c: Explained Refcount Forced Destroy a
	  little better.

	* [r3935] src/sccp_channel.c: Removed bad transfer foreignchannel
	  code. Added a possible solution by issuing a connected line
	  update (like call_forward)

	* [r3934] src/pbx_impl/ast/ast.c: Check for channel->tech wenn
	  using get_sccp_channel_from_pbx_channel

	* [r3933] aclocal.m4, autoconf/asterisk.m4, configure,
	  src/config.h.in: Added a little fix to compile against
	  asterisk-1.6.2.x without having DEBUG_THREADS. Issue is cause by
	  the include order in which pbx_impl includes asterisk header
	  files. (Bug Reported by: Leonid & Philippe)

2012-12-19  ddegroot

	* [r3932] src/sccp_pbx.c: Reverted back to previous behaviour for
	  sccp_pbx_answer. I think i was trying to hangup the wrong
	  channel, when the bridge could not be setup.

	* [r3931] src/conference/sccp_conference10.c,
	  src/sccp_conference.h: Fixed participant->conferenceBridgePeer
	  playback. Activated ConfList Menu Option. Added Refresh to the
	  ConfList Menu. Activated Kick and Mute Buttons.

	* [r3930] src/conference/sccp_conference10.c, src/sccp_pbx.c: Fixes
	  to compile against asterisk-1.6.2 and asterisk-trunk

	* [r3929] src/conference/sccp_conference10.c: Fixed device refcount
	  in conference after using the conflist.

	* [r3928] src/conference/sccp_conference10.c: Fixed device refcount
	  in conference after using the conflist.

	* [r3927] src/sccp_conference.h: Added copy of the moderators
	  language to conference->playback_channel, so that announcements
	  are played back in the moderators language

	* [r3926] src/pbx_impl/ast/define.h: Added copy of the moderators
	  language to conference->playback_channel, so that announcements
	  are played back in the moderators language

	* [r3925] src/conference/sccp_conference10.c,
	  src/pbx_impl/ast/ast108.c: Added copy of the moderators language
	  to conference->playback_channel, so that announcements are played
	  back in the moderators language

	* [r3924] src/conference/sccp_conference10.c: Trying to fix the
	  stream_and_wait issue when playing back to a single channel in a
	  bridge, suspend seems to work, but unsuspend doesn't, needs a
	  little more research i guess. Does not impact functionality for
	  now.

2012-12-18  ddegroot

	* [r3923] src/conference/sccp_conference10.c: Update playback to
	  stream. Stuttering sound issue still there during
	  playback_to_channel.

	* [r3922] src/sccp_pbx.c: Added comment about
	  AST_CONTROL_REDIRECTING to be implemented sometime in pbx_impl,
	  following same principal as update_connectedline

	* [r3921] src/pbx_impl/ast/astTrunk.h, src/pbx_impl/ast/define.h,
	  src/sccp_channel.c, src/sccp_pbx.c: Update redirecting
	  information by using pbx_channel_call_forward_set in
	  sccp_channel.c. Force update_connected_line during masqueration
	  for forwarded line -> Resulting in redirection information on the
	  caller display

	* [r3920] src/sccp_pbx.h: Function sccp_pbx_update_connectedline
	  not implemented in sccp_pbx.c anymore

	* [r3919] src/sccp_channel.c, src/sccp_pbx.c: Clarify the
	  channel->parentChannel release sequence.

	* [r3918] src/sccp_channel.c: Fixed sccp_channel_endcall

	* [r3917] src/sccp_pbx.c: During callforward when brigepeer cannot
	  be found, we should end the call on the parentChannel instead of
	  the current channel

	* [r3916] src/sccp_actions.c, src/sccp_channel.c: Fix refcount on
	  callforward. Matchup rtp capabilities during callforward.

2012-12-17  ddegroot

	* [r3915] src/conference/sccp_conference10.c,
	  src/pbx_impl/ast/astTrunk.h, src/pbx_impl/ast/define.h: Speedup
	  conference end by only playing announcements once. Suppress nasty
	  CDR message by forcing the answertime to be set on Playback
	  Bridge Channel

	* [r3914] src/conference/sccp_conference10.c: Cleaned up,
	  Synchronised and Reformatted the Debug/Log Message for
	  conference.

	* [r3913] src/conference/sccp_conference10.c, src/sccp_line.c,
	  src/sccp_refcount.c, src/sccp_refcount.h: Fixed the conference
	  refcount issues

	* [r3912] src/conference/sccp_conference10.c,
	  src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/pbx_impl.h: Generalized/Refactored masqueradeHelper
	  and moved to pbx_impl. Renamed alloc_conferenceTempPBXChannel ->
	  allocTempPBXChannel and request_foreign_channel ->
	  requestForeignChannel in pbx_impl. Specialized masqueradeHelper
	  in pbx_impl to be specific for the version used.

	* [r3911] src/conference/sccp_conference10.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/ast/astTrunk.h, src/pbx_impl/ast/define.h: Refined
	  the masquerade helper by moving part of temp channel cloning to
	  pbx_impl

	* [r3910] src/conference/sccp_conference10.c, src/sccp_device.c,
	  src/sccp_protocol.c, src/sccp_protocol.h, src/sccp_utils.c,
	  src/sccp_utils.h: Integrated both sendUserToDeviceVersion1Message
	  implemetations into one function in sccp_protocol.c by added
	  extra parameters for AppID, lineInstance, callReference and
	  TransactionID

	* [r3909] src/sccp_device.c: Reverted sccp_dev_buildpacket back to
	  previous behaviour (mallocing only the exact space needed for an
	  sccp message, instead of SCCP_MAX_PACKET)

	* [r3908] src/conference/sccp_conference10.c,
	  src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/sccp_conference.h, src/sccp_features.c: Refactored
	  masqueration part of conference completely. The new version works
	  under asterisk-1.8, asterisk-10 and asterisk-11. asterisk-1.6.2
	  has not been checked/tested (but does compile and should follow
	  asterisk-1.8)

2012-12-16  marcelloceschia

	* [r3907] src/sccp_protocol.c: remove debug lines

	* [r3906] src/sccp_protocol.c: fixes
	  UserToDeviceDataVersion1Message

2012-12-16  ddegroot

	* [r3905] src/conference/sccp_conference10.c,
	  src/pbx_impl/ast/ast.h, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c, src/pbx_impl/pbx_impl.h: Moved
	  asterisk version specific function for conference to pbx_impl.
	  Fixed connected_line_update segfault for id.tag for
	  asterisk-trunk in astTrunk.c

	* [r3904] src/sccp_cli.c: Fix error when using sccp tokenAck on
	  device without a session

2012-12-15  ddegroot

	* [r3903] src/conference/sccp_conference10.c: Make conference
	  compile against asterisk-10.6.*

	* [r3902] src/conference/sccp_conference10.c: Make conference
	  compile against asterisk-10

	* [r3901] src/sccp_actions.c: Reduce log level when handling empty
	  d->softkeyDefinition

	* [r3900] ChangeLog, autoconf/extra.m4, configure: Switching to
	  std=gnu99 (with support for gnu89 inlining)

	* [r3899] contrib/llvm-scan-build: Added optional parameters to the
	  llvm-scan-build script

	* [r3898] src/conference/sccp_conference10.c: Check part->channel
	  to make sure we are dealing with an sccp phone when creating the
	  conflist

	* [r3897] src/sccp_device.c: Reduce debug log level on device
	  create

	* [r3896] src/sccp_actions.c: Removed some of the dump_packet debug
	  where not necessary anymore

	* [r3895] src/sccp_utils.c: Change debug log level for realtime
	  when creating new line (1)

	* [r3894] src/sccp_utils.c: Change debug log level for realtime
	  when creating new line

	* [r3893] src/sccp_features.c: Fixed sccp_features.c compile error
	  when using asterisk 11.1

	* [r3892] src/conference/sccp_conference10.c,
	  src/pbx_impl/ast/ast108.c: Added handling for conflist actions
	  (Experimental).

	* [r3891] src/sccp_refcount.h: Fixed missing newline in
	  sccp_refcount.h

	* [r3890] src/conference/sccp_conference10.c: Moved part of the
	  conference cleanup to __sccp_conference_destroy

	* [r3889] src/conference/sccp_conference10.c: Added comment to
	  special asterisk-trunk addition 'alloc_playback_chan'

	* [r3888] src/conference/sccp_conference10.c,
	  src/pbx_impl/ast/astTrunk.c, src/pbx_impl/ast/astTrunk.h,
	  src/pbx_impl/ast/define.h: Make new conference implementation
	  compile against asterisk-11.1 as well

	* [r3887] src/conference/sccp_conference10.c: Made conference
	  compatible to asterisk 1.6.2 again. Added corrected releases when
	  returning error during addParticipant

	* [r3886] src/conference/sccp_conference10.c,
	  src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/ast/define.h: Updated
	  alloc_conferenceTempPBXChannel, added definitions to define.
	  Replaced function calls in conference to use pbx_impl instead

2012-12-14  ddegroot

	* [r3885] src/conference/sccp_conference10.c,
	  src/sccp_conference.h, src/sccp_features.c, src/sccp_protocol.h:
	  Added ConfList to conference implementation

	* [r3884] src/sccp_device.c, src/sccp_utils.c: Temporary Revert
	  sccp_build_packet to old behaviour to fix
	  UserToDeviceDataVersion1Message.

	* [r3883] src/conference/sccp_conference10.c: Added
	  entering/leaving announcements to conference

	* [r3882] src/sccp_conference.h: Added entering/leaving
	  announcements to conference

	* [r3881] src/conference/sccp_conference10.c, src/sccp_features.c,
	  src/sccp_pbx.c: Retain conference in d->conference and release
	  nicely upon pbx_hangup. Issue error message for now when a
	  conference is started twice on one device.

	* [r3880] src/conference/sccp_conference10.c,
	  src/sccp_conference.h, src/sccp_features.c: Fixed zombie/hangup
	  issue when using conference. Channels should not be left over
	  after finishing the conference anymore.

2012-12-09  ddegroot

	* [r3879] src/sccp_management.c: Allow empty number with AMI
	  SCCPStartCall (jacob)

	* [r3878] src/sccp_management.c: Add swap channels option (yes/no)
	  when resuming to the AMI function SCCPHoldCall (jacob)

2012-12-08  ddegroot

	* [r3877] src/conference/sccp_conference10.c: Prevent null pointer
	  dereference in __sccp_conference_addParticipant because retain
	  could return null

	* [r3876] src/chan_sccp.c: Prevent null pointer dereference in
	  check_session_message_device when r==NULL

	* [r3875] src/sccp_config.c: Prevent null pointer dereference in
	  sccp_config.c during GLOB(lines) traversal, when line refcount
	  would be 0 during release

	* [r3874] src/conference/sccp_conference10.c: Prevent null pointer
	  dereference in sccp_conference10.c

	* [r3873] src/sccp_event.c: Prevent dereferencing null-pointer,
	  during event retension failure

	* [r3872] src/sccp_refcount.c: Removed uninitialized value from
	  refcount debug log

	* [r3871] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/sccp_channel.c: Replaced custom SCCP::? linkedid for asterisk
	  1.8 and up by the asterisk generated one

	* [r3870] src/sccp_channel.c: Prevent possible null pointer
	  dereference when sccp_device_retain returns NULL in
	  sccp_channel_set_active

2012-12-05  ddegroot

	* [r3869] src/sccp_config.c: Ugly solution to sccp reload problem
	  when sccp.conf has not changed. config_load mixes ast_config
	  struct with errors on its return, should have been byref, bu that
	  is not the case. On FILEUNCHANGED we need to load the config
	  files anyway but keep returning FILE_NOT_CHANGED, so that for
	  other function GLOB(cfg) will atleast have valid data.

	* [r3868] contrib/gen_sccpconf/gen_sccpconf.c: Fix missing type
	  entries for devices and lines

2012-12-02  ddegroot

	* [r3867] src/sccp_socket.c: Reverted
	  sccp_socket_stop_sessionthread to using pthread_join for now

2012-12-02  marcelloceschia

	* [r3866] conf/mysql-v5.sql: add FOREIGN KEY check for mysql5

2012-12-02  ddegroot

	* [r3865] src/sccp_socket.c: Updated
	  sccp_socket_stop_sessionthread, to include pthread_join after
	  pthread_cancel (solves sporadic issue in ioctl. Also added
	  comment about using shutdown(s->fds[0].fd, SHUTDOWN_RDWR) instead
	  of pthread_cancel.

2012-12-01  ddegroot

	* [r3864] src/sccp_actions.c, src/sccp_socket.c: Revised
	  sccp_socket_stop_sessionthread

2012-11-27  ddegroot

	* [r3859] src/pbx_impl/ast/define.h: Added automatic x = NULL after
	  sccp_free(x) in define.h.

	* [r3856] src/conference/sccp_conference10.c: Added manager events
	  to conference

	* [r3855] src/conference/sccp_conference10.c,
	  src/sccp_conference.h, src/sccp_features.c: Trying to get rid of
	  the unused moderator channel which was put on hold.

2012-11-26  ddegroot

	* [r3853] src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c: Corrected module registration string

	* [r3852] src/pbx_impl/ast/ast.h, src/pbx_impl/ast/define.h: Added
	  fileexists / file.h to pbx_impl

	* [r3851] src/conference/sccp_conference10.c,
	  src/sccp_conference.h: Started implementation of
	  sccp_conference_playback_helper

	* [r3850] src/conference/sccp_conference10.c,
	  src/sccp_conference.h, src/sccp_features.c, src/sccp_refcount.c,
	  src/sccp_refcount.h: Fix conference refcount issue. Removed
	  num_participants. Added conferece->finishing, conference->locked.
	  Fix Module unload after creating a conference

2012-11-25  ddegroot

	* [r3849] src/conference/sccp_conference10.c,
	  src/sccp_conference.h, src/sccp_features.c: Cleaned up
	  conference/sccp_conference10.c for further development. Multiple
	  conference moderators are now possible. This is necessary to hand
	  over a conference to another participant (this functionality has
	  to be added later), it also simplifies the other functions,
	  because all participants are dealt with in the same manner.

	* [r3848] src/conference/sccp_conference10.c: Patched
	  conference/sccp_conference10.c so that confernce works, and does
	  not segfault on hangup. Moderator refcount is not released
	  correctly yet and async_goto after conference end has been
	  disabled. Module unload does not work after conference has been
	  used. More work is necessary. Simple conferences do work. Visual
	  feedback about confererence status has not been implemented yet.

	* [r3847] src/sccp_device.c: Default registration state of a device
	  is none instead of failed

	* [r3846] src/sccp_pbx.c: Fixed second incoming call. Indication
	  for callwaiting was being sent to the wrong channel.

2012-11-24  ddegroot

	* [r3845] src/sccp_config_entries.h, src/sccp_protocol.h,
	  src/sccp_softkeys.c: Fix grouppickup softkey to cancel dial
	  scheduler

	* [r3844] src/sccp_features.c, src/sccp_softkeys.c: Fix grouppickup
	  softkey retain instead of release. Added cancellation of
	  scheduler.digittimeout (ticket #166). Removed indicate RINGING
	  from grouppickup.

	* [r3842] src/sccp_cli.c, src/sccp_features.c: Fix grouppickup to
	  only pickup RINGING channels

	* [r3840] src/pbx_impl/ast/ast106.c, src/sccp_features.c: Correct
	  comment / debug statement about channel_locking during
	  findChannelWithCallback (ast106)

2012-11-24  marcelloceschia

	* [r3838] src/sccp_config_entries.h: set allowRinginNotification
	  default to no

2012-11-23  marcelloceschia

	* [r3837] src/sccp_actions.c: AST_STATE_UP with full checks in
	  sccp_handle_OpenMultiMediaReceiveAck

2012-11-21  marcelloceschia

	* [r3836] src/sccp_actions.c: does this fix Crossover sessions?

2012-11-18  marcelloceschia

	* [r3834] src/sccp_actions.c: removed sccp_device_release(d),
	  because it was not retained in this function

2012-11-17  ddegroot

	* [r3831] src/sccp_hint.c: Fixed hint->callInfo.calltype setting
	  for hinthandling (protocolversion <15)

	* [r3830] src/sccp_actions.c, src/sccp_channel.c, src/sccp_hint.c,
	  src/sccp_hint.h, src/sccp_indicate.c, src/sccp_line.c: Update
	  attachLine/detachLine event handling for hints

2012-11-15  marcelloceschia

	* [r3827] src/sccp_hint.c: fix hint when allowRinginNotification=no

2012-11-14  ddegroot

	* [r3826] src/sccp_hint.c: Renamed #if CS_EXPERIMENTAL_ to #if 1
	  for now

2012-11-14  marcelloceschia

	* [r3825] src/sccp_hint.c: fix

	* [r3824] src/sccp_hint.c: reduce the #ifndef CS_EXPERIMENTAL_
	  block

2012-11-14  ddegroot

	* [r3823] src/sccp_hint.c: Skip updating hint information if
	  hint->previousState and hint->currentState are the same

	* [r3822] src/sccp_channel.c: Remove error status from
	  preferredCodec debug line

2012-11-13  marcelloceschia

	* [r3820] src/sccp_hint.c: do not use AST_EVENT_DEVICE_STATE for
	  hint subscribtion. Using AST_EVENT_DEVICE_STATE let us miss the
	  cid info

2012-11-11  ddegroot

	* [r3819] src/sccp_hint.c: Cleaned up comment in sccp_hint.c

2012-11-11  marcelloceschia

	* [r3818] src/sccp_hint.c, src/sccp_hint.h: subscribe
	  SCCP_EVENT_DEVICE_ATTACHED

2012-11-11  ddegroot

	* [r3817] src/sccp_hint.c: Added debuglogging to trace why hint
	  processing does not work correctly in asterisk 11. Apparently we
	  have to change sccp_hint to use ast_extension_state_add /
	  ast_extension_state_del and ast_state_cb_info instead. We should
	  move hint event handling to pbx_impl for be able to create a
	  generic wrapper

2012-11-10  ddegroot

	* [r3816] src/sccp_threadpool.c: Prevent endless loop during
	  threadpool_destroy while waiting for threads to end

	* [r3815] src/pbx_impl/ast/ast106.h, src/pbx_impl/ast/ast108.h,
	  src/pbx_impl/ast/ast110.h: (Fix Ast11) Replaced remote call to
	  PBX(get_pbx_module) to retrieve static ast_module_info->self by
	  implementing pbx_manager_register inside astTrunk.c instead

	* [r3814] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast106.h,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast108.h,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/ast110.h,
	  src/pbx_impl/ast/astTrunk.c, src/pbx_impl/ast/astTrunk.h,
	  src/pbx_impl/ast/define.h, src/pbx_impl/pbx_impl.h,
	  src/sccp_cli.c, src/sccp_management.c: (Ast11) Replaced remote
	  call to PBX(get_pbx_module) to retrieve static
	  ast_module_info->self by implementing pbx_manager_register inside
	  astTrunk.c instead

	* [r3813] src/sccp_cli.c: Reenable
	  pbx_manager_register/pbx_manager_unregister calls for asterisk 11

	* [r3812] src/sccp_threadpool.h: Removed non-existent static
	  function definitions from sccp_threadpool.h

	* [r3811] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/ast/astTrunk.h, src/pbx_impl/ast/define.h,
	  src/pbx_impl/pbx_impl.h, src/sccp_cli.c, src/sccp_management.c:
	  Fixed manager_register functions by including a PBX callback
	  function to retrieve the ast_module_info->self pointer which is
	  only available astTrunk.c.

2012-11-09  ddegroot

	* [r3810] Makefile.in, autoconf/extra.m4, configure,
	  doc/Makefile.in, src/Makefile.in: Update num_cpu retrieval in
	  extra.m4

	* [r3809] src/sccp_threadpool.c: Fix debug message. Fix last_resize
	  update after first threadpool decrease to prevent multiple
	  decreases in one loop

2012-11-09  marcelloceschia

	* [r3808] src/pbx_impl/ast/astTrunk.c: fixes asterisk > 10 codec
	  issue

	* [r3807] INSTALL, Makefile.in, aclocal.m4, autoconf/asterisk.m4,
	  autoconf/config.guess, autoconf/config.sub, autoconf/depcomp,
	  autoconf/install-sh, autoconf/missing, configure,
	  contrib/gen_sccpconf/Makefile.in, doc/Makefile.in,
	  src/Makefile.in, src/config.h.in, src/pbx_impl/ast/astTrunk.c:
	  fixes asterisk > 10 codec issue

2012-11-09  ddegroot

	* [r3806] src/sccp_threadpool.c, src/sccp_threadpool.h: Replaced
	  threadpool thread_array with double linked list. Added timedwait
	  condition for thread_exit, to wait for threadpool winddown during
	  threadpool shutdown. If threads do not stop in a timely fashion
	  we kill the threadpool threads without waiting any further.

	* [r3805] src/sccp_threadpool.c: Fix sccp_threadpool when reducing
	  number of threads by skipping self

2012-11-09  marcelloceschia

	* [r3804] src/chan_sccp.h, src/sccp_cli.c,
	  src/sccp_config_entries.h, src/sccp_hint.c: device option to
	  prevent ringin notification for hints

2012-11-09  ddegroot

	* [r3803] src/sccp_cli.c, src/sccp_threadpool.c: Refine
	  debuglogging for sccp_threadpool

	* [r3802] src/chan_sccp.c, src/chan_sccp.h, src/sccp_cli.c,
	  src/sccp_threadpool.c, src/sccp_threadpool.h: Major revision of
	  sccp_threadpool. Using pthread_conditional signaling instead of
	  semaphores, using sccp_dllist instead of locally implemented
	  queue, not resizing pthread_array but using fixed sized array.
	  Continue work without waiting for signal if more work is
	  available.

2012-11-08  ddegroot

	* [r3801] src/sccp_cli.c, src/sccp_threadpool.c: Switched of
	  threadpool resizing for now (While finding the solution for new
	  thread creation)

	* [r3800] src/sccp_threadpool.c: Added jobqueue debuglog entries

2012-11-07  ddegroot

	* [r3799] src/pbx_impl/ast/astTrunk.c: Fix hangup issue when using
	  asterisk 11

	* [r3798] tools/chan-sccp-b_backtrace: Add remarks before creating
	  backtrace

	* [r3797] src/pbx_impl/ast/astTrunk.c: Fix channel allocate for
	  asterisk 11 and up

2012-11-05  ddegroot

	* [r3796] src/sccp_indicate.c: Fixed 1 second delay on pickup
	  (Fixed by Marcello / Reported by Robert)

2012-11-03  ddegroot

	* [r3795] src/.indent.pro, src/conference/.indent.pro,
	  src/pbx_impl/.indent.pro, src/pbx_impl/ast/.indent.pro,
	  src/sccp_config.c, src/sccp_device.c, src/sccp_event.c,
	  src/sccp_featureButton.c, src/sccp_features.c, src/sccp_hint.c,
	  src/sccp_indicate.c, src/sccp_line.c, src/sccp_lock.c,
	  src/sccp_management.c, src/sccp_mwi.c, src/sccp_pbx.c,
	  src/sccp_protocol.c, src/sccp_refcount.c, src/sccp_rtp.c,
	  src/sccp_socket.c, src/sccp_softkeys.c, src/sccp_threadpool.c,
	  src/sccp_utils.c: Reindented code according to newly defined
	  rules

	* [r3794] src/chan_sccp.c, src/sccp_line.c, src/sccp_line.h: Fix
	  retain/release of hotline during module unload/load

2012-11-02  ddegroot

	* [r3793] src/.indent.pro, src/Makefile.in, src/chan_sccp.c,
	  src/conference/.indent.pro[ADD],
	  src/conference/sccp_conference10.c, src/pbx_impl/.indent.pro,
	  src/pbx_impl/ast/.indent.pro, src/pbx_impl/ast/ast.c,
	  src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/pbx_impl.c, src/sccp_actions.c,
	  src/sccp_adv_features.c, src/sccp_appfunctions.c,
	  src/sccp_channel.c, src/sccp_cli.c, src/sccp_conference.c,
	  src/sccp_config.c, src/sccp_device.c, src/sccp_hint.c,
	  src/sccp_indicate.c, src/sccp_line.c, src/sccp_lock.c,
	  src/sccp_management.c, src/sccp_mwi.c, src/sccp_pbx.c,
	  src/sccp_protocol.c, src/sccp_refcount.c, src/sccp_rtp.c,
	  src/sccp_socket.c, src/sccp_softkeys.c, src/sccp_threadpool.c,
	  src/sccp_utils.c: Updated .indent.pro to also indent case
	  statement within switch block. Reindented sources

	* [r3792] AUTHORS, ChangeLog, INSTALL, LICENSE, Makefile.am,
	  Makefile.in, NEWS, README, README.in, TODO,
	  WARNING_USE_BRANCHES_V3.0.txt, WARNING_USE_BRANCHES_V4.0.txt,
	  aclocal.m4, amdoxygen.am, autoconf/acinclude.m4,
	  autoconf/acx_pthread.m4, autoconf/asterisk.m4,
	  autoconf/check_atomics.m4, autoconf/config.guess,
	  autoconf/config.sub, autoconf/depcomp, autoconf/extra.m4,
	  autoconf/install-sh, autoconf/libtool.m4, autoconf/ltoptions.m4,
	  autoconf/ltsugar.m4, autoconf/ltversion.m4,
	  autoconf/lt~obsolete.m4, autoconf/missing, configure,
	  contrib/gen_sccpconf/Makefile.am,
	  contrib/gen_sccpconf/Makefile.in,
	  contrib/gen_sccpconf/gen_sccpconf.c,
	  contrib/gen_sccpconf/gen_sccpconf.h, doc/01_Index.doc,
	  doc/02_What_Is_Chan_SCCP.doc,
	  doc/03_Building_and_Installation_Guide.doc,
	  doc/04_Setup_Guide.doc, doc/05_Features_V3.doc,
	  doc/06_New_Features.doc, doc/07_Frequently_Asked_Questions.doc,
	  doc/08_Supported_Operating_Systems.doc,
	  doc/09_Developers_Guide.doc, doc/10_Sources_Explained.doc,
	  doc/11_Consulted_Documentation.doc, doc/12_Licensing.doc,
	  doc/13_Reporting_Issues_Problems.doc, doc/Makefile.am,
	  doc/Makefile.in, doc/doxygen.cfg, src/Makefile.am,
	  src/Makefile.in, src/chan_sccp.c, src/chan_sccp.h, src/common.h,
	  src/conference/sccp_conference10.c, src/config.h.in,
	  src/pbx_impl/ast/ast.c, src/pbx_impl/ast/ast.h,
	  src/pbx_impl/ast/ast104.h, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast106.h, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast108.h, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/ast110.h, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/ast/astTrunk.h, src/pbx_impl/ast/define.h,
	  src/pbx_impl/pbx_impl.c, src/pbx_impl/pbx_impl.h,
	  src/sccp_actions.c, src/sccp_actions.h, src/sccp_adv_features.c,
	  src/sccp_adv_features.h, src/sccp_appfunctions.c,
	  src/sccp_appfunctions.h, src/sccp_channel.c, src/sccp_channel.h,
	  src/sccp_cli.c, src/sccp_cli.h, src/sccp_cli_table.h,
	  src/sccp_conference.c, src/sccp_conference.h, src/sccp_config.c,
	  src/sccp_config.h, src/sccp_config_entries.h, src/sccp_device.c,
	  src/sccp_device.h, src/sccp_dllists.h, src/sccp_event.c,
	  src/sccp_event.h, src/sccp_featureButton.c,
	  src/sccp_featureButton.h, src/sccp_features.c,
	  src/sccp_features.h, src/sccp_hint.c, src/sccp_hint.h,
	  src/sccp_indicate.c, src/sccp_indicate.h, src/sccp_labels.h,
	  src/sccp_line.c, src/sccp_line.h, src/sccp_lock.c,
	  src/sccp_lock.h, src/sccp_management.c, src/sccp_management.h,
	  src/sccp_mwi.c, src/sccp_mwi.h, src/sccp_pbx.c, src/sccp_pbx.h,
	  src/sccp_protocol.c, src/sccp_protocol.h, src/sccp_refcount.c,
	  src/sccp_refcount.h, src/sccp_rtp.c, src/sccp_rtp.h,
	  src/sccp_socket.c, src/sccp_socket.h, src/sccp_softkeys.c,
	  src/sccp_softkeys.h, src/sccp_threadpool.c,
	  src/sccp_threadpool.h, src/sccp_utils.c, src/sccp_utils.h: Update
	  Sources from original repository

2012-10-31  ddegroot

	* [r3791] src/sccp_channel.h, src/sccp_indicate.c, src/sccp_pbx.c:
	  Removed temporary sccp_channel_get_active_nolock,
	  sccp_channel_get_active_lock function, because they could lead to
	  confusion and memory leaks in the refcount system

	* [r3790] src/sccp_pbx.c: Found cause for channel refcount-release
	  issue, whereby channels were never fully release upon hangup
	  (->memory leak)

2012-10-29  ddegroot

	* [r3789] src/sccp_threadpool.c: Update comment on threadpool /
	  jobqueue handling

	* [r3788] src/sccp_event.c, src/sccp_softkeys.c,
	  src/sccp_threadpool.c: While trying to find why DND Feature was
	  not working correctly i found an issue in threadpool JobQueue Add
	  function. All event handling was being denied because on first
	  use of the threadpool there was no tp_p->jobqueue->head and this
	  caused a return. Issue has been fixed

2012-10-24  ddegroot

	* [r3787] src/sccp_actions.c, src/sccp_device.c: Reverted
	  sccp_actions.c XMLAlarmMessage Handler, Sorted Device by
	  MacAddress

	* [r3786] src/sccp_actions.c, src/sccp_device.c,
	  src/sccp_dllists.h, src/sccp_line.c, src/sccp_utils.c,
	  src/sccp_utils.h: Add devices/lines to Globals in a sorted
	  fashion, makes sccp show devices / lines look a lot cleaner.

	* [r3785] conf/sccp.conf.annotated: Update annotated sccp.conf
	  sample regarding incominglimit (Bug: 3578314 / Alex Miby)

2012-10-14  ddegroot

	* [r3784] src/sccp_actions.c: Fix letohl in handle_tokenrequest
	  (Philipp Teissier)

2012-10-10  ddegroot

	* [r3783] src/sccp_threadpool.c: Checking threadpool, before adding
	  a new job

2012-10-08  ddegroot

	* [r3781] doc/04_Setup_Guide.doc: Update realtime documentation
	  (Fabian Foerster)

	* [r3780] src/sccp_features.c: Add both methods for conference line
	  selection. Including a check if it is the active_line or has a
	  status on hold

	* [r3779] doc/04_Setup_Guide.doc: Update mysql/pgsql section in
	  04_Setup_Guide.doc (Reported by Fabian Foerster)

2012-10-07  ddegroot

	* [r3778] src/sccp_features.c: Starting conference on all connected
	  channels for this line (we need to add extra rules in case of
	  shared line, otherwise we might be stealing channels)

	* [r3777] src/conference/sccp_conference10.c,
	  src/sccp_conference.h, src/sccp_features.c: Updates to
	  conference/sccp_conference10.c

	* [r3776] src/conference/sccp_conference10.c: Merge
	  sccp_conference10.c

	* [r3775] src/conference/sccp_conference10.c,
	  src/sccp_conference.h, src/sccp_features.c: Updates for
	  sccp_conference10.c

2012-10-07  marcelloceschia

	* [r3774] src/conference/sccp_conference10.c: add #if
	  SCCP_CONFERENCE_USE_IMPART == 0 for join_thread

	* [r3773] src/conference/sccp_conference10.c:

2012-10-07  ddegroot

	* [r3772] src/sccp_lock.h: Revert change in sccp_lock.h

	* [r3771] INSTALL, Makefile.in, aclocal.m4, autoconf/config.guess,
	  autoconf/config.sub, autoconf/depcomp, autoconf/extra.m4,
	  autoconf/install-sh, autoconf/missing, configure,
	  contrib/gen_sccpconf/Makefile.in, doc/Makefile.in,
	  src/Makefile.in, src/config.h.in, src/pbx_impl/ast/ast106.c,
	  src/sccp_lock.h, src/sccp_refcount.c: Fixed rwlock/include issue
	  on bigendian/sparc64/asterisk issue (Reported by Philippe
	  Teissier)

2012-10-07  marcelloceschia

	* [r3769] src/conference/sccp_conference10.c:

	* [r3768] src/sccp_features.c:

	* [r3767] INSTALL, Makefile.in, aclocal.m4, configure,
	  contrib/gen_sccpconf/Makefile.in, doc/Makefile.in,
	  src/Makefile.in, src/chan_sccp.c,
	  src/conference/sccp_conference10.c, src/sccp_features.c,
	  src/sccp_refcount.c, src/sccp_utils.c: asterisk 10 conference

2012-10-06  marcelloceschia

	* [r3765] src/sccp_utils.c: use SKINNY_CODEC_NONE

	* [r3764] src/chan_sccp.c: use SKINNY_CODEC_NONE

	* [r3763] src/conference/sccp_conference10.c, src/sccp_features.c:
	  go on with conference on ast 10

	* [r3762] src/chan_sccp.c: cleanup

	* [r3761] src/pbx_impl/ast/ast110.c: use requested codec for
	  inbound calls

	* [r3760] src/chan_sccp.c, src/sccp_channel.c: use requested codec
	  for inbound calls

2012-10-02  ddegroot

	* [r3759] src/conference/sccp_conference10.c: Make
	  sccp_conference10.c compile correctly when sources are being
	  build in a seperate folder

	* [r3758] src/chan_sccp.c: Fix temporary double release of
	  GLOB(hotline)->line

	* [r3757] src/sccp_line.c: Removed unneccessary retain/release in
	  sccp_line_clean

	* [r3756] src/chan_sccp.c: Move closing descriptor back up to
	  beginning of preUnload

	* [r3755] Makefile.in, aclocal.m4, autoconf/config.guess,
	  autoconf/config.sub, autoconf/depcomp, autoconf/install-sh,
	  autoconf/missing, configure, contrib/gen_sccpconf/Makefile.in,
	  doc/Makefile.in, src/Makefile.in, src/config.h.in: Re-ran
	  bootstrap.sh

	* [r3754] ChangeLog: Updated ChangeLog

	* [r3753] autoconf/asterisk.m4, autoconf/extra.m4, src/chan_sccp.h:
	  Moved sizeof(long long) check from chan-sccp.h to
	  autoconf/extra.m4

	* [r3752] src/chan_sccp.c, src/sccp_device.c, src/sccp_line.c,
	  src/sccp_line.h: Fix refcount warnings during module unload

2012-10-01  ddegroot

	* [r3751] src/sccp_socket.c: pthread_join socket session, before
	  sending pthread_kill and don't use s->session_thread =
	  AST_PTHREADT_NULL anymore.

	* [r3750] src/sccp_actions.c: Added missing device release in
	  sccp_handle_SPCPTokenReq on Cross Device Token Request

	* [r3749] src/sccp_channel.c, src/sccp_channel.h, src/sccp_pbx.c:
	  Fix forward on invalid number by checking sccp_channel_forward
	  before changing phone state

	* [r3748] src/sccp_softkeys.c: Fix answerkey crash

	* [r3747] src/chan_sccp.c: Remove extraneous logging during
	  backtrace creation

2012-09-29  marcelloceschia

	* [r3746] src/Makefile.in, src/conference/sccp_conference10.c,
	  src/sccp_conference.c, src/sccp_conference.h,
	  src/sccp_features.c, src/sccp_hint.c, src/sccp_refcount.c,
	  src/sccp_refcount.h: start conference implementation for asterisk
	  10

2012-09-29  ddegroot

	* [r3745] src/sccp_hint.c: Added null/zerolength check for
	  strcasecmp in sccp_hint.c

2012-09-29  marcelloceschia

	* [r3744] Makefile.in, autoconf/config.guess, autoconf/config.sub,
	  autoconf/depcomp, autoconf/install-sh, autoconf/missing,
	  configure, src/Makefile.am, src/Makefile.in, src/conference[ADD],
	  src/conference/sccp_conference10.c[ADD]: start with conference
	  for asterisk 10

2012-09-29  ddegroot

	* [r3743] src/sccp_cli.c: Fix refcount for sccp_remote_answer
	  having possible UNREF as device

	* [r3742] src/sccp_cli.c: Extend width of sccp show lines

2012-09-16  marcelloceschia

	* [r3741] src/sccp_refcount.c: fixes compile warning

2012-09-15  ddegroot

	* [r3740] src/sccp_cli.c: Show line Label when device only has one
	  line assigned to it

	* [r3739] src/sccp_config.c: Reduce sccp.conf parse logging on
	  device registration (with debug=core)

2012-09-13  marcelloceschia

	* [r3738] src/sccp_pbx.c: fixes refcount issue within
	  sccp_pbx_hangup

	* [r3737] src/sccp_pbx.c: fixes refcount issue within
	  sccp_pbx_hangup

2012-08-28  marcelloceschia

	* [r3735] src/chan_sccp.h: fixes #include <byteswap.h> issue

	* [r3734] src/chan_sccp.h: fixes #include <byteswap.h> issue

2012-08-24  marcelloceschia

	* [r3733] src/chan_sccp.h: fixes #include <byteswap.h> issue

2012-08-12  marcelloceschia

	* [r3732] src/sccp_device.c, src/sccp_refcount.c: fixes some issues
	  with refcount

	* [r3731] src/sccp_cli.c, src/sccp_refcount.c, src/sccp_refcount.h:
	  add Diederiks hashtable version

2012-08-05  marcelloceschia

	* [r3729] src/sccp_line.c: resize buffer and use snprintf

2012-07-31  ddegroot

	* [r3728] src/sccp_lock.h, src/sccp_refcount.c: Added smaller
	  locking to refcounted objects when atomic functions are not
	  available

	* [r3725] src/chan_sccp.c: Fix segv_init issue during
	  sccp_postPBX_load

2012-07-30  ddegroot

	* [r3724] Makefile.in, contrib/gen_sccpconf/Makefile.in: Added
	  automatic installation of chan-sccp-b_backtrace script

	* [r3723] ChangeLog, Makefile.am, Makefile.in, autoconf/extra.m4,
	  configure, doc/Makefile.in, src/Makefile.in, src/chan_sccp.c,
	  tools/chan-sccp-b_backtrace[CPY], tools/gen_backtrace[DEL]: Added
	  automatic installation of chan-sccp-b_backtrace script

	* [r3722] tools/gen_backtrace: Add error message to
	  tools/gen_backtrace when gdb is not installed

	* [r3721] src/chan_sccp.c: Printout location of the backtrace file
	  after generation

	* [r3720] src/chan_sccp.c: Printout location of the backtrace file
	  after generation

	* [r3719] src/chan_sccp.c: Remove segvfault test case from sccp
	  reload

	* [r3718] src/chan_sccp.c, tools/gen_backtrace[ADD]: Added
	  automatic backtrace generation to chan_sccp.c, uses
	  tools/gen_backtrace script(need to be installed in execution PATH
	  location) and gdb to generate a complete backtrace when we
	  experience a segfault withing chan-sccp-b.

	* [r3717] src/sccp_line.c: Fixed line return in debug message

2012-07-29  ddegroot

	* [r3716] src/sccp_line.c: Correct the way sccp_lines are
	  destroyed, to prevent double sccp_release on removal from globals
	  list

	* [r3715] src/sccp_actions.c: Corrected debugcat

	* [r3714] src/chan_sccp.h: Debugcat finally working the way i want
	  it to.

	* [r3713] src/sccp_line.c: Rectified refcount identifier for
	  linedevices

	* [r3712] src/sccp_actions.c: Fixed double line retain without
	  correctly releasing before retaking in sccp_handle_keypad_button

	* [r3711] src/sccp_mwi.c: Fixed device refcount release in
	  sccp_mwi_check when on active call

	* [r3710] src/sccp_actions.c: Fixed linereturn in debug message

2012-07-27  ddegroot

	* [r3709] src/sccp_refcount.c: Printout HASH value during refcount
	  object alloc

	* [r3708] src/chan_sccp.h, src/sccp_refcount.c: Increased
	  deadobject time to 2000 ms. Revised obj->dead(boolean) to
	  obj->alive(magic number)

	* [r3707] src/sccp_hint.c: Logical cleanup of
	  sccp_hint_updateLineStateForSingleLine

	* [r3706] src/sccp_hint.c, src/sccp_refcount.c: Added obj->dead to
	  refcount system, checked while returning pointer.

	* [r3705] src/sccp_pbx.c, src/sccp_refcount.c: Added hash pointer
	  verification before returning refcounted object

2012-07-23  marcelloceschia

	* [r3704] src/sccp_utils.c: sccp_addons_clear clear head

	* [r3703] src/sccp_utils.c: fixes leak in sccp_addons_clear

2012-07-22  ddegroot

	* [r3700] doc/Makefile.am: Addding chan-sccp-b_pdf.sty to
	  EXTRA_DIST

2012-07-20  ddegroot

	* [r3698] src/sccp_refcount.c: Fix sccp_refcount CAS32 while loop

	* [r3697] src/sccp_lock.h, src/sccp_refcount.c: Cleaned up
	  sccp_refcount.c by using generalized CAS macro's (defined in
	  sccp_lock.h)

2012-07-19  ddegroot

	* [r3696] src/sccp_config.c, src/sccp_hint.c: Fixed retaining with
	  invalid line in sccp_config.c. Cleanup after marcello's hint fix.

2012-07-19  marcelloceschia

	* [r3695] src/sccp_hint.c: use AST_EVENT_DEVICE_STATE, to solve the
	  hint issue for the moment

	* [r3694] src/sccp_config.c: fixes mwi issue

2012-07-18  ddegroot

	* [r3693] autoconf/extra.m4, configure, src/config.h.in,
	  src/sccp_refcount.c: Removed configure.ac
	  --enable-experimental-refcount because it has become the basis
	  for V4.1. To extend the debugging for refcount there is a new
	  option --enable-refcount-liveobjects, which can be used by
	  developers to trace back faults in retain/release sequences, it
	  should not be necessary to use this option in normal use (keeping
	  a list of liveobjects does cost more memory and processing
	  power).

2012-07-17  ddegroot

	* [r3692] src/pbx_impl/ast/ast108.c: Fixed spurious ´\m' in
	  ast108.c

	* [r3691] configure: Flush configure changes

	* [r3690] autoconf/asterisk.m4, configure, configure.ac,
	  src/config.h.in: Fix PACKAGE_ redefined error. Shorten asterisk
	  header file detection section.

	* [r3689] autoconf/asterisk.m4, configure, configure.ac,
	  src/config.h.in: Reverted removal of PACKAGE_??? redefined 'fix'

	* [r3688] configure, src/Makefile.in, src/sccp_channel.c,
	  src/sccp_device.c, src/sccp_event.c, src/sccp_line.c,
	  src/sccp_refcount.c, src/sccp_refcount.h: Refactored
	  sccp_refcount so that we do not include a pointer to the datatype
	  and destructor in every stored object, but only once. Resulting
	  in smaller memory footprint of the refcount system

	* [r3687] autoconf/asterisk.m4, autoconf/extra.m4, configure,
	  configure.ac, src/Makefile.am, src/Makefile.in, src/config.h.in:
	  Fixed --enable-debug to negate <optimized out> when using gdb
	  (removed the leading -O2 before the -O0 entry). Also added -ggdb3
	  and -g3 to extend the amount of symbol information generated for
	  use by gdb.

	* [r3686] src/sccp_threadpool.c: Added gnu generic version to count
	  available cpu's on system.

	* [r3685] Makefile.in, aclocal.m4, autoconf/extra.m4, configure,
	  configure.ac, contrib/gen_sccpconf/Makefile.in, doc/Makefile.in,
	  src/Makefile.in, src/config.h.in: Cleanup of configure.ac

2012-07-16  ddegroot

	* [r3684] contrib/gen_sccpconf/gen_sccpconf.c: Fix gen_sccpconf to
	  generate correct sccp.conf / sccp.xml / sccp.sql on demand

	* [r3683] src/sccp_socket.c: Suppress error (poll returned 4) when
	  shutting down module

	* [r3682] configure, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c: Update AST_MODULE_INFO

	* [r3681] autoconf/acinclude.m4, autoconf/extra.m4, configure,
	  configure.ac, tools/versioncheck: Using external
	  tools/versioncheck to calculate repository version instead of
	  acincluce.m4 system

	* [r3680] autoconf/acinclude.m4, configure: Corrected configure
	  repository revision number check

	* [r3679] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c: Synced ast106.c, astTrunk.c and
	  ast110.c with ast108.c for module unload

	* [r3678] src/sccp_event.c: Corrected subscribtion to subscription

	* [r3677] src/Makefile.in, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c, src/pbx_impl/ast/define.h: Reordered
	  module loading / unloading, to prevent memory leaks

	* [r3676] src/sccp_device.c: Update comment

	* [r3675] src/sccp_hint.c: Using retain/release of device during
	  sccp_hint_subscribe and sccp_hint_unsubscribe

	* [r3674] src/sccp_event.h: Revised sccp_event_module_stop /
	  sccp_event_unsubscribe

	* [r3673] src/chan_sccp.c, src/sccp_event.c, src/sccp_management.c,
	  src/sccp_mwi.c: Revised sccp_event_module_stop /
	  sccp_event_unsubscribe

	* [r3672] configure, src/Makefile.am, src/Makefile.in,
	  src/config.h.in: Removed objcopy from make install temporarily
	  (negative side effects on second compilation)

	* [r3671] src/chan_sccp.c, src/chan_sccp.h: Replaced messagesCbMap
	  Array Lookup by an array indexed by messageId, saving countless
	  array lookups per call.

	* [r3670] src/sccp_utils.c: Replaced isPrintableChar by isprint
	  (from ctype.h)

2012-07-15  ddegroot

	* [r3669] Makefile.in, autoconf/acinclude.m4, autoconf/config.sub,
	  autoconf/depcomp, autoconf/extra.m4, configure, configure.ac,
	  contrib/gen_sccpconf/Makefile.in, doc/Makefile.in,
	  src/Makefile.am, src/Makefile.in, src/chan_sccp.c,
	  src/chan_sccp.h, src/config.h.in, src/pbx_impl/ast/ast.c,
	  src/pbx_impl/ast/ast104.h, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast106.h, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast108.h, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/ast110.h, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/ast/astTrunk.h, src/pbx_impl/pbx_impl.c,
	  src/pbx_impl/pbx_impl.h, src/sccp_actions.c,
	  src/sccp_adv_features.c, src/sccp_appfunctions.c,
	  src/sccp_channel.c, src/sccp_cli.c, src/sccp_conference.c,
	  src/sccp_config.c, src/sccp_device.c, src/sccp_event.c,
	  src/sccp_event.h, src/sccp_featureButton.c, src/sccp_features.c,
	  src/sccp_hint.c, src/sccp_indicate.c, src/sccp_line.c,
	  src/sccp_lock.c, src/sccp_management.c, src/sccp_mwi.c,
	  src/sccp_pbx.c, src/sccp_protocol.c, src/sccp_refcount.c,
	  src/sccp_rtp.c, src/sccp_socket.c, src/sccp_softkeys.c,
	  src/sccp_threadpool.c, src/sccp_utils.c: Use autoconf ability to
	  compile in a builddir. #include "config.h" has been replaced by
	  #include <config.h> so that it will be searched. Added -I. to
	  CFLAGS, to search for <config.h>. Adapted autocon/acinclude.m4
	  CS_CHECK_VERSION to search in ac_dir instead of builddir for
	  svn/git/hg revision

	* [r3668] Makefile.in, aclocal.m4, autoconf/extra.m4, configure,
	  contrib/gen_sccpconf/Makefile.in, doc/Makefile.in,
	  src/Makefile.am, src/Makefile.in: If /usr/lib/debug exists we add
	  our debug symbols there, before stripping

	* [r3667] debian/changelog, debian/control, debian/rules: Added
	  debian chan-sccp-b-dbg package, to contain debug symbols

	* [r3666] src/sccp_pbx.c: Prevent null pointer dereference, in
	  converyor

	* [r3665] src/sccp_cli.c: Prevent null pointer dereference

	* [r3664] src/sccp_event.c: reinstated sccp_event_unsubscribe.
	  Fixed major bug in subscribtions[i].sync traversal during
	  event_fire handling, only the first event callback would be
	  fired. i needed to substituted for n (maybe using these kinds of
	  counter variables can be counter productive at times).

	* [r3663] src/sccp_line.c: Removed list locks during line_kill and
	  line_clean, keep giving error and cannot find the reason why,
	  then again they are not very important when using safe list
	  traversal at this stage.

2012-07-14  ddegroot

	* [r3662] src/sccp_config.c: Simplify sccp_config_parse_variables
	  (including skip for templated config entries)

	* [r3661] src/sccp_event.c: Revert sccp_event_unsubscribe, using
	  free on an array might not be so smart

	* [r3660] src/pbx_impl/ast/define.h, src/sccp_dllists.h: Update
	  define.h

	* [r3659] src/pbx_impl/ast/astTrunk.c, src/pbx_impl/ast/astTrunk.h,
	  src/sccp_cli.c, src/sccp_management.c: Making progress with
	  asterisk-trunk. Trying to create correct ast_channel alloc

	* [r3658] src/pbx_impl/ast/ast.c, src/pbx_impl/ast/define.h: Add
	  pbx_channel_blocker and pbx_channel_blockproc to be able to
	  compile against asterisk-trunk again

	* [r3657] src/sccp_socket.c: Reducing pbx_log to sccp_log when
	  socket connection closed

	* [r3656] src/sccp_config.c, src/sccp_device.c, src/sccp_line.c:
	  Move d->variable / l->variable destory to device / line
	  destuctors

	* [r3655] src/sccp_config.c, src/sccp_utils.c, src/sccp_utils.h:
	  Fixed memoryleak in sccp_utils.c by replacing methode in
	  sccp_config_parse_variables and removing sccp_create_variable
	  function

	* [r3654] src/chan_sccp.c, src/sccp_event.c, src/sccp_event.h,
	  src/sccp_management.c, src/sccp_mwi.c: Fix memory leak in
	  sccp_event.h because of missing sccp_event_unsubscribe (alloc in
	  sccp_event_subscribe)

	* [r3653] src/sccp_hint.c: Fix memory leak during device unregister
	  in sccp_hint.c

	* [r3652] src/sccp_device.c, src/sccp_line.c: Cleanup d->variables
	  / l->variables during cleanup

	* [r3651] src/pbx_impl/ast/define.h, src/sccp_dllists.h,
	  src/sccp_refcount.c: Fixed list/refcount mutex_destroy issue when
	  asterisk has been compiled with DEBUG_THREADS, by using
	  ast_mutex_init_notracking for sccp_dllists.h

2012-07-13  ddegroot

	* [r3650] src/sccp_channel.c, src/sccp_rtp.c: Update RTP/UDP
	  Logging showing correct ip-address / port information (clean up
	  after several trials)

	* [r3649] src/sccp_device.c, src/sccp_socket.c: Changed session
	  addDevice / removeDevice, inversion of release and session=NULL

	* [r3648] src/sccp_channel.c, src/sccp_rtp.c, src/sccp_socket.c:
	  Update RTP/UDP Logging showing correct ip-address / port
	  information (found issue with pbx_inet_ntoa). Suppress memory
	  usage notification of thread

2012-07-13  marcelloceschia

	* [r3647] src/sccp_actions.c: remove warning

2012-07-13  ddegroot

	* [r3646] src/sccp_actions.c, src/sccp_channel.c, src/sccp_rtp.c:
	  Update RTP/UDP Logging showing correct ip-address / port
	  information (found issue with pbx_inet_ntoa)

	* [r3645] src/sccp_rtp.c: Update sccp_channel test logging with
	  another example4

	* [r3644] src/sccp_channel.c, src/sccp_rtp.c: Update sccp_channel
	  test logging with another example3

2012-07-13  marcelloceschia

	* [r3643] Makefile.am: need isntall

2012-07-13  ddegroot

	* [r3642] src/sccp_channel.c: Update sccp_channel test logging with
	  another example

	* [r3641] doc/Makefile.in, src/Makefile.in, src/sccp_channel.c:
	  Update sccp_channel test logging with another example

	* [r3640] src/sccp_actions.c, src/sccp_channel.c, src/sccp_rtp.c,
	  src/sccp_rtp.h: Updated RTP/UDP ip-addtess Logging for
	  sccp_channel_startmediatransmission,
	  sccp_handle_open_receive_channel_ack and sccp_rtp_set_phone.

	* [r3639] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/pbx_impl.h: Implemented PBX(getPeer) functions.
	  Updated logging in PBX(set_peer) function

	* [r3638] src/pbx_impl/ast/ast.c: Added ast_channel->blocked but no
	  blocker during requestHangup (wait for blocker to be present
	  before commencing softhangup)

2012-07-12  ddegroot

	* [r3636] ., ChangeLog, Makefile.in, contrib/gen_sccpconf, doc,
	  doc/Makefile.am, doc/Makefile.in, src, src/Makefile.am,
	  src/Makefile.in: Fix release system for V4.1. Update svnignore

	* [r3635] ChangeLog, Makefile.am, Makefile.in,
	  contrib/gen_sccpconf/gen_sccpconf.h, src/Makefile.in: Fix
	  gen_sccpconf to compile against changed V4.1
	  src/sccp_config_entries.h

	* [r3634] contrib/gen_sccpconf/Makefile.am,
	  contrib/gen_sccpconf/Makefile.in, src/Makefile.am,
	  src/Makefile.in: Fix make release procedures for V4.0 and trunk

2012-07-11  ddegroot

	* [r3633] src/pbx_impl/ast/ast108.c: Possible solution for current
	  audio issues

	* [r3632] src/pbx_impl/ast/ast108.c, src/sccp_rtp.c: Possible
	  solution to multihomes audio issue

	* [r3631] src/pbx_impl/ast/astTrunk.c: Fix warning during compile
	  against asterisk-trunk

2012-07-10  ddegroot

	* [r3630] src/sccp_pbx.c: fix sccp_pbx.c compilation against
	  asterisk-trunk by using indirect pbx_impl channel functions

	* [r3629] Makefile.in, autoconf/acinclude.m4, configure: Fix git
	  version check -> bootstrap

	* [r3628] ChangeLog, Makefile.am, Makefile.in,
	  autoconf/acinclude.m4, autoconf/extra.m4, configure,
	  tools/versioncheck: Updated git versioncheck to not include
	  line-returns. Update ChangeLog

	* [r3627] configure: Fix git version check -> bootstrap

	* [r3626] autoconf/acinclude.m4, tools/versioncheck: Fix git
	  version check

	* [r3625] autoconf/acinclude.m4, configure, tools/versioncheck:
	  Fixed version check for newer svn version that do not have a .svn
	  in every subdir anymore

	* [r3624] autoconf/acinclude.m4, configure,
	  tools/versioncheck[ADD]: Revised svn/git/hg revision acinclude.m4

	* [r3623] src/pbx_impl/ast/ast.c: Replaced CS_AST_HAS_TECH_PVT with
	  CS_AST_CHANNEL_PVT_CMP_TYPE and removed warning when pbx_channel
	  type != SCCP

	* [r3622] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/pbx_impl.h, src/sccp_pbx.c: Fixed coredump caused by
	  faulty sccp_wrapper_asterisk_allocPBXChannel

	* [r3621] src/pbx_impl/ast/ast.c, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c, src/sccp_pbx.c, src/sccp_pbx.h:
	  Reverted changes in sccp_pbx_channel_allocate because of issues
	  when used by asterisk 1.8 (resolving). Updated sccp_pbx_call to
	  be called using sccp_channel_t, moved the ast_channel side of
	  things to pbx_impl

2012-07-09  ddegroot

	* [r3620] src/sccp_threadpool.c: Silence CPU_COUNT warning

	* [r3619] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/pbx_impl.h: Silence pedantic gcc

2012-07-09  marcelloceschia

	* [r3618] src/pbx_impl/ast/ast108.c: Merge failure

	* [r3617] src/pbx_impl/ast/astTrunk.c: Made all the changes
	  necessary to astTrunk.c to be able to compile against
	  asterisk-trunk again

	* [r3616] src/pbx_impl/ast/ast108.c: Added set_call_forward to
	  ast108.c

2012-07-09  ddegroot

	* [r3615] autoconf/acinclude.m4, configure: Fix bad substitution
	  error (2)

	* [r3614] Makefile.in, autoconf/acinclude.m4, configure,
	  doc/Makefile.in, src/Makefile.in: Fix bad substitution error

2012-07-08  marcelloceschia

	* [r3612] src/pbx_impl/ast/ast108.c: merge

	* [r3611] autoconf/asterisk.m4, configure, src/pbx_impl/ast/ast.c,
	  src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/ast/astTrunk.h, src/pbx_impl/ast/define.h,
	  src/pbx_impl/pbx_impl.h, src/sccp_features.c: remove localbuild

	* [r3610] src/pbx_impl/ast/ast108.c: Fixed pbx_string_field_set

	* [r3608] autoconf/acinclude.m4, autoconf/asterisk.m4, configure:
	  Update -with-asterisk find method. Added default include file for
	  AC_CHECK_HEADER calls

	* [r3607] Makefile.in, configure, doc/Makefile.in, src/Makefile.in,
	  src/sccp_channel.c: Check if setChannelLinkedId is not NULL

	* [r3606] .gitignore, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c, src/pbx_impl/ast/astTrunk.h,
	  src/pbx_impl/ast/define.h, src/pbx_impl/pbx_impl.h,
	  src/sccp_actions.c, src/sccp_channel.c, src/sccp_cli.c,
	  src/sccp_features.c, src/sccp_pbx.c: Changes for asterisk-trunk.
	  Moved most ast_channel get/set functions to pbx_impl.

2012-07-07  ddegroot

	* [r3605] Makefile.in, autoconf/asterisk.m4, configure: Fixed
	  missing ' in asterisk.m4

	* [r3604] autoconf/asterisk.m4, configure, src/config.h.in,
	  src/pbx_impl/ast/ast.h, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c, src/pbx_impl/ast/astTrunk.h,
	  src/pbx_impl/ast/define.h, src/pbx_impl/pbx_impl.h,
	  src/sccp_channel.c: Started working on compilation against
	  asterisk-trunk. Not finished.

2012-07-07  marcelloceschia

	* [r3603] autoconf/asterisk.m4: trunk check

	* [r3602] autoconf/asterisk.m4: trunk check

	* [r3601] Makefile.in: I need isntall ;)

2012-07-06  ddegroot

	* [r3600] src/sccp_refcount.h: First introduction of 'with_ref'
	  operator

	* [r3599] src/pbx_impl/ast/ast.c, src/pbx_impl/ast/ast.h,
	  src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast106.h,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast108.h,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/ast110.h,
	  src/pbx_impl/ast/astTrunk.c, src/pbx_impl/ast/astTrunk.h: Fixed
	  skinny_codecs2pbx_codec_pref compile warnings when using asterisk
	  1.10. Fixed ast_channel_ref / ast_channel_unref warnings during
	  compilation against asterisk 1.10

	* [r3598] src/sccp_hint.c: Corrected hint notification during
	  registering/unregistering devices

2012-07-04  ddegroot

	* [r3597] autoconf/extra.m4, configure, src/Makefile.in: Added
	  FORTIFY_SOURCE and stack-protector to compile options to find
	  bufferoverflows and stack-smashing

	* [r3596] src/sccp_device.c: Cleanup of sccp_dev_forward_status

	* [r3595] src/sccp_actions.c: Moved
	  configurationStatistic.numberOfLines++ to sccp_line_addDevice

	* [r3594] src/sccp_line.c: Added check in sccp_line_addDevice

	* [r3593] src/Makefile.am, src/sccp_channel.c, src/sccp_cli.c,
	  src/sccp_device.c, src/sccp_featureButton.c, src/sccp_features.c,
	  src/sccp_hint.c, src/sccp_line.c, src/sccp_management.c,
	  src/sccp_utils.c, src/sccp_utils.h: Renamed
	  sccp_utils_getDeviceConfiguration to sccp_linedevice_find.
	  Extended logging in sccp_linedevice_find to ease tracing

	* [r3592] src/sccp_refcount.c: data needs to be the last entry in
	  the refcount_object struct to make the encapsulation by the
	  refcount_objects as small as possible

	* [r3591] src/sccp_pbx.c: Fix autoanswer issue (retain / release of
	  linedevice and device in sccp_pbx_call_autoanswer_thread was
	  wrong

2012-07-02  ddegroot

	* [r3590] src/sccp_hint.c, src/sccp_indicate.c, src/sccp_pbx.c:
	  Tracing down autoanswer bug when dialed from dialplan_app. Small
	  fixes / cleanups and updates

2012-07-01  ddegroot

	* [r3589] src/sccp_threadpool.c: Prevent warning about unintialized
	  variable during compilation of sccp_threadpool.c

	* [r3588] src/sccp_pbx.c: Prevent crash when linedevice->device =
	  NULL during sccp_pbx_hangup

	* [r3587] src/sccp_hint.c: Reinstated event handled hint, except if
	  AST_DEVICE_UNKNOWN

	* [r3586] src/sccp_actions.c, src/sccp_hint.c: Replaced hint
	  pbx_event_new by pbx_devstate_changed function, which uses the
	  event system in the background but also forces the update
	  correctly using the ast_cond_signal. This expedites the hint
	  update a lot quicker, and solves the issue where hints are not
	  always processed on first sccp device registration. Extended a
	  number of hint logging lines to explain what is happening more
	  precisely.

2012-06-30  ddegroot

	* [r3585] doc/05_Features_V3.doc: Updated button samples in
	  documentation

	* [r3582] ChangeLog, conf/sccp.conf, doc/05_Features_V3.doc: Fix
	  button samples in documentation and sample config files

	* [r3581] src/sccp_actions.c, src/sccp_refcount.c: Revert
	  refcountval back so that compilation on openwrt works

	* [r3580] src/sccp_actions.c: Use strncpy instead of
	  sccp_copy_string to set char array to default value.

	* [r3579] src/sccp_refcount.c: Allow for large refcountval on
	  system that implement CAS64

	* [r3578] src/sccp_channel.c: Use strncpy instead of
	  sccp_copy_string to set char array to default value.

	* [r3577] src/sccp_event.c: Fix refcount_isRunning check

	* [r3576] autoconf/check_atomics.m4, configure, src/chan_sccp.h,
	  src/sccp_device.c, src/sccp_refcount.c: Make compile on openwrt
	  using new check_atomic.m4 rules

	* [r3575] src/sccp_actions.c: Fix request for speeddials during
	  registration in sccp_handle_line_number

2012-06-29  ddegroot

	* [r3574] src/sccp_threadpool.c, src/sccp_threadpool.h: Reindented
	  sccp_threadpool comments

	* [r3573] src/sccp_threadpool.c, src/sccp_threadpool.h: Revised
	  semaphore issue by mapping sem_init / sem_desttroy to equivalent
	  mac osx commands

	* [r3572] src/sccp_threadpool.c: Revised semaphore issue by mapping
	  sem_init / sem_desttroy to equivalent mac osx commands

	* [r3571] src/sccp_threadpool.c: Add removal the named semaphore
	  after module unload for Darwin / MacOSX.

	* [r3570] src/sccp_threadpool.c: Added MacOSX specific fix. MacOSX
	  does not seem to support unnamed semaphore, therefor added
	  named-semaphore for this platform. (Jucky thing is that all the
	  functions for unnamed semaphores are implemented but just return
	  -1 when called.... NICE).

	* [r3569] src/sccp_threadpool.c: Added error information when
	  sem_wait fails in sccp_threadpool_do

	* [r3568] src/sccp_socket.c: Fix module unload chan_sccp by not
	  using pthread_cancel in sccp_socket.c, just waiting until
	  session_stop does it's work.

	* [r3567] src/sccp_device.c, src/sccp_event.c, src/sccp_features.c,
	  src/sccp_indicate.c, src/sccp_line.c: retain refcounted objects
	  before calling sccp_event_fire so that the object is retained
	  over the live time of the event. Out of order execution could
	  release the object before the event has been fired, this needs to
	  be prevented.

	* [r3566] src/sccp_socket.c: Use sccp_socket_stop_sessionthread
	  from withing sccp_socket.c

	* [r3565] src/sccp_hint.c: Add checks against null-pointer
	  dereference. Skip processing hint subscriptions when module is
	  unloading.

	* [r3564] src/sccp_device.c: Malloc moo_t by message pkt_len
	  instead of maximum moo_t size

	* [r3563] src/sccp_actions.c: Use sccp_socket_stop_sessionthread to
	  replace pthread_cancel

	* [r3562] src/sccp_socket.c: Externalized
	  sccp_socket_stop_sessionthread so that chan_sccp.c preUnload can
	  use it to tear down the socket session correctly

	* [r3561] src/chan_sccp.c, src/sccp_socket.h: Externalized
	  sccp_socket_stop_sessionthread so that chan_sccp.c preUnload can
	  use it to tear down the socket session correctly

	* [r3560] src/sccp_threadpool.c: Replaced exit(0) in
	  sccp_threadpool_do by a return during sem_wait

	* [r3559] src/sccp_event.c, src/sccp_refcount.c,
	  src/sccp_refcount.h: Added sccp_refcount_isRunning function, so
	  that sccp_event can check before trying to malloc new refcounted
	  object

	* [r3558] src/chan_sccp.h, src/sccp_refcount.c: Fix cleanup loop on
	  refcount teardown

	* [r3557] src/sccp_hint.c: Check if memory returned from REQ() is
	  malloced correctly, before using r.

	* [r3556] src/sccp_threadpool.c: Fix sem_wait looking at previously
	  free-ed memory during threadpool_destroy

2012-06-28  marcelloceschia

	* [r3552] src/sccp_softkeys.c: change the way we handle speeddials

	* [r3551] src/sccp_hint.c: change the way we handle speeddials

	* [r3550] src/sccp_actions.h: change the way we handle speeddials

	* [r3549] src/sccp_actions.c: change the way we handle speeddials

	* [r3548] src/sccp_device.c, src/sccp_device.h: do not alloc a new
	  speeddial, just use the given structure

	* [r3547] src/chan_sccp.h: add valid flag to speeddial

	* [r3546] src/chan_sccp.h: add valid flag to speeddial

	* [r3545] src/sccp_channel.c, src/sccp_channel.h: make dial const

	* [r3544] src/sccp_pbx.c, src/sccp_pbx.h: make digit const

2012-06-27  ddegroot

	* [r3543] src/sccp_device.c: Fix possible double free in
	  sccp_dev_send

	* [r3542] src/chan_sccp.c, src/sccp_cli.c, src/sccp_config.c,
	  src/sccp_config.h, src/sccp_config_entries.h: Fix
	  loading/unloading module after changes for skipping sccp reload
	  when sccp.conf has not changed

	* [r3541] src/chan_sccp.c, src/sccp_cli.c, src/sccp_config.c,
	  src/sccp_config.h: Only perform 'sccp reload' if sccp.conf has
	  changed

	* [r3540] contrib/llvm-scan-build: Suppress 'Value stored to ??? is
	  never read' when using contrib/llvm-scan-build

	* [r3539] src/sccp_channel.c, src/sccp_device.c, src/sccp_pbx.c:
	  Reduce chance of memory leak during creation of detached threads

2012-06-27  marcelloceschia

	* [r3538] src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c:
	  fixes mem leak

2012-06-26  ddegroot

	* [r3537] autoconf/check_atomics.m4, configure: Fix configure
	  (line8133 unexpected fi)

	* [r3536] ChangeLog, autoconf/check_atomics.m4, configure,
	  src/sccp_device.c: Corrected AO_compare_and_swap compilation
	  issue.

	* [r3535] autoconf/check_atomics.m4, configure: Fixed configure
	  issue for check_atomic

	* [r3534] src/sccp_device.c: Added boemc implementation of compare
	  and swap for messageStack. In the boemc implementation only a
	  boolean version of CAS is available.

	* [r3533] autoconf/check_atomics.m4, configure, src/config.h.in,
	  src/sccp_refcount.c: Added general SCCP_ATOMIC definition.

	* [r3532] src/chan_sccp.h, src/sccp_device.c: Added
	  messageStackLock to use when buildin atomic functions are not
	  available.

	* [r3531] src/sccp_device.c: fix sccp_device when using
	  AO_compare_and_swap casting from int back to char pointer, using
	  uintptr_t type instead of size_t.

	* [r3530] src/sccp_device.c: fix sccp_device when using
	  AO_compare_and_swap casting from int back to char pointer.

	* [r3529] autoconf/check_atomics.m4, configure, src/sccp_device.c:
	  Partial fix sccp_device when using AO_compare_and_swap.

	* [r3528] ChangeLog, autoconf/check_atomics.m4, configure,
	  configure.ac, src/common.h, src/config.h.in, src/sccp_device.c,
	  src/sccp_refcount.c: Added atomic operations fallback to
	  libatomic_ops package available on most platforms. When compiling
	  with a compiler / cpu that does not support atomic functions (for
	  example GCC < 4.1). libatomic_ops can be found here:
	  http://www.hpl.hp.com/research/linux/atomic_ops

2012-06-25  ddegroot

	* [r3527] src/sccp_device.c: Prevent dereferencing null pointer in
	  sccp_dev_cleardisplay

	* [r3526] src/sccp_channel.c: Prevent dereferencing null pointer
	  during transfer when sccp_source_local_channel is not set.

	* [r3525] src/sccp_device.c: Prevent dereferencing null pointer
	  after calling REQ->(sccp_build_packet).

	* [r3524] src/sccp_channel.c: Prevent dereferencing null pointer
	  during transfer when sccp_source_local_channel is not set.

	* [r3523] src/sccp_pbx.c: Make manager_event parameters
	  conditional, to prevent null pointer dereference

	* [r3522] src/sccp_device.c: Check for null before dereferencing

	* [r3521] ChangeLog, INSTALL, Makefile.in, aclocal.m4,
	  autoconf/config.guess, autoconf/config.sub, autoconf/depcomp,
	  autoconf/install-sh, autoconf/missing, configure,
	  contrib/gen_sccpconf/Makefile.in, doc/Makefile.in,
	  src/chan_sccp.c, src/sccp_device.c, src/sccp_mwi.c: Check result
	  of malloc / calloc before use.

	* [r3520] src/sccp_softkeys.c: Prevent dereferencing null pointer
	  in sccp_softkeys.c

	* [r3519] src/sccp_utils.c: Prevent dereferencing null pointer in
	  sccp_utils.c

	* [r3518] src/sccp_mwi.c: Prevent dereferencing null pointer during
	  sccp_mwi_deviceAttachedEvent

	* [r3517] src/sccp_management.c: Prevent dereferencing null pointer

	* [r3516] src/sccp_config.c: Prevent dereferencing null pointer

	* [r3515] src/sccp_channel.c: Prevent memory leak in
	  sccp_channel_forward

	* [r3514] src/sccp_device.c: Prevent memory leak in
	  addMessageToStack (sccp_device.c)

	* [r3513] src/sccp_config.c: Prevent memory leaks in sccp_config.c

	* [r3512] src/sccp_threadpool.c: Release memory after failed init /
	  malloc in sccp_threadpool.c. Check tp_p before use in
	  sccp_threadpool.c

2012-06-25  marcelloceschia

	* [r3511] src/sccp_channel.c: move sccp_free(dual) for errors

2012-06-25  ddegroot

	* [r3510] src/sccp_utils.c: Free ds after usage in
	  sccp_utils.c:explode function

	* [r3509] src/Makefile.in, src/config.h.in, src/sccp_channel.c:
	  Free dual after usage. Prevent memory leak during transfer

2012-06-25  marcelloceschia

	* [r3507] src/pbx_impl/ast/ast.c: does this fix the hangup core
	  dumps?

2012-06-24  marcelloceschia

	* [r3506] src/sccp_features.c: allow cfwd for channel state offhook

	* [r3505] src/sccp_softkeys.c: check ss_action for Dial softkey

	* [r3504] src/sccp_softkeys.c: check ss_action for Dial softkey

	* [r3503] src/sccp_actions.c: fixes issue with 'Device sent a
	  Keypress, but there is no line specified! Exiting'

	* [r3502] src/sccp_actions.c: fixes issue with 'Device sent a
	  Keypress, but there is no line specified! Exiting'

	* [r3501] src/pbx_impl/ast/ast110.c: workaround to fix the audio
	  issue while calling a pared extension

	* [r3500] src/pbx_impl/ast/ast108.c: workaround to fix the audio
	  issue while calling a pared extension

2012-06-21  marcelloceschia

	* [r3498] src/sccp_refcount.c: workaround for gcc < 4.2

	* [r3497] src/sccp_pbx.c: workaround to fix warning: channel.c:4934
	  ast_write: Codec mismatch on channel SCCP/abc-00000001 setting
	  write format to slin16 from ulaw native formats 0x0 (nothing)

2012-06-19  marcelloceschia

	* [r3496] src/sccp_cli.c: fixes MeetMe number display issue
	  reported by Jacob Miles

2012-06-16  marcelloceschia

	* [r3495] src/sccp_config.c: change mwilamp config setting

2012-06-15  marcelloceschia

	* [r3494] contrib/app_sms.patch[ADD]: add app_sms.patch

	* [r3493] configure, src/chan_sccp.h, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/sccp_actions.c,
	  src/sccp_featureButton.c, src/sccp_features.c,
	  src/sccp_management.c, src/sccp_pbx.c: update monitor feature

	* [r3492] src/chan_sccp.h, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/sccp_channel.c, src/sccp_config.c: fixes warnings

	* [r3491] src/sccp_utils.c, src/sccp_utils.h: fix warning

	* [r3490] configure, src/sccp_protocol.h, src/sccp_threadpool.c:
	  fixes indent

	* [r3489] src/sccp_socket.c: fixes 'warning: nested extern
	  declaration of 'pthread_kill'' on FreeBSD

	* [r3488] src/sccp_channel.c, src/sccp_refcount.c: warning fix

	* [r3487] configure, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast106.h: fixes issue with asterisk 1.6

	* [r3486] src/chan_sccp.c, src/pbx_impl/ast/ast108.c,
	  src/sccp_channel.c, src/sccp_threadpool.c: fixes asterisk 1.8
	  issue on FreeBSD

	* [r3485] Makefile.in, aclocal.m4, autoconf/check_atomics.m4[ADD],
	  autoconf/config.guess, autoconf/config.sub, configure,
	  configure.ac, contrib/gen_sccpconf/Makefile.in, doc/Makefile.in,
	  src/Makefile.in, src/config.h.in, src/sccp_device.c,
	  src/sccp_protocol.h: workaround for 'undefined symbol:
	  __sync_val_compare_and_swap_4'

2012-06-10  marcelloceschia

	* [r3482] autoconf/asterisk.m4, configure: fixes configure issue
	  using FreeBSD

2012-06-09  marcelloceschia

	* [r3479] src/sccp_management.c: fixes resume call using AMI
	  functions - reported by Jacob Miles

2012-06-08  marcelloceschia

	* [r3478] src/pbx_impl/ast/ast106.c: fixes dtmf issue reported by
	  Steven Haigh and Jacob Miles

	* [r3477] src/sccp_config.c: fixes debug level value set by
	  sccp.conf

	* [r3476] src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c: fixes dtmf issue reported by Steven
	  Haigh and Jacob Miles

	* [r3475] src/sccp_actions.c: fixes issue with 'Rejecting device:
	  Device Unknown' reported by Alexandre Rodrigues and Jacob Miles

2012-05-29  marcelloceschia

	* [r3473] configure, src/sccp_refcount.c[ADD],
	  src/sccp_refcount.h[ADD], src/sccp_threadpool.c[ADD],
	  src/sccp_threadpool.h[ADD]: add missing files

	* [r3471] src/sccp_indicate.c: resize buffer for incomming call
	  prompt and use safe version of sprintf

	* [r3470] .version, Makefile.am, Makefile.in, TODO, aclocal.m4,
	  autoconf/acinclude.m4, autoconf/asterisk.m4, autoconf/extra.m4,
	  conf/sqlite.sql, conf/sqlite3.sql, configure, configure.ac,
	  contrib/gen_sccpconf/Makefile.in, doc/05_Features_V3.doc,
	  doc/09_Developers_Guide.doc, doc/Makefile.am, doc/Makefile.in,
	  src/.indent.pro, src/Makefile.am, src/Makefile.in,
	  src/chan_sccp.c, src/chan_sccp.h, src/common.h, src/config.h.in,
	  src/pbx_impl/.indent.pro, src/pbx_impl/ast/.indent.pro,
	  src/pbx_impl/ast/ast.c, src/pbx_impl/ast/ast.h,
	  src/pbx_impl/ast/ast104.h, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast106.h, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast108.h, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/ast110.h, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/ast/astTrunk.h, src/pbx_impl/ast/define.h,
	  src/pbx_impl/pbx_impl.h, src/sccp_actions.c, src/sccp_actions.h,
	  src/sccp_adv_features.h, src/sccp_appfunctions.c,
	  src/sccp_appfunctions.h, src/sccp_channel.c, src/sccp_channel.h,
	  src/sccp_cli.c, src/sccp_cli.h, src/sccp_cli_table.h,
	  src/sccp_conference.c, src/sccp_conference.h, src/sccp_config.c,
	  src/sccp_config.h, src/sccp_config_entries.h, src/sccp_device.c,
	  src/sccp_device.h, src/sccp_dllists.h, src/sccp_event.c,
	  src/sccp_event.h, src/sccp_featureButton.c,
	  src/sccp_featureButton.h, src/sccp_features.c,
	  src/sccp_features.h, src/sccp_hint.c, src/sccp_hint.h,
	  src/sccp_indicate.c, src/sccp_indicate.h, src/sccp_labels.h,
	  src/sccp_line.c, src/sccp_line.h, src/sccp_lock.c,
	  src/sccp_lock.h, src/sccp_management.c, src/sccp_management.h,
	  src/sccp_mwi.c, src/sccp_mwi.h, src/sccp_pbx.c, src/sccp_pbx.h,
	  src/sccp_protocol.h, src/sccp_rtp.c, src/sccp_rtp.h,
	  src/sccp_socket.c, src/sccp_socket.h, src/sccp_softkeys.c,
	  src/sccp_softkeys.h, src/sccp_utils.c, src/sccp_utils.h: update
	  to Diederiks refcount version to work strait forward to stable v4

2012-05-04  ddegroot

	* [r3468] conf/sccp.conf, conf/sccp.conf.annotated,
	  conf/sccp_hardware.conf.freepbx, conf/sccp_templated.conf,
	  doc/04_Setup_Guide.doc, src/sccp_hint.c: Update Hints
	  documentation, clarifying the point that we are refering to a
	  dialplan context, and that it needs to be present, and contain
	  hinted extensions. Renamed the speeddial hint-context from hint
	  to hints, overall.

	* [r3467] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast106.h:
	  Updated definition of ast_channel_unref in ast106.h

	* [r3466] src/pbx_impl/ast/ast106.c: Removed forward of prodding
	  during rtp_write

2012-05-03  ddegroot

	* [r3465] src/pbx_impl/ast/ast106.c: Renamed
	  sccp_asterisk_getForwardingForChannel to
	  sccp_asterisk_getForwardOriginator. Renamed
	  pbx_find_channel_by_forwarding_for to
	  pbx_find_forward_originator_channel_by_linkedid. Revised both
	  pbx_find_ functions

	* [r3464] src/pbx_impl/ast/ast106.c, src/sccp_pbx.c: Revised
	  c->parentChannel indication.

	* [r3463] src/pbx_impl/ast/ast106.c, src/sccp_pbx.c: Make
	  FORWARDING_FOR work using new LINKEDID

	* [r3462] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/pbx_impl.h, src/sccp_channel.c, src/sccp_indicate.c,
	  src/sccp_pbx.c: Added setChannelLinkedId, renamed LINKID to
	  LINKEDID. Using new LINKEDID to during ast1.6 indication of
	  remotePeer to originator.

	* [r3461] ChangeLog, src/pbx_impl/ast/ast106.c, src/sccp_pbx.c:
	  Added CS_EXPERIMENTAL 'FORWARDER_FOR' helper flag, to handle
	  sending indication back to original caller. This way
	  hangup/busy/congestion while ringing can be notified to remote
	  end.

	* [r3460] src/chan_sccp.c, src/pbx_impl/ast/ast.c,
	  src/sccp_protocol.c: debug logging changes

2012-05-02  ddegroot

	* [r3459] src/sccp_actions.c: Corrected handle_keypad_button issue
	  when using 7912 phones

	* [r3458] src/pbx_impl/ast/ast.c: revised
	  sccp_wrapper_asterisk_forceHangup

	* [r3457] src/pbx_impl/ast/ast106.c, src/sccp_pbx.c: Fix
	  callforward when using asterisk 1.6. Missing channel unlock in
	  sccp_wrapper_asterisk16_getChannelByName.

	* [r3456] src/pbx_impl/ast/ast.c: update
	  sccp_wrapper_asterisk_requestHangup

	* [r3455] src/pbx_impl/ast/define.h, src/sccp_lock.c: Compile
	  against asterisk 1.6 with lock debugging options

2012-05-01  ddegroot

	* [r3454] src/chan_sccp.h, src/sccp_channel.c: Removed
	  sccp_rtp.isStarted (-MC-). Revised call to
	  sccp_rtp_createAudioServer in
	  sccp_channel_openreceivechannel_locked.

	* [r3453] src/sccp_channel.c: Revised openreceivechannel sligthly

	* [r3452] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c: Update
	  logging text in sccp_wrapper_asterisk??_create_audio_rtp

	* [r3451] src/sccp_channel.c: Fix segfault during cfwdall (Issue
	  reported by Diego Vargus)

2012-04-30  ddegroot

	* [r3450] ChangeLog, src/pbx_impl/ast/ast106.c: Ported setCallerid?
	  fixes by MC (To follow the example of setRedirectPartyId)

	* [r3448] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c: Ported
	  setRedirectedParty fix by MC (CallForward Issue Segfault reported
	  by Diego Vargus during)

	* [r3444] src/sccp_actions.c: Corrected debug message in
	  sccp_handle_soft_key_event

	* [r3443] src/sccp_actions.c: Added
	  sccp_channel_closereceivechannel_locked to startmediatransmission
	  if something went wrong if getting the correct channel

	* [r3442] src/sccp_actions.c: Updated sccp_handle_keypad_button
	  function, to use sccp_find_channel_on_line_byid_locked instead of
	  sccp_channel_find_byid_locked (reduces number searched channels).
	  Removed replacement of l / d when not necessary. Added debug
	  logging if channel was not found.

	* [r3441] src/sccp_pbx.c: Prevent segfault during
	  sccp_pbx_softswitch_locked when checking c->owner->pbx

	* [r3440] src/sccp_line.c: Add propper locking to
	  sccp_line_addChannel and sccp_line_removeChannel

	* [r3439] doc/04_Setup_Guide.doc: Removed trustphoneip from
	  documentation.

	* [r3438] conf/database_updates/migrate_to_mysql-v5.sql,
	  conf/database_updates/update_mysql_v4.sql,
	  conf/database_updates/update_mysql_v5.sql, conf/mysql-v5.sql,
	  conf/postgres.sql, conf/sccp.conf, conf/sccp.conf.annotated,
	  conf/sccp.conf.freepbx, conf/sccp_hardware.conf.freepbx,
	  conf/sccp_templated.conf, conf/sqlite.sql, conf/sqlite3.sql,
	  src/chan_sccp.h, src/sccp_actions.c, src/sccp_cli.c,
	  src/sccp_config_entries.h: Denoted config option trustphoneip as
	  deprecated. This config option is no longer in use.

2012-04-29  ddegroot

	* [r3434] src/sccp_cli.c, src/sccp_utils.c, src/sccp_utils.h:
	  Correct use of in32_t instead of uint32_t for debugcategories

2012-04-26  ddegroot

	* [r3418] ChangeLog: Update ChangeLogs

	* [r3417] WARNING_USE_BRANCHES_V4.0.txt[ADD]: Added
	  WARNING_USE_BRANCHES_V4.0 because of pending V4.1(refcount)
	  release to trunk.

2012-04-23  ddegroot

	* [r3414] src/sccp_cli.c: Fix sccp message timeout

2012-04-21  marcelloceschia

	* [r3413] src/sccp_conference.c: fixes conference compile issue

2012-04-20  marcelloceschia

	* [r3412] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/sccp_protocol.h: does this fix the hint issue?

2012-04-17  ddegroot

	* [r3410] src/sccp_actions.c: Moved status check during
	  handle_openreceive_channel_ack before looking for channel

	* [r3409] src/sccp_pbx.c: Verify existence of d during
	  sccp_pbx_hangup

	* [r3408] src/sccp_pbx.c: Verify existence of d during
	  sccp_pbx_hangup

2012-04-17  marcelloceschia

	* [r3406] src/sccp_pbx.c: fixes hangup issue

2012-04-15  ddegroot

	* [r3405] ChangeLog: Updated ChangeLog

	* [r3404] src/chan_sccp.c, src/sccp_socket.c: Set lastkeepalive at
	  beginning and end of handle_message. Use keepaliveextratime as a
	  percentage. Re-check lastKeepalive before disconnecting session

	* [r3402] src/sccp_socket.c: Switching of non-blocking more in
	  sccp_socket when using experimental-mode. There is no need to use
	  non-blocking mode when running one thread per session.

	* [r3401] src/sccp_pbx.c: Gaining a little more information when we
	  can't find the line connected to an incoming call

2012-04-15  marcelloceschia

	* [r3398] conf/sccp.conf, conf/sccp.conf.annotated,
	  conf/sccp_hardware.conf.freepbx, conf/sccp_templated.conf: do not
	  enable tzoffset in sample configs

2012-04-14  ddegroot

	* [r3396] src/sccp_socket.c: Backoff a little longer when 'resource
	  temp unavailable' occurs during send

	* [r3395] ChangeLog, src/sccp_socket.c: Fix sccp_session_send
	  continue

	* [r3393] src/sccp_channel.c: Extended logging during transfer
	  completion to find out when we get 'Failed to complete transfer.
	  The channel is not ringing or connected'

	* [r3392] src/sccp_utils.c: Extended logging in
	  sccp_channel_find_on_device_bypassthrupartyid_locked.

	* [r3391] src/sccp_channel.c: Reduced ERROR level to standard
	  sccp_log for 'can't put on hold inactive channel'

	* [r3390] src/sccp_socket.c: Simplyfied sccp_socket_device_thread.
	  No need to reduce the pollTimeout window, preventing the window
	  to become to small. Rewrite sccp_session_send2 method to take
	  into account EINTR/EAGAIN, but folding when a real write error
	  occurs.

	* [r3388] src/sccp_socket.c: Removed recalculation of pollTimeout
	  based on previous message handling. We do not need reduce the
	  pollTimeout window based on a previously handled message.

	* [r3387] src/sccp_pbx.c: Removed extras {

	* [r3386] src/sccp_actions.c, src/sccp_pbx.c: Fixes re-registration
	  issue when phone still has an open channel, but misses timeout. A
	  context switch on a heavily loaded machine and a very low
	  keep-alive time, leads to missing keepalive windows whilst
	  handling a message when a context switch happens.

	* [r3385] src/sccp_channel.c: Handle transfer savely when
	  new_channel does not return a new channel as expected

	* [r3382] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c: Fix bad
	  magic number on hangup (Reported by Diego/Philippe)

2012-04-13  ddegroot

	* [r3381] src/sccp_actions.c: Set devicetype during
	  sccp_handle_tokenReq, so that they are displayed nicely in sccp
	  show sessions

2012-04-12  ddegroot

	* [r3377] src/chan_sccp.h, src/sccp_appfunctions.c,
	  src/sccp_channel.c, src/sccp_cli.c, src/sccp_softkeys.c:
	  Reinstated marcello's transfer patch, to negate the issue with
	  shifting focus during transfer

2012-04-11  marcelloceschia

	* [r3365] src/chan_sccp.h, src/sccp_appfunctions.c,
	  src/sccp_channel.c, src/sccp_cli.c, src/sccp_softkeys.c: revert
	  changes in 3364

	* [r3364] src/chan_sccp.h, src/sccp_appfunctions.c,
	  src/sccp_channel.c, src/sccp_cli.c, src/sccp_softkeys.c: change
	  the way we handle transfer situations

2012-04-10  ddegroot

	* [r3362] src/sccp_channel.c: Added passthrupartyid and callid to
	  logging in sccp_channel.c

	* [r3361] src/chan_sccp.h, src/sccp_actions.c, src/sccp_cli.c:
	  Store the keepaliveinterval for use in sccp show sessions

	* [r3357] src/sccp_actions.c, src/sccp_socket.c: Set the
	  registrationstate during crossover session / sessiontimeout

	* [r3356] src/sccp_actions.c, src/sccp_utils.c, src/sccp_utils.h:
	  Enable openreceive_channel_ack and startmediatransmission_ack
	  functions to function without a valid passthrupartyid on 6911
	  phones

2012-03-30  ddegroot

	* [r3349] conf/sccp.conf.annotated, src/chan_sccp.h,
	  src/sccp_channel.c, src/sccp_channel.h,
	  src/sccp_config_entries.h, src/sccp_indicate.c: Added
	  callwaiting_interval option to sccp.conf. Implemented repeating
	  callwaiting signal.

	* [r3348] src/sccp_cli.c: Added CLI/AMI command to send TokenAck to
	  device (sccp tokenack <deviceId> / SCCPTokenAck <DeviceName>).
	  Makes a phone switch servers in a clustered environment on
	  demand.

	* [r3347] src/chan_sccp.c: Send reset to connected devices during
	  module unload. This will make them reconnect much quicker
	  afterwards

	* [r3346] ChangeLog: Update ChangeLog

	* [r3344] src/sccp_actions.c, src/sccp_protocol.h: Use callID next
	  to passthrupartyid during handle_open_receive_channel_ack,
	  handle_OpenMultiMediaReceiveAck and
	  handle_startmediatransmission_ack, extended debug logging in case
	  of status error

	* [r3342] src/sccp_actions.c: Revised handle_dialtone (migrate from
	  V3.1 commits)

	* [r3341] src/sccp_socket.c: Lowered 'socket read() zero length'
	  status from WARNING to NOTICE (migrate from V3.1 commits)

	* [r3340] src/sccp_event.c: Indent debug output from Fire event and
	  event type, to follow the flow of other related messages (migrate
	  from V3.1 commits)

	* [r3339] src/sccp_actions.c, src/sccp_socket.c, src/sccp_socket.h:
	  Extended logging during handle_register. Allow unregister message
	  with valid s->device (needs direct access to sccp_session_send2).
	  Handle startmediatransmission with 69xx phone models that do no
	  always provide passthrupartyid in their messages. (migrate from
	  V3.1 commits)

	* [r3338] src/chan_sccp.c: Use one exit point in
	  check_session_message_device. Unregister Message does not need
	  s->device to be able to be handled (migrate from V3.1 commits)

	* [r3337] src/sccp_socket.c: Update warnings in sccp_socket.c. Do
	  not close session when a complete message could not be delivered,
	  if necessary session timeout will take care of the cleanup. Add
	  6911 phones to list of phones that need addional time for
	  keepalive. (migrate from V3.1 commits)

	* [r3336] src/sccp_device.c: Clarify device debug messages (migrate
	  from V3.1 commits)

2012-03-27  marcelloceschia

	* [r3320] src/sccp_actions.c: more robustness for default line
	  configuration

2012-03-27  ddegroot

	* [r3319] conf/sccp.conf.annotated: Updated annotated sccp.conf
	  softkey example to keep the transfer button in the same place
	  during transfer

	* [r3318] src/sccp_channel.c: Fix unlock issue during transfer when
	  sccp_channel_new did not return a valid channel

2012-03-25  marcelloceschia

	* [r3317] src/sccp_features.c: workaround to for voicemail button

2012-03-24  ddegroot

	* [r3316] src/sccp_features.c: Extended debug message on Failure of
	  getting usable instance on sccp_feat_voicemail

	* [r3315] src/sccp_features.c: Fix voicemail to get
	  defaultLineInstance or 1 if lineInstance has not been provided

	* [r3314] src/sccp_features.c: Fix voicemail to get
	  defaultLineInstance or 1 if lineInstance has not been provided

2012-03-14  ddegroot

	* [r3313] ChangeLog, Makefile.in, doc/Makefile.in, src/config.h.in:
	  Update Makefile.in files and Changelog

	* [r3312] src/pbx_impl/ast/define.h: Revert accidental checkin of
	  define.h

	* [r3311] src/Makefile.in, src/pbx_impl/ast/define.h,
	  src/sccp_config.c: Fixes sccp_config_set_defaults bug, now
	  multiple entries defaults from globals section are parsed
	  correctly

2012-03-09  ddegroot

	* [r3310] src/sccp_protocol.c: Fix byteorder on
	  r->msg.StartMediaTransmission.bel_remoteIpAddr following other
	  methods in sccp_protocol.c (bigendian) (Philippe Teissier)

	* [r3309] src/sccp_config.c, src/sccp_device.c: Fix crossdevice
	  registration on module unload/load.

	* [r3308] src/sccp_actions.c: Fix phone_features parsing for
	  bigendian machines on registration to retrieve protocolversion

2012-03-08  ddegroot

	* [r3307] configure: Update configure, to match changes extra.m4 in
	  revision 3305

	* [r3306] src/sccp_cli.c, src/sccp_config.c,
	  src/sccp_config_entries.h, src/sccp_utils.c, src/sccp_utils.h:
	  Fix permit/deny sccp_ha_append in sccp_utils.c. Added ha output
	  to sccp_show_globals and sccp_show_device, for debugging
	  purposes.

	* [r3305] autoconf/extra.m4, configure: Removed
	  -Wno-unused-but-set-variable because of negative side effect on
	  certain platforms (debian lenny->
	  http://xen.1045712.n5.nabble.com/xen-4-0-testing-test-7147-regressions-FAIL-td4415622.html)

	* [r3303] autoconf/extra.m4, configure: Add checks for
	  byteorder.h/endian.h/signal.h/assert.h/etc to autoconf/extra.m4
	  to be used in common.h

	* [r3302] src/common.h, src/config.h.in, src/sccp_lock.h: Fix for
	  sccp_lock.h when asterisk is compiled with DEBUG CHANNEL LOCKS.
	  Added checks for common.h includes.

2012-03-03  ddegroot

	* [r3301] src/sccp_management.c: updated uses of strcaseequals
	  function in sccp_management.c

	* [r3300] src/sccp_config.c, src/sccp_hint.c,
	  src/sccp_management.c, src/sccp_utils.c, src/sccp_utils.h:
	  Changed sccp_strcmp and sccp_strcasecmp to sccp_strequals /
	  sccp_strcaseequals and reversed function output plus all
	  use-cases of this function in sccp_config and sccp_hint.

	* [r3299] src/sccp_config.c, src/sccp_utils.c: Fix addButton reload
	  for lines with same options. Fix sccp_strcasecmp, sccp_strcmp
	  when both parameters are zero returning FALSE instead of TRUE
	  (might be counter intuitive and name should possible change to
	  sccp_strequal with reversed return values)

	* [r3298] src/chan_sccp.c: Fix locking issue for GLOB(devices)
	  between preUnload and device_clean

	* [r3297] src/sccp_config.c, src/sccp_config_entries.h: Fix device
	  reset on sccp reload

	* [r3296] src/sccp_config.c: Fix Warning because of empty button

2012-03-02  ddegroot

	* [r3295] src/sccp_lock.c: Remove use of log_show_lock (Philipep
	  Teissier / Sparc64 / Asterisk 1.6.2.22)

2012-03-01  ddegroot

	* [r3294] src/chan_sccp.h, src/sccp_channel.c, src/sccp_utils.c:
	  Fix Solatis Boolean mapping

2012-02-28  ddegroot

	* [r3293] src/chan_sccp.h, src/sccp_config.c, src/sccp_device.c,
	  src/sccp_socket.c: Fixes for compile issues on solaris /
	  openindiana

2012-02-27  ddegroot

	* [r3291] src/chan_sccp.h, src/sccp_utils.c: Reduce DEBUGCAT Enum
	  to fit in uint32_t

2012-02-25  ddegroot

	* [r3290] ChangeLog, autoconf/extra.m4, configure: Irradicate
	  rpl_malloc issues when cross compiling, by updating
	  autocon/extra,m4. Update ChangeLog

	* [r3288] src/sccp_hint.c: Reverted hint change related to Dynamic
	  Speeddial CID (sccp_hint_isCIDavailabe). To switch this feature
	  of use --disable-dynamic-speeddial-cid

2012-02-24  ddegroot

	* [r3287] src/chan_sccp.c, src/sccp_device.c: Removed LOG_NOTICE
	  status from sccp_device_clearMessageFromStack Message, added line
	  retrun to LOG_ERROR message in sccp_hangle_message

	* [r3286] src/sccp_utils.h: Added strdupa -> sccp_strdupa for
	  platforms where /usr/lib/string.h does not provide an
	  implementation

	* [r3285] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast108.h, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/ast110.h, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/ast/astTrunk.h, src/sccp_config.c: removed last
	  traces of strdupa

	* [r3284] src/sccp_actions.c: Replaced instanced of
	  SCCP_DEVICESTATE_... by SCCP_CHANNELSTATE_.... in calls to
	  sccp_hint_lineStatusChanged

	* [r3283] src/chan_sccp.h, src/sccp_config.c, src/sccp_config.h:
	  Fixed faulty return sccp_configurationchange_t values by
	  sccp_valuechange_t

	* [r3282] src/sccp_hint.c: Replaced instanced of
	  SCCP_DEVICESTATE_... by SCCP_CHANNELSTATE_.... in calls to
	  sccp_hint_lineStatusChanged

	* [r3281] src/sccp_socket.c: Fix result unused warning

	* [r3280] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/sccp_config.c: Irradicate ast_strdupa, using sccp_strdupa
	  replacement instead

	* [r3279] src/pbx_impl/ast/ast106.c: Reversed callerid info on
	  ast106.c ast_do_pickup by accident

	* [r3278] autoconf/extra.m4, configure: Reduce depandic warnings
	  raised by llvm/clang compiler using -Wno-ignored-qualifiers
	  during non-DEBUG build

	* [r3277] src/sccp_actions.c, src/sccp_appfunctions.c,
	  src/sccp_cli.c, src/sccp_management.c: Replaced strdupa with
	  sccp_strdupa (because clang compiler cannot find strdupa in
	  asterisk sources)

	* [r3276] src/sccp_config.c: fix llvm complaining about: two or
	  more data types in declaration specifiers

	* [r3275] autoconf/extra.m4, configure, src/common.h,
	  src/config.h.in, src/sccp_socket.c: Fixed compilation regarding
	  poll_compat issues (DARWIN/OSX, BSD, IAX etc). Compilation on
	  Apple OS-X should not work again.

	* [r3274] src/chan_sccp.c, src/sccp_actions.c: Fixed debug warning
	  message

	* [r3273] src/chan_sccp.c, src/sccp_actions.c, src/sccp_cli.c:
	  Extended logging during sccp_handle_message and
	  sccp_handle_soft_key_event. Fixed spelling error in sccp_cli.c

	* [r3272] src/pbx_impl/ast/ast106.c: Partial Fix for audio during
	  gpickup

	* [r3271] src/pbx_impl/ast/ast106.c: Compiling against asterisk
	  1.6.2.11 again... Gpickup still needs to be tested

2012-02-24  marcelloceschia

	* [r3270] src/pbx_impl/ast/ast106.c: fixes compile issue with
	  asterisk 1.6.2

2012-02-23  marcelloceschia

	* [r3269] src/pbx_impl/ast/ast106.c: fix ast_do_pickup issue with
	  ast 1.6.2

2012-02-23  ddegroot

	* [r3268] src/sccp_pbx.c: Fix marcello's calledPartyNumber fix

2012-02-23  marcelloceschia

	* [r3267] src/sccp_pbx.c: update cid name line after connected line
	  update

	* [r3266] src/pbx_impl/ast/astTrunk.c: update cid name line after
	  connected line update

	* [r3265] src/pbx_impl/ast/ast110.c: update cid name line after
	  connected line update

	* [r3264] src/pbx_impl/ast/ast108.c: update cid name line after
	  connected line update

2012-02-23  ddegroot

	* [r3263] src/sccp_actions.c: Fix redial softkey handling when
	  offhook (without lineInstance and callid)

2012-02-21  ddegroot

	* [r3262] src/sccp_softkeys.c: Fix private softkey. Pressing
	  private softkey will only be used for one call and one call only.
	  Privacy Feature Button remains unchanged and will be retained in
	  astdb

2012-02-21  marcelloceschia

	* [r3261] src/sccp_hint.c: disable dynamic speeddial cid

2012-02-19  ddegroot

	* [r3260] src/pbx_impl/ast/ast106.c: Make
	  asterisk-1.6.x-patch-widebandslin16k.patch unneccessary for
	  asterisk 1.6.2.x, by extending the current_RTP_PT payloadtypes on
	  the fly when creating audio_rtp

2012-02-17  ddegroot

	* [r3259] src/sccp_indicate.c: Revert to previous behaviour for
	  SCCP_CHANNELSTATE_DIGITSFOLL (awaiting discussion if we should
	  guard against sending states to phones multiple times when
	  nothing changed)

	* [r3257] src/pbx_impl/ast/ast.c, src/pbx_impl/ast/ast.h,
	  src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c: Fix
	  queue_control/queue_control_data when compiling against asterisk
	  1.6.2.x (Claudius Zingeli)

	* [r3256] src/sccp_indicate.c: Remove setting sccp_dev_set_keyset
	  during digitsfoll when already in that mode

2012-02-15  ddegroot

	* [r3255] src/sccp_config_entries.h: Disabled jitterbuffer by
	  default (set to default:on by accident)

	* [r3254] src/pbx_impl/ast/ast108.c: Convert ast_warning during
	  ast_write codec fix to standard sccp_log

	* [r3253] src/pbx_impl/ast/ast108.c: Remark setOption to resolve
	  compile warning

	* [r3252] src/pbx_impl/ast/ast108.c: hold/resume/no sound issue
	  solved for ast1.8 version below asterisk 1.8.7.0

2012-02-11  marcelloceschia

	* [r3251] src/pbx_impl/ast/ast108.c: add warning for outdated
	  asterisk version with issues ASTERISK-14384, ASTERISK-17502,
	  ASTERISK-17541, ASTERISK-18063, ASTERISK-18325, ASTERISK-18422

2012-02-11  ddegroot

	* [r3250] src/pbx_impl/ast/ast108.c: Test/Fix codec translation
	  after music on hold

2012-02-05  ddegroot

	* [r3249] src/common.h, src/sccp_config.c, src/sccp_event.h: Fix
	  include order for sccp_event.h. Complete
	  sccp_manager_config_metadata

2012-02-02  marcelloceschia

	* [r3248] src/sccp_device.c, src/sccp_line.c, src/sccp_pbx.c,
	  src/sccp_softkeys.c: fixes compile warings

2012-02-02  ddegroot

	* [r3247] src/pbx_impl/ast/ast.c: Fixed hangup issue

	* [r3246] autoconf/asterisk.m4, configure: Revert to using sed
	  instead of expr in asterisk.m4 (Apple / Alistair Galbraith)

2012-02-01  ddegroot

	* [r3245] src/sccp_config.c, src/sccp_config_entries.h: Moved new
	  config data type to EXPERIMENTAL (for while testing), Added
	  documentation to new config data types

	* [r3244] src/chan_sccp.h, src/sccp_config.c,
	  src/sccp_config_entries.h, src/sccp_utils.c, src/sccp_utils.h:
	  Implemented debug config parser using ENUM2INT / ENUMKEYS

	* [r3243] contrib/gen_sccpconf/gen_sccpconf.c,
	  contrib/gen_sccpconf/gen_sccpconf.h, src/sccp_config.c,
	  src/sccp_config_entries.h: Adapted to new sccp_config_entries.h

	* [r3242] src/sccp_config.c, src/sccp_config_entries.h: Added
	  DATA_TYPE Macro to sccp_config.

	* [r3241] src/sccp_config.c, src/sccp_config_entries.h,
	  src/sccp_utils.c, src/sccp_utils.h: Fixed
	  sccp_config_parser_mwilamp

	* [r3240] src/chan_sccp.h, src/sccp_appfunctions.c,
	  src/sccp_channel.c, src/sccp_cli.c, src/sccp_config_entries.h,
	  src/sccp_protocol.h, src/sccp_utils.c, src/sccp_utils.h: Renamed
	  shortname in enum lookups to key (debugcat / codec) to allow for
	  generic access

	* [r3239] src/sccp_config.c, src/sccp_config.h,
	  src/sccp_management.c: Migrated SCCPConfigMetaData AMI Function
	  from refcount project

	* [r3238] src/pbx_impl/ast/ast.c, src/pbx_impl/ast/ast.h,
	  src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/pbx_impl.h, src/sccp_features.c: Migrated
	  forceHangup to pbx_impl from refcount project, fixed possible
	  null pointer dereference in requestHangup (sccp_channel),
	  replaced pbx_hangup in sccp_features.c by PBX(forceHangup)

2012-01-31  ddegroot

	* [r3237] contrib/gen_sccpconf/gen_sccpconf.h: Small refinement to
	  gen_sccpconf.h attribute types

	* [r3236] contrib/gen_sccpconf/gen_sccpconf.c,
	  contrib/gen_sccpconf/gen_sccpconf.h,
	  contrib/gen_sccpconf/sccp_xml_parser.php,
	  src/sccp_config_entries.h: Updated gen_sccpconf, fixed small
	  issues in sccp_config_entries.h

	* [r3235] contrib/gen_sccpconf/gen_sccpconf.c,
	  contrib/gen_sccpconf/sccp_xml_parser.php[ADD]: Added
	  sccp_xml_parser.php sample

	* [r3234] backport_monitor_feature.patch[DEL],
	  contrib/backport_monitor_feature.patch[CPY],
	  contrib/gen_sccpconf/gen_sccpconf.c,
	  contrib/gen_sccpconf/gen_sccpconf.h, src/sccp_cli.c,
	  src/sccp_config.c, src/sccp_config_entries.h: Added xml output to
	  gen_sccpconf (for version independent webfrontend

2012-01-30  ddegroot

	* [r3233] src/pbx_impl/ast/ast.c: Revised requestHangup during sccp
	  channelstate Progress

2012-01-28  ddegroot

	* [r3232] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c: Realigned
	  callback definitions, added queue_control_data callback to
	  ast106, ast110 and astTrunk

	* [r3231] src/sccp_channel.c, src/sccp_protocol.c,
	  src/sccp_protocol.h: Moved startmediatransmission and
	  startmultimediatransmission message to sccp_protocol.c

	* [r3230] src/sccp_channel.c, src/sccp_protocol.c,
	  src/sccp_protocol.h: Moved openmultimediachannel message to
	  sccp_protocol.c

	* [r3229] src/chan_sccp.h, src/sccp_actions.c, src/sccp_channel.c:
	  Renamed SCCP_RTP_STATUS_PROGESS to SCCP_RTP_STATUS_PROGRESS

	* [r3228] src/sccp_channel.c, src/sccp_protocol.c,
	  src/sccp_protocol.h: Moved openreceivechannel message to
	  sccp_protocol.c

	* [r3227] src/sccp_channel.c: Change to using PBX(moh_start) and
	  PBX(moh_stop), use sccp_channel_set_active during hold/resume

	* [r3226] src/sccp_actions.c, src/sccp_channel.c, src/sccp_cli.c,
	  src/sccp_features.c, src/sccp_pbx.c: Change to using
	  PBX(queue_control) and PBX(queue_cotrol_data)

	* [r3225] src/pbx_impl/ast/ast.c, src/pbx_impl/ast/ast.h,
	  src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/ast/define.h, src/pbx_impl/pbx_impl.h: Added
	  moh_start/moh_stop/queue_control and queue_control_data to
	  pbx_impl

2012-01-27  ddegroot

	* [r3224] src/pbx_impl/ast/ast.c: renamed
	  sccp_wrapper_asterisk18_requestHangup to
	  sccp_wrapper_asterisk_requestHangup and moved to ast.c

	* [r3223] src/pbx_impl/ast/ast.c: revert requestHangup to original
	  behaviour (Bob Brown: chan_sccp v4.0 r3221 - Incoming calls
	  nothanging up)

2012-01-26  ddegroot

	* [r3222] src/pbx_impl/ast/ast.c, src/pbx_impl/ast/define.h,
	  src/sccp_features.c: Refix gpickup whilst reenabling previous
	  hangup procedure (Tyler / Bob)

	* [r3221] src/pbx_impl/ast/ast.c, src/pbx_impl/ast/ast.h,
	  src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c: Fixed
	  gpickup -> caused by hangup problem without a valid sccp_channel

	* [r3220] contrib/gen_sccpconf/Makefile[DEL]: Removed generated
	  makefile

	* [r3219] doc/01_Index.doc, doc/05_Features_V3.doc,
	  doc/06_New_Features.doc: Update reference for new features in
	  doxygen

	* [r3218] doc/05_Features_V3.doc, doc/06_New_Features.doc,
	  doc/07_Frequently_Asked_Questions.doc,
	  doc/08_Supported_Operating_Systems.doc,
	  doc/09_Developers_Guide.doc, doc/10_Sources_Explained.doc,
	  doc/11_Consulted_Documentation.doc, doc/12_Licensing.doc,
	  doc/13_Reporting_Issues_Problems.doc, doc/doxygen.cfg,
	  src/pbx_impl/ast/ast.c, src/pbx_impl/ast/ast.h,
	  src/pbx_impl/ast/ast104.h, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast106.h, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast108.h, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/ast110.h, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/ast/astTrunk.h, src/pbx_impl/ast/define.h,
	  src/sccp_channel.c: Update doxygen doc

	* [r3217] doc/06_New_Features.doc[ADD]: Added new doxygen section

	* [r3216] ChangeLog, autoconf/extra.m4, configure,
	  contrib/gen_sccpconf/Makefile, doc/05_Features_V3.doc[CPY],
	  doc/05_New_Features.doc[DEL],
	  doc/06_Frequently_Asked_Questions.doc[DEL],
	  doc/07_Frequently_Asked_Questions.doc[CPY],
	  doc/07_Supported_Operating_Systems.doc[DEL],
	  doc/08_Developers_Guide.doc[DEL],
	  doc/08_Supported_Operating_Systems.doc[CPY],
	  doc/09_Developers_Guide.doc[CPY],
	  doc/09_Sources_Explained.doc[DEL],
	  doc/10_Consulted_Documentation.doc[DEL],
	  doc/10_Sources_Explained.doc[CPY],
	  doc/11_Consulted_Documentation.doc[CPY],
	  doc/11_Licensing.doc[DEL], doc/12_Licensing.doc[CPY],
	  doc/12_Reporting_Issues_Problems.doc[DEL],
	  doc/13_Reporting_Issues_Problems.doc[CPY], doc/doxygen.cfg:
	  Updated V4.0 Doxygen Documentation

2012-01-25  ddegroot

	* [r3215] src/pbx_impl/ast/ast106.c: Fix asterisk16_sendDigits

2012-01-23  ddegroot

	* [r3214] src/pbx_impl/ast/ast.c, src/sccp_pbx.c: Added a check to
	  see if the got a non-zero bridgePeerChannelName

	* [r3213] src/sccp_actions.c: Answering ringing line using the line
	  button (Josip Gracin) analogous to V3.1

	* [r3212] src/sccp_actions.c: Answering ringing line using the line
	  button (Josip Gracin)

	* [r3211] src/chan_sccp.c, src/sccp_utils.c: Reactivated
	  featureStorageBackend

	* [r3210] src/sccp_pbx.c: Removed reference to astChannel during
	  callforward bridging, not set/used anymore ->
	  PBX(getChannelByName)

2012-01-22  marcelloceschia

	* [r3209] src/sccp_pbx.c: use PBX(getChannelByName) to answer
	  forwared channel; change getChannelByName interface definition

	* [r3208] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/pbx_impl.h, src/sccp_pbx.c: use
	  PBX(getChannelByName) to answer forwared channel; change
	  getChannelByName interface definition

2012-01-21  marcelloceschia

	* [r3207] src/pbx_impl/ast/ast.c, src/sccp_pbx.c: changing the
	  pbx_channel_walk_locked function and the way we are searching for
	  a bridged channel, this maybe solves the issue with cfwd

2012-01-14  ddegroot

	* [r3206] src/chan_sccp.h, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c: Only sending DMTF_END, asterisk will
	  generate the DTMF_BEGIN as needed (Thanks to Pavel Troller)

2012-01-13  ddegroot

	* [r3205] conf/sccp.conf.freepbx[ADD],
	  conf/sccp_extensions.conf.freepbx[ADD],
	  conf/sccp_freepbx.conf[DEL],
	  conf/sccp_hardware.conf.freepbx[ADD], configure: Split freepbx
	  sccp.conf samples

	* [r3204] autoconf/config.guess, autoconf/config.sub,
	  autoconf/extra.m4, contrib/gen_sccpconf/Makefile: Re-adding
	  EXPERIMENTAL_MODES

	* [r3203] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c: Improve
	  hangup responsiveness

	* [r3202] src/sccp_device.c, src/sccp_line.c, src/sccp_lock.c,
	  src/sccp_lock.h: Updated debug loggin for refcount retain/release
	  functions

	* [r3201] src/chan_sccp.h, src/sccp_utils.c: Reduce number of
	  database interactions -> improve handling speed and interface
	  responsiveness

2012-01-11  ddegroot

	* [r3200] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c: updated
	  got video video debug message

2012-01-11  marcelloceschia

	* [r3199] src/chan_sccp.h, src/pbx_impl/ast/ast.c,
	  src/sccp_channel.c: Robert: MaxCallBR

2012-01-10  ddegroot

	* [r3198] src/sccp_lock.c: correcting destructor call

	* [r3197] src/sccp_device.c, src/sccp_device.h, src/sccp_line.c,
	  src/sccp_line.h, src/sccp_lock.c, src/sccp_lock.h: inlined
	  retain/release functions to lower the function call cost

	* [r3196] src/config.h.in, src/sccp_device.c, src/sccp_lock.c:
	  Added configure experimental flags

	* [r3195] contrib/gen_sccpconf/Makefile, src/sccp_lock.h: Added
	  no-op's for retain and release when using without
	  --enable-experimental-refcount

	* [r3194] src/sccp_conference.c, src/sccp_conference.h: Revert to
	  old sccp_conference implementation

	* [r3193] src/sccp_channel.c: Fixed sccp_channel_display_callInfo

	* [r3192] src/sccp_channel.c: Added check for existing callInfo
	  structure in sccp_channel_display_callInfo

	* [r3191] src/chan_sccp.h, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c: assigned new experimental-modes to
	  pbx_impl

	* [r3190] autoconf/extra.m4, contrib/gen_sccpconf/Makefile,
	  src/chan_sccp.c, src/sccp_actions.c, src/sccp_channel.c,
	  src/sccp_config.c, src/sccp_device.c, src/sccp_line.c,
	  src/sccp_pbx.c: assigned new experimental-modes

	* [r3189] ChangeLog, Makefile.in, autoconf/extra.m4,
	  contrib/gen_sccpconf/Makefile, src/Makefile.in,
	  src/sccp_device.c, src/sccp_indicate.c, src/sccp_line.c,
	  src/sccp_lock.c, src/sccp_lock.h, src/sccp_mwi.c: temporarily
	  split experimental-mode

2012-01-09  ddegroot

	* [r3188] src/pbx_impl/ast/ast108.c, src/sccp_features.c: Resetting
	  minimum of 3 channels for conference, cleanup ast108.c

	* [r3187] src/sccp_conference.c, src/sccp_features.c: Revised
	  sccp_conference swapAstChannelBridge (not tested)

2012-01-08  ddegroot

	* [r3186] src/pbx_impl/ast/ast106.c, src/sccp_device.c,
	  src/sccp_line.c: corrected ast106.c callerid function

	* [r3185] src/pbx_impl/ast/ast106.c: Fix for callerid in ast106.c

	* [r3184] src/sccp_line.c: First use of refcount during
	  line_addDevice, line_removeDevice add retain device and line for
	  linedevice references

	* [r3183] src/sccp_device.c, src/sccp_line.c, src/sccp_lock.c,
	  src/sccp_lock.h: Updated refcount debug logging

	* [r3182] src/sccp_device.c, src/sccp_line.c: Fixed release

	* [r3181] src/sccp_device.c, src/sccp_device.h, src/sccp_line.c,
	  src/sccp_line.h, src/sccp_lock.h: Returning correct device/line
	  object type from retain/release functions

	* [r3180] src/sccp_lock.c, src/sccp_lock.h, src/sccp_mwi.c,
	  src/sccp_pbx.c: Returning void pointers during retain and release

	* [r3179] src/sccp_lock.c, src/sccp_mwi.c, src/sccp_socket.c:
	  Retain and Release should return the Pointer to the refcounted
	  object or NULL; Fixed destroy_session; removed while loop from
	  sccp_mwi.c

	* [r3178] src/sccp_device.c, src/sccp_line.c: reversed mutex
	  destrox and unlock back

	* [r3177] src/sccp_lock.c: Fix for refcount (< -> >)

	* [r3176] src/pbx_impl/ast/define.h, src/sccp_lock.c: Fix for
	  refcount desctructor call (marcello)

	* [r3175] src/sccp_device.c, src/sccp_line.c, src/sccp_lock.c:
	  small improvements to refcount system

	* [r3174] src/pbx_impl/ast/ast106.c: Adding NotImplemented Warnings
	  to ast106.c

2012-01-08  marcelloceschia

	* [r3173] src/pbx_impl/ast/ast106.c: try to fix cid issue with 1.6

2012-01-08  ddegroot

	* [r3172] src/pbx_impl/ast/ast106.c, src/sccp_pbx.c: Reverted
	  Callerid Setting in sccp_pbx.c

	* [r3171] src/sccp_device.c, src/sccp_indicate.c, src/sccp_line.c,
	  src/sccp_lock.c, src/sccp_lock.h: changed refcounted device/line
	  version to CS_EXPERIMENTAL ifdef blocks (to avoid possible
	  problem during testing)

	* [r3170] src/sccp_device.c, src/sccp_line.c, src/sccp_lock.c:
	  Fixed memory leak in while reference count wrapper is in use

	* [r3169] conf/sccp.conf[CPY], conf/sccp_simple.conf[DEL]: rename
	  sccp_simple.conf to sccp.conf (To make it easier for beginning
	  users)

	* [r3168] Makefile.in, conf/sccp.conf[DEL],
	  conf/sccp.conf.annotated[CPY], conf/sccp_freepbx.conf[CPY],
	  conf/sccp_short.conf[DEL], conf/sccp_simple.conf,
	  conf/sccp_templated.conf[CPY]: renamed some of the sample config
	  files. Added sccp_freepbx.conf sample

2012-01-07  ddegroot

	* [r3167] src/sccp_device.c, src/sccp_line.c, src/sccp_lock.c,
	  src/sccp_lock.h: refcount debug cleanup

	* [r3166] src/sccp_device.c, src/sccp_line.c, src/sccp_lock.c,
	  src/sccp_lock.h: Fix call to retain and release

	* [r3165] src/sccp_indicate.c, src/sccp_lock.c, src/sccp_lock.h:
	  Fixed release assignment in sccp_lock, added debugging to
	  retain/release

	* [r3164] src/Makefile.in, src/pbx_impl/ast/ast108.c,
	  src/sccp_device.c, src/sccp_line.c, src/sccp_line.h,
	  src/sccp_lock.c, src/sccp_lock.h: trial with refcount for device
	  / line instead of locks (experiment)

	* [r3163] src/pbx_impl/ast/define.h, src/pbx_impl/pbx_impl.h,
	  src/sccp_conference.c, src/sccp_conference.h: Fixed conference
	  compile fehler

	* [r3162] src/pbx_impl/ast/ast108.c, src/sccp_pbx.c: Update
	  callerid on incoming call

	* [r3161] src/sccp_channel.c, src/sccp_pbx.c: Update callerid info
	  on incoming call

2012-01-06  ddegroot

	* [r3160] src/sccp_conference.c, src/sccp_conference.h: conference
	  without masquerade using just bridge_depart, bridge_join and
	  bridge_impart

	* [r3159] src/sccp_conference.c: Updated sccp_conference.c to use
	  masqueration swap, no need to start and new ast_pbx thread

2012-01-05  ddegroot

	* [r3158] src/sccp_conference.c: Added comment to sccp_conference
	  for later followup

	* [r3157] src/sccp_conference.c: Fix end_conference and use
	  pbx_pbx_run instead of pbx_pbx_start

	* [r3156] src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c: Fix
	  sccp_wrapper_asterisk1**_alloc_conferenceTempPBXChannel for
	  asterisk 1.8 and higher in regard to linkedid

	* [r3155] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/pbx_impl/pbx_impl.h, src/sccp_conference.c: Added new
	  alloc_conferenceTempPBXChannel function (thanks to Dylan Kulesza)

	* [r3154] src/sccp_conference.c, src/sccp_conference.h:
	  Experimental update to sccp_conference to resume the original
	  channel/dialplan processing after conference hangup

2012-01-04  ddegroot

	* [r3153] src/chan_sccp.h, src/sccp_channel.c, src/sccp_pbx.c:
	  Added callInfo valid copies to channel_transfer

	* [r3152] src/sccp_channel.c, src/sccp_channel.h, src/sccp_pbx.c:
	  Added channel_display_callInfo function

	* [r3151] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast106.h,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast108.h,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/ast110.h,
	  src/pbx_impl/ast/astTrunk.c, src/pbx_impl/ast/astTrunk.h,
	  src/pbx_impl/pbx_impl.h, src/sccp_actions.c, src/sccp_channel.c,
	  src/sccp_config.c, src/sccp_dllists.h, src/sccp_pbx.c: extended
	  callerid implementation; cleaned compiler warnings

2012-01-03  ddegroot

	* [r3150] src/sccp_pbx.c: Fix for incoming callerid

	* [r3149] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c: reallign
	  ast functions

2012-01-02  ddegroot

	* [r3148] src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c:
	  Fix compile cast-to-int-warning fur asterisk 1.10

	* [r3147] src/chan_sccp.c, src/chan_sccp.h, src/common.h,
	  src/sccp_actions.c, src/sccp_actions.h, src/sccp_adv_features.h,
	  src/sccp_appfunctions.h, src/sccp_channel.c, src/sccp_channel.h,
	  src/sccp_cli.h, src/sccp_cli_table.h, src/sccp_conference.h,
	  src/sccp_config.h, src/sccp_device.h, src/sccp_dllists.h,
	  src/sccp_event.h, src/sccp_featureButton.c,
	  src/sccp_featureButton.h, src/sccp_features.c,
	  src/sccp_features.h, src/sccp_hint.h, src/sccp_indicate.c,
	  src/sccp_indicate.h, src/sccp_labels.h, src/sccp_line.h,
	  src/sccp_lock.h, src/sccp_management.h, src/sccp_mwi.h,
	  src/sccp_pbx.h, src/sccp_protocol.h, src/sccp_rtp.h,
	  src/sccp_socket.h, src/sccp_softkeys.h, src/sccp_utils.h: Removed
	  some unused variables; re-indented code

	* [r3146] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c: checked
	  deadlock fix, reindent sources

2011-12-28  ddegroot

	* [r3140] autoconf/acinclude.m4, autoconf/asterisk.m4,
	  autoconf/extra.m4, configure, contrib/gen_sccpconf/Makefile:
	  Fixed FreeBSD Compilation (Reported by David Cecchin)

2011-12-23  ddegroot

	* [r3133] backport_monitor_feature.patch: Update backport monitor
	  feature patch to include pbx_impl getFeatureExtension

2011-12-20  marcelloceschia

	* [r3130] backport_monitor_feature.patch[ADD]: backport: monitor
	  feature using requested state

	* [r3129] src/sccp_management.c: backport: add manager hook
	  functionality

2011-12-20  ddegroot

	* [r3128] src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c:
	  Fixed ast110 / astTrunk to compile with --enable-video flag
	  (Carlos Talbot, 2011/12/19)

2011-12-18  ddegroot

	* [r3125] src/pbx_impl/ast/ast110.c: Fix asterisk110_setWriteFormat
	  and asterisk110_setReadFormat

	* [r3124] TODO, aclocal.m4, autoconf/asterisk.m4,
	  autoconf/extra.m4, configure, contrib/gen_sccpconf/Makefile,
	  doc/Makefile.in, src/Makefile.in, src/pbx_impl/ast/ast108.c: Fix
	  missing ast_do_pickup function in older asterisk 1.8 features.c
	  versions

2011-11-18  ddegroot

	* [r3120] Makefile.in, autoconf/extra.m4, configure: Removed
	  -Wno-deprecated

2011-11-10  ddegroot

	* [r3119] src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c:
	  Added channel + channel.rtp.audio.rtp pointer check

2011-11-06  ddegroot

	* [r3118] autoconf/extra.m4, configure,
	  contrib/gen_sccpconf/Makefile, src/Makefile.am, src/Makefile.in,
	  src/chan_sccp.h, src/sccp_config.c, src/sccp_socket.c,
	  src/sccp_utils.c, src/sccp_utils.h: Extend debug gcc parameters,
	  fix a couple of signed/unsigned comparisons

2011-11-04  ddegroot

	* [r3117] ChangeLog, src/Makefile.am, src/Makefile.in,
	  src/sccp_socket.c: Remove dependence on sccp_thpool.?

	* [r3116] src/chan_sccp.h, src/pbx_impl/ast/define.h,
	  src/sccp_actions.c: Added experimental gpickup when pressing a
	  ringing speeddial

	* [r3115] autoconf/extra.m4, configure,
	  contrib/gen_sccpconf/Makefile, contrib/gen_sccpconf/Makefile.in,
	  src/Makefile.in: Removed dependence on libev

	* [r3114] Makefile.in, autoconf/extra.m4, configure, configure.ac,
	  doc/Makefile.in, src/Makefile.am, src/Makefile.in,
	  src/config.h.in: Add CPU Count to configure

2011-11-01  ddegroot

	* [r3113] src/chan_sccp.c, src/sccp_actions.c, src/sccp_config.c,
	  src/sccp_line.c: Replaced sccp_log(0)

2011-10-28  ddegroot

	* [r3110] src/sccp_config_entries.h: Set jitterbuffer parameters to
	  NOUPDATENEEDED

	* [r3109] conf/sccp.conf, contrib/gen_sccpconf/Makefile,
	  src/pbx_impl/ast/define.h, src/sccp_config.c,
	  src/sccp_config_entries.h: Re-Added jitterbuffer parsing to
	  sccp_config.c. Extended INT/UINT config parse to allow for LONG
	  LONG (64bit)

	* [r3108] src/sccp_cli.c: Mixed up labels in sccp show globals for
	  hotline

	* [r3107] src/sccp_config.c: accidentally commented out bindaddr
	  setting

	* [r3106] src/chan_sccp.c: accidentally commented out socket
	  creation

	* [r3105] src/chan_sccp.h, src/pbx_impl/ast/ast.c,
	  src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast108.c,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c,
	  src/sccp_actions.c, src/sccp_channel.c, src/sccp_config.c,
	  src/sccp_device.c, src/sccp_features.c, src/sccp_hint.c,
	  src/sccp_line.c, src/sccp_pbx.c, src/sccp_socket.c,
	  src/sccp_softkeys.c, src/sccp_utils.c: replaced sccp_log(1) with
	  sccp_log((DEBUGCAT_CORE)))

	* [r3104] src/chan_sccp.c, src/chan_sccp.h, src/sccp_actions.c,
	  src/sccp_config.c: Added posix methods to handle socket /
	  bindaddr / ip-address

	* [r3103] src/chan_sccp.c, src/chan_sccp.h, src/sccp_actions.c,
	  src/sccp_config.c: revert to 3101, accidental checkin of socket
	  replacement code.

	* [r3102] src/chan_sccp.c, src/chan_sccp.h, src/sccp_actions.c,
	  src/sccp_cli.c, src/sccp_config.c: cleanup experiment line
	  rewrite code from sccp_cli

2011-10-27  ddegroot

	* [r3101] TODO: updated TODO. sccp reload moved to testing

	* [r3098] ChangeLog, Makefile.in, contrib/gen_sccpconf/Makefile,
	  contrib/gen_sccpconf/gen_sccpconf.c, doc/Makefile.in: Updated
	  gen_sccpconf (the automatic sccp.conf generator)

	* [r3097] src/sccp_config_entries.h: Removed default for
	  secondaryDialtoneDigits

2011-10-26  ddegroot

	* [r3095] src/sccp_indicate.c: Possible solution for the Auto Hold
	  (Bug: 342487)

	* [r3094] src/sccp_actions.c, src/sccp_utils.c, src/sccp_utils.h:
	  Added experimental nat detection code (CS_EXPERIMENTAL)

2011-10-25  ddegroot

	* [r3093] src/chan_sccp.c, src/chan_sccp.h, src/common.h,
	  src/pbx_impl/ast/ast.c, src/pbx_impl/ast/ast.h,
	  src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast106.h,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c, src/sccp_actions.c,
	  src/sccp_appfunctions.c, src/sccp_channel.c, src/sccp_channel.h,
	  src/sccp_cli.c, src/sccp_cli.h, src/sccp_cli_table.h,
	  src/sccp_conference.c, src/sccp_conference.h, src/sccp_config.c,
	  src/sccp_config.h, src/sccp_config_entries.h, src/sccp_device.h,
	  src/sccp_hint.h, src/sccp_labels.h, src/sccp_mwi.h,
	  src/sccp_pbx.h, src/sccp_protocol.c, src/sccp_protocol.h,
	  src/sccp_socket.h, src/sccp_softkeys.h, src/sccp_utils.h:
	  Re-indented code

	* [r3092] src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/astTrunk.c:
	  Added sync todo

	* [r3091] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast106.h,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast108.h,
	  src/pbx_impl/ast/ast110.c, src/pbx_impl/ast/ast110.h,
	  src/pbx_impl/ast/astTrunk.c, src/pbx_impl/ast/astTrunk.h:
	  Resynced asterisk 1.10 and above to asterisk 1.8 functions

	* [r3090] src/sccp_conference.c: Fix V4.0
	  sccp_conference_addAstChannelToConferenceBridge

	* [r3089] src/sccp_device.c, src/sccp_socket.c: Moved freeing
	  messageStack entries from sccp_dev_cleanup to sccp_dev_destroy
	  [fixing r3079 fails to build with Asterisk 1.6.2.20]

	* [r3088] src/chan_sccp.h, src/sccp_device.c, src/sccp_utils.c,
	  src/sccp_utils.h: Updated event display to include name of the
	  event

2011-10-24  ddegroot

	* [r3087] src/sccp_config_entries.h: set default minimum incoming
	  call limit

	* [r3086] src/pbx_impl/ast/ast106.c, src/sccp_actions.c: Updated
	  requestHangup for ast106

	* [r3085] src/chan_sccp.h, src/pbx_impl/ast/ast.h,
	  src/pbx_impl/ast/ast108.c, src/sccp_actions.c, src/sccp_cli.c,
	  src/sccp_device.c, src/sccp_pbx.c: Added ifdef for IPv6

	* [r3084] Makefile.in, autoconf/extra.m4, conf/sccp.conf,
	  configure, contrib/gen_sccpconf/Makefile, doc/Makefile.in,
	  src/pbx_impl/ast/ast.c, src/pbx_impl/ast/ast106.c,
	  src/sccp_rtp.c: using netsock.h instead of netsock2.h for
	  asterisk 1.6.2.x

	* [r3083] src/pbx_impl/ast/ast.h, src/pbx_impl/ast/ast106.h: fix
	  format_t error for asterisk 1.6.2.20

	* [r3082] src/pbx_impl/ast/ast106.c, src/pbx_impl/ast/ast106.h:
	  Update asterisk 1.6 compatibility

	* [r3081] src/chan_sccp.c, src/chan_sccp.h, src/common.h,
	  src/pbx_impl/ast/ast.h: Move includes

2011-10-22  marcelloceschia

	* [r3079] src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/ast110.c,
	  src/pbx_impl/ast/astTrunk.c: always answer success for connected
	  line update

	* [r3078] src/pbx_impl/ast/ast108.c, src/sccp_rtp.c: remove the rtp
	  server notice

2011-10-21  ddegroot

	* [r3077] src/pbx_impl/ast/ast108.c, src/sccp_channel.c,
	  src/sccp_pbx.c: Added todo in bridging code, when forwarding call
	  to dialplan extension which start with PLAYBACK bridging goes
	  wrong. Haven't found a solution yet.

	* [r3076] src/pbx_impl/ast/ast108.c: Fix requestHangup when still
	  in Dialing state

2011-10-20  ddegroot

	* [r3072] src/pbx_impl/ast/ast108.c, src/sccp_pbx.h: cleanup
	  requestHangup

	* [r3070] src/pbx_impl/ast/ast108.c, src/sccp_device.c: Fix
	  requestHangup to deal with simultaneous hangup on two channels

2011-10-20  marcelloceschia

	* [r3069] src/sccp_config.c: parse hex values

	* [r3068] src/sccp_device.c: fixes disp prompt issue

2011-10-20  ddegroot

	* [r3067] src/pbx_impl/ast/ast106.h, src/pbx_impl/ast/ast108.h,
	  src/pbx_impl/ast/ast110.h, src/pbx_impl/ast/astTrunk.h: Fix
	  cli_command length [BUG: 3426184

2011-10-19  ddegroot

	* [r3066] src/sccp_utils.c: Clear CFWD's from database on event
	  SCCP_FEATURE_CFWDNONE

	* [r3065] src/sccp_utils.c: Clear CFWD's from database on event
	  SCCP_FEATURE_CFWDNONE

	* [r3064] src/Makefile.in, src/chan_sccp.h, src/config.h.in,
	  src/sccp_channel.c, src/sccp_conference.c, src/sccp_device.c,
	  src/sccp_features.c, src/sccp_pbx.c: Fixing messageStack out of
	  bounds, using PBX(requestHangup) instead of ast_hangup

	* [r3063] src/pbx_impl/ast/ast106.h, src/pbx_impl/ast/ast108.h,
	  src/pbx_impl/ast/ast110.h, src/pbx_impl/ast/astTrunk.h: cli
	  show_usage fix

	* [r3062] src/pbx_impl/ast/ast106.h, src/pbx_impl/ast/ast108.h: Fix
	  cli usage display when to little parameters are provided (related
	  to old cli_command[] NULL issue/fix)

	* [r3061] src/sccp_cli.c: fix sccp message with and without beep

	* [r3060] src/chan_sccp.h, src/sccp_device.c, src/sccp_device.h:
	  Using const in dev_display functions

	* [r3059] src/chan_sccp.h, src/pbx_impl/ast/ast106.c,
	  src/pbx_impl/ast/ast108.c, src/pbx_impl/ast/astTrunk.c,
	  src/sccp_utils.c: Commited Patch 1 by Stéphane Plantard

	* [r3058] src/Makefile.in, src/sccp_cli.c: Adapted sccp_cli.c to
	  cope with IPV6 display

2011-10-18  ddegroot

	* [r3057] src/sccp_config.h: re-added the record and intercept
	  button

	* [r3054] Makefile.in, autoconf/extra.m4, configure, configure.ac,
	  contrib/gen_sccpconf/Makefile, doc/Makefile.in, src/Makefile.in:
	  renamed CS_IPv6 to CS_IPV6 to rectify circular reference

	* [r3053] configure, contrib/gen_sccpconf/Makefile,
	  doc/04_Setup_Guide.doc, doc/05_New_Features.doc,
	  doc/06_Frequently_Asked_Questions.doc, doc/Makefile.in: Updated
	  documentation to clarify how to setup hints

2011-10-17  marcelloceschia

	* [r3052] autoconf/extra.m4: add option

	* [r3051] autoconf/extra.m4: add option

	* [r3050] autoconf/extra.m4: add option

2011-10-17  ddegroot

	* [r3049] TODO: Updated the TODO list

	* [r3048] TODO[ADD]: Readding the TODO list

	* [r3047] src/chan_sccp.h, src/sccp_cli.c, src/sccp_device.c: Moved
	  status indicator to Advanced Features for now

2011-10-15  marcelloceschia

	* [r3046] src/sccp_device.c: do not display idle state message on
	  89xx 69xx

	* [r3045] src/sccp_device.c: do not display idle state message on
	  89xx 69xx

	* [r3044] src/chan_sccp.h, src/sccp_device.c: do not display idle
	  state message on 89xx 69xx

	* [r3043] src/sccp_indicate.c, src/sccp_pbx.c: port 7910 from v3.1

2011-10-14  ddegroot

	* [r3036] src/chan_sccp.h, src/sccp_channel.c, src/sccp_device.c,
	  src/sccp_features.c, src/sccp_line.c, src/sccp_softkeys.c: Fixed
	  d->status.indicator for Cfwd / Privacy / Monitor

	* [r3033] src/chan_sccp.h, src/sccp_cli.c, src/sccp_device.c,
	  src/sccp_device.h, src/sccp_line.c: Fix array out of bounds read
	  for messageStack. Added d->status.indicator to display Cfwd / DND
	  / Privacy / Monitor

2011-10-14  davidded

	* [r3032] src/sccp_featureButton.c: fix for syntax error

	* [r3030] src/sccp_featureButton.c: migration of fix to fix to fix
	  to cfwdall fix to other branches

2011-10-14  ddegroot

	* [r3028] src/chan_sccp.h, src/sccp_channel.c, src/sccp_device.c,
	  src/sccp_device.h, src/sccp_indicate.c: cleanup deprecated
	  functions

2011-10-14  davidded

	* [r3027] src/sccp_featureButton.c: fix for fix for cwdall

	* [r3026] contrib/gen_sccpconf/Makefile, src/sccp_featureButton.c:
	  fix for backport cfwdall

	* [r3025] src/sccp_actions.c, src/sccp_featureButton.c: port of
	  cfwd all fix from V3.1

2011-10-13  marcelloceschia

	* [r3014] src/sccp_hint.c, src/sccp_hint.h: do not track missed
	  call for old style hints

2011-10-12  marcelloceschia

	* [r3012] src/sccp_protocol.h: change format

	* [r3011] configure.ac, contrib/gen_sccpconf/Makefile,
	  doc/Makefile.in: merge master

	* [r3010] src/chan_sccp.c, src/sccp_actions.h: add
	  MiscellaneousCommandMessage cb

	* [r3009] src/sccp_actions.c, src/sccp_protocol.h: add som debug
	  messages

2011-10-12  ddegroot

	* [r3008] Makefile.in, aclocal.m4, autoconf/asterisk.m4, configure,
	  configure.ac, contrib/gen_sccpconf/Makefile, doc/Makefile.in,
	  src/Makefile.in: Patch stephane in regard to asterisk version
	  number display

2011-10-12  marcelloceschia

	* [r3007] src/sccp_protocol.h: add MiscellaneousCommandMessageData

	* [r3006] src/pbx_impl/ast/ast108.c, src/sccp_channel.c,
	  src/sccp_protocol.c, src/sccp_protocol.h, src/sccp_socket.c:
	  implement AST_CONTROL_VIDUPDATE

2011-10-12  ddegroot

	* [r3005] src/chan_sccp.c, src/sccp_actions.c, src/sccp_actions.h,
	  src/sccp_protocol.h: Added MediaTransmissionFailure Message (from
	  wireshark)

2011-10-11  ddegroot

	* [r3002] src/sccp_cli.c: fixing tiny compile warnings

2011-10-11  marcelloceschia

	* [r3001] Makefile.in, aclocal.m4, configure,
	  contrib/gen_sccpconf/Makefile, doc/Makefile.in, src/Makefile.in,
	  src/chan_sccp.c, src/chan_sccp.h, src/pbx_impl/ast/ast108.c:
	  fixes broken commit

	* [r3000] src/pbx_impl/ast/ast.h: remove elsewhre

